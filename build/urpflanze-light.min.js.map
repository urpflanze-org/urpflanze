{"version":3,"sources":["webpack://Urpflanze/webpack/universalModuleDefinition","webpack://Urpflanze/webpack/bootstrap","webpack://Urpflanze/./dist/core/math/Vec2.js","webpack://Urpflanze/./dist/core/Utilites.js","webpack://Urpflanze/./dist/core/interfaces/shapes/Interfaces.js","webpack://Urpflanze/./dist/core/shapes/ShapeLoop.js","webpack://Urpflanze/./dist/core/types/ShapeBase.js","webpack://Urpflanze/./dist/core/Group.js","webpack://Urpflanze/./dist/core/shapes/ShapePrimitive.js","webpack://Urpflanze/./dist/core/shapes/ShapeBuffer.js","webpack://Urpflanze/./dist/core/shapes/ShapeBase.js","webpack://Urpflanze/./dist/core/shapes/Shape.js","webpack://Urpflanze/./dist/core/SceneChild.js","webpack://Urpflanze/./dist/core/Scene.js","webpack://Urpflanze/./dist/core/Context.js","webpack://Urpflanze/./dist/services/scene-utilities/ScenePropUtilities.js","webpack://Urpflanze/./dist/core/shapes/primitives/Spiral.js","webpack://Urpflanze/./dist/services/scene-utilities/SceneChildPropsData.js","webpack://Urpflanze/./dist/services/scene-utilities/SceneUtilities.js","webpack://Urpflanze/./dist/services/events/Emitter.js","webpack://Urpflanze/./dist/core/shapes/primitives/Line.js","webpack://Urpflanze/./dist/core/shapes/primitives/Triangle.js","webpack://Urpflanze/./dist/core/shapes/primitives/Rect.js","webpack://Urpflanze/./dist/core/shapes/primitives/RegularPolygon.js","webpack://Urpflanze/./dist/core/shapes/primitives/Circle.js","webpack://Urpflanze/./dist/core/shapes/primitives/Rose.js","webpack://Urpflanze/./dist/core/shapes/primitives/Lissajous.js","webpack://Urpflanze/./dist/services/animation/Easings.js","webpack://Urpflanze/./dist/services/animation/Simple.js","webpack://Urpflanze/./node_modules/@pups/utility/build/Number.js","webpack://Urpflanze/./dist/services/timeline/Timeline.js","webpack://Urpflanze/./dist/services/drawer-canvas/FrameBuffer.js","webpack://Urpflanze/./dist/services/drawer-canvas/DrawerCanvas.js","webpack://Urpflanze/./node_modules/simplex-noise/simplex-noise.js","webpack://Urpflanze/./node_modules/@pups/core/build/Models/Color/ColorManager.js","webpack://Urpflanze/./node_modules/@pups/utility/build/Array.js","webpack://Urpflanze/./dist/services/animation/Animation.js","webpack://Urpflanze/./dist/index-light.js","webpack://Urpflanze/./node_modules/@pups/utility/build/Object.js","webpack://Urpflanze/./node_modules/@pups/core/build/Models/Color/ColorParser.js","webpack://Urpflanze/./node_modules/@pups/core/build/Models/Color/ColorExceptions.js","webpack://Urpflanze/./node_modules/@pups/core/build/Models/Color/ColorConversions.js","webpack://Urpflanze/./node_modules/uuid/dist/esm-browser/rng.js","webpack://Urpflanze/./node_modules/uuid/dist/esm-browser/regex.js","webpack://Urpflanze/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://Urpflanze/./node_modules/uuid/dist/esm-browser/validate.js","webpack://Urpflanze/./node_modules/uuid/dist/esm-browser/v1.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","MATRIX","Array","dot","a","b","length","vec","Math","hypot","rotate","pointToRotate","p0","p1","ZERO","from","ONE","x","y","out","distance","angle","acos","squeezeX","squeezeY","skewX","tan","skewY","rotateX","rad","cos","rotateY","rotateZ","sin","translate","to","scale","divide","toString","isDef","now","performance","Date","aOr","args","toDegrees","radians","PI","toRadians","degrees","toArray","isArray","clamp","min","max","relativeClamp","refMin","refMax","toMin","toMax","ShapePrimitiveAdaptMode","ShapeLoop","settings","bPreventGeneration","type","super","this","shapeLoopPropsDependencies","concat","props","loop","start","end","PI2","inc","vertex","bStaticLoop","isStaticLoop","bStatic","isStatic","bStaticIndexed","isStaticIndexed","indexOf","vertexCallback","len","bClearIndexed","bPropagateToParents","clearBuffer","loop_buffer","undefined","assign","setProp","prop_arguments","default_value","getProp","buffer","getRepetitionCount","repetition","getLoop","generate_id","bindSideLength","generateLoopBuffer","getVertex","shape_loop","current_index","current_offset","current_angle","current_col","current_row","current_col_offset","current_row_offset","Loop","count","count_col","count_row","vertex_length","Float32Array","j","bAdaptBuffer","None","adaptBuffer","EMPTY_PROP_ARGUMENTS","_a","_b","_c","_d","_e","_f","time","scene","current_time","shape_loop_repetition","ceil","PId2","context","getEmptyRepetition","RepetitionType","Group","children","forEach","prop","item","order","apply","map","e","propagateToChilden","push","sortChildren","sort","child","index","id_or_name","id","getChildren","result","find","removed","splice","indexing_id","bDirectSceneChild","parent_prop_arguments","generate","parents","getParentsOfSceneChild","keys","k","sceneChild","getBufferLength","reduce","buffers","getBuffer","filter","size","curr_value","set","offset","EMPTY_BUFFER","indexed","getIndexedBuffer","callback","stream","parent","itemToPropagate","group","dest","groupProps","getProps","destProps","groupPropsKeys","destPropsKeys","ShapePrimitive","sideLength","fillColor","lineWidth","strokeColor","bCloseShape","bAdapted","frame_length","current_repetition","current","shape","buffer_length","minX","Number","MAX_VALUE","minY","maxX","MIN_VALUE","maxY","cx","cy","width","height","input","output","rect","getBounding","Fill","translateX","Center","translateY","ShapeBuffer","Scale","shape_buffer","isAdapted","points_length","level","subdivided","subdivide","setShape","bClosed","shape_len","px","py","nx","ny","ShapeBase","repetitions","displace","rotationOrigin","bUseParent","attribute","isNaN","indexed_buffer","isFirstLevelChild","repetition_type","Matrix","Ring","repetition_count","repetition_col_count","repetition_row_count","data","single_repetition_buffer_length","Uint16Array","total_buffer_length","center_matrix","current_row_repetition","current_col_repetition","generateBuffer","buffer_index","applyVertexTransform","center","current_indexing","mainColor","current_buffer_index","current_shape_index","total_shapes","addIndex","Shape","__id","Scene","start_time","last_update_time","delta_time","fps","background","at_time","walk","tmp_parents","slice","pop","noises","random","noise","seed","z","noise3D","offsetFromCenter","matrixOffset","atan","angle2","atan2","percW","percentage","percH","ScenePropUtilities","raw","Function","RAW_ARGUMENTS","sceneChildProp","transformation","bValueAnimation","drawer","bPropTransformable","transformedValueFunction","getValueFromResolution","getValueFromResolutionScaled","RAW_ARGUMENTS_WIT_PARENT","Spiral","spiral","types","ARCHIMEDE","twists","twists_start","sqrt","getRFromSpiralType","defaul_value","HYPERBOLIC","FERMAT","pow","LITUUS","LOGARITHMIC","E","SceneChildPropsData","animable","label","step","default","default_animate","canBArray","type_value","options","sideNumber","wx","wy","wz","registeredSceneChilds","Line","Triangle","Rect","RegularPolygon","Circle","Rose","Lissajous","ref","console","warn","getCountSceneChildOfType","visible","highlighted","disableGhost","isAPrimitive","getTransformedValue","strict","JSON","parse","stringify","copied","copiedChild","copy","add","copiedShape","newSceneChild","newGroup","sibling","remove","removeFromId","getParent","getParents","getChildrenPrimitives","composeAnimation","bValueDrawer","setClosed","setAdapted","splitted","split","bValueVertexCallback","composeVertexCallback","bValueLoop","composeLoop","dynamic","dynamyc","dependencies","callbacks","params","getFinalAngleFromK","sides","f","isInteger","ratio","Easings","linear","durate","quadraticIn","duratte","quadraticOut","quadraticInOut","cubicIn","cubicOut","cubicInOut","quarticIn","quarticOut","quarticInOut","quinticIn","quinticOut","quinticInOut","sinusoidalIn","sinusoidalOut","sinusoidalInOut","exponentialIn","exponentialOut","exponentialInOut","circularIn","circularOut","circularInOut","elasticIn","abs","asin","elasticOut","elasticBoth","backIn","backOut","backBoth","bounceIn","bounceOut","bounceBoth","Simple","compose","mode_function","delay","uncontrolledLoop","static","simpleAnimation","bArray","vCallback","v","invertOdd","round","createSimpleAnimationCallback","colorTransitionMode","interpolateColorHSL","interpolateColorRGB","animation","frequency","d2","aAlpha","getAlpha","bAlpha","getRgb","g","alpha","floor","getHsl","_h","h","_s","_l","uid","newId","twoDigits","clamp01","fix","decimal","parseFloat","toFixed","nextNumber","prevNumber","randomFloat","randomInt","trunc","lerp","value1","value2","amount","val","Emitter","sequence","framerate","frames","fps_samples_size","fps_samples","fps_samples_index","b_sequence_started","current_frame","last_tick","calculateTickAndSequence","dispatch","getSequence","tick_time","end_time","START","PAUSE","STOP","timestamp","currentTime","elapsed","delta","calculateFPS","getTime","currentFPS","samples","average","frame","frameNumber","exist","getImageData","canvas","canvasOrContainer","drawOptions","resolution","bBuffering","_g","timeline","resize","setScene","HTMLCanvasElement","OffscreenCanvas","setCanvas","document","createElement","appendChild","simmetricLine","clearCanvas","fixedLineWidth","noBackground","ghosts","ghost_skip_time","ghost_skip_function","backgroundImage","draw_id","redraw_id","animation_id","draw","animate","startAnimation","flushBuffer","HTMLElement","lastChild","removeChild","getContext","desynchronized","style","SceneUtilities","flush","getRenderedFrames","bSequenceStarted","requestAnimationFrame","tick","stopAnimation","stop","cancelAnimationFrame","pause","draw_time","ghost_index","getCurrentFrame","getFrameAtTime","putImageData","sequenceEndTime","getSequenceEndTime","ghostTime","getFramesCount","bGhost","ghostMultiplier","final_scale","final_translate","clearRect","fillStyle","fillRect","drawImage","Vec2","beginPath","strokeStyle","moveTo","lineTo","stroke","isClosed","closePath","color","exec","ghostAlpha","fill","F2","G2","G3","F4","G4","SimplexNoise","randomOrSeed","s0","s1","s2","mash","masher","arguments","alea","buildPermutationTable","perm","Uint8Array","permMod12","aux","charCodeAt","grad3","grad4","noise2D","xin","yin","i1","j1","n0","n1","n2","x0","y0","x1","y1","x2","y2","ii","jj","t0","gi0","t1","gi1","t2","gi2","zin","n3","k1","i2","j2","k2","z0","z1","z2","x3","y3","z3","kk","t3","gi3","noise4D","w","n4","l1","l2","i3","j3","k3","l3","w0","rankx","ranky","rankz","rankw","w1","w2","w3","x4","y4","z4","w4","ll","t4","gi4","_buildPermutationTable","Number_1","Array_1","ColorParser_1","ColorConversions_1","parsed","rgb","getRgbFromMath","hsl","rgbToHsl","hsv","rgbToHsv","hex","rgbToHex","cmyk","rgbToCmyk","setAlpha","match","toFloat","hslToRgb","hsvToRgb","cmykToRgb","hexToRgb","isHslOrHsv","toRGB","toHSL","toHSV","Object_1","toInt","elements","parseInt","hasObjectProperty","indexOfObjectProperty","getProperty","intersect","ai","bi","nextElement","prevElement","randomElement","Animation","prop_name","rawValue","eval","isUndef","isEqual","callable","each","hasProperty","defaultValue","properties","pi","join","setProperties","values","temp","nestedProperties","setPropery","ColorExceptions_1","ColorParser","fromString","fromObject","MATCHES","regexp","ColorNotValidException","matchResolver","MATCH_VALUES","possibilities","isFromZeroTo","want","scaleToFromZeroTo","ColorParsingException","maxValues","ZERO_TO_ONE","isFromZeroToOne","wantValues","CSS_INTEGER","CSS_NUMBER","CSS_UNIT","PERMISSIVE_MATCH3","PERMISSIVE_MATCH4","ZERO_TO_255","RegExp","Error","ColorConversions","toHex","hexToDec","str","fill2","hue2rgb","q","getRandomValues","crypto","msCrypto","rnds8","rng","uuid","test","byteToHex","substr","_nodeId","_clockseq","arr","toLowerCase","TypeError","_lastMSecs","_lastNSecs","buf","node","clockseq","seedBytes","msecs","nsecs","dt","tl","tmh"],"mappings":"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","file":"urpflanze-light.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Urpflanze\"] = factory();\n\telse\n\t\troot[\"Urpflanze\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 33);\n","import { clamp } from \"../Utilites\";\r\nconst MATRIX = new Array(4);\r\nconst create_matrix = () => {\r\n    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\r\n};\r\nconst create = (x = 0, y) => {\r\n    const out = new Array(2);\r\n    if (typeof x === 'number') {\r\n        out[0] = x;\r\n        out[1] = y !== null && y !== void 0 ? y : x;\r\n    }\r\n    else {\r\n        out[0] = x[0];\r\n        out[1] = x[1];\r\n    }\r\n    return out;\r\n};\r\nconst distance = (a, b) => Math.hypot(b[0] - a[0], b[1] - a[1]);\r\nconst dot = (a, b) => a[0] * b[0] + a[1] * b[1];\r\nconst length = (vec) => Math.hypot(vec[0], vec[1]);\r\nconst angle = (a, b) => {\r\n    const m = length(a) * length(b);\r\n    return Math.acos(clamp(-1, 1, m && dot(a, b) / m));\r\n};\r\nconst skewX = (vec, m) => {\r\n    vec[0] += Math.tan(m) * vec[1];\r\n};\r\nconst skewY = (vec, m) => {\r\n    vec[1] += Math.tan(m) * vec[0];\r\n};\r\nconst squeezeX = (vec, m) => {\r\n    vec[1] += vec[1] * (vec[0] * -m);\r\n};\r\nconst squeezeY = (vec, m) => {\r\n    vec[0] += vec[0] * (vec[1] * m);\r\n};\r\nconst rotate = (vec, MATRIX, pointToRotate) => {\r\n    const p0 = vec[0] - pointToRotate[0];\r\n    const p1 = vec[1] - pointToRotate[1];\r\n    vec[0] = p0 * MATRIX[0] + p1 * MATRIX[1] + pointToRotate[0];\r\n    vec[1] = p0 * MATRIX[2] + p1 * MATRIX[3] + pointToRotate[1];\r\n};\r\nconst rotateX = (vec, pointToRotate, rad) => {\r\n    MATRIX[0] = 1;\r\n    MATRIX[1] = 0;\r\n    MATRIX[2] = 0;\r\n    MATRIX[3] = Math.cos(rad);\r\n    rotate(vec, MATRIX, pointToRotate);\r\n};\r\nconst rotateY = (vec, pointToRotate, rad) => {\r\n    MATRIX[0] = Math.cos(rad);\r\n    MATRIX[1] = 0;\r\n    MATRIX[2] = 0;\r\n    MATRIX[3] = 1;\r\n    rotate(vec, MATRIX, pointToRotate);\r\n};\r\nconst rotateZ = (vec, pointToRotate, rad) => {\r\n    MATRIX[0] = Math.cos(rad);\r\n    MATRIX[1] = -Math.sin(rad);\r\n    MATRIX[2] = Math.sin(rad);\r\n    MATRIX[3] = Math.cos(rad);\r\n    rotate(vec, MATRIX, pointToRotate);\r\n};\r\nconst translate = (vec, to) => {\r\n    vec[0] += to[0];\r\n    vec[1] += to[1];\r\n};\r\nconst scale = (vec, to) => {\r\n    vec[0] *= to[0];\r\n    vec[1] *= to[1];\r\n};\r\nconst divide = (vec, to) => {\r\n    vec[0] /= to[0];\r\n    vec[1] /= to[1];\r\n};\r\nconst applyTransformation = (vec, rotateX, rotateY, rotateZ, translate, scale) => {\r\n    const matrix = create_matrix();\r\n    if (rotateX !== 0) {\r\n        const s = Math.sin(rotateX);\r\n        const c = Math.cos(rotateX);\r\n        matrix[5] = c;\r\n        matrix[6] = -s;\r\n        matrix[9] = s;\r\n        matrix[10] = c;\r\n    }\r\n    if (rotateY !== 0) {\r\n        const s = Math.sin(rotateY);\r\n        const c = Math.cos(rotateY);\r\n        matrix[0] = c;\r\n        matrix[2] = s;\r\n        matrix[8] = -s;\r\n        matrix[10] = matrix[10] + c;\r\n    }\r\n};\r\nconst toString = (vec) => `x: ${vec[0]}, y: ${vec[1]}`;\r\nconst ZERO = Array.from([0, 0]);\r\nconst ONE = Array.from([1, 1]);\r\nexport default {\r\n    create,\r\n    distance,\r\n    dot,\r\n    length,\r\n    angle,\r\n    squeezeX,\r\n    squeezeY,\r\n    skewX,\r\n    skewY,\r\n    rotateX,\r\n    rotateY,\r\n    rotateZ,\r\n    translate,\r\n    scale,\r\n    divide,\r\n    toString,\r\n    ZERO,\r\n    ONE,\r\n};\r\n//# sourceMappingURL=Vec2.js.map","const isDef = (object) => typeof object !== 'undefined' && object !== null;\r\nconst now = () => {\r\n    return performance && performance.now ? performance.now() : Date.now();\r\n};\r\nconst aOr = (...args) => {\r\n    for (let i = 0; i < args.length; i++)\r\n        if (isDef(args[i]))\r\n            return args[i];\r\n};\r\nconst toDegrees = (radians) => (radians * 180) / Math.PI;\r\nconst toRadians = (degrees) => (degrees * Math.PI) / 180;\r\nconst perf = (name, callback, log = false) => {\r\n    const t1 = now();\r\n    callback();\r\n    const t2 = now();\r\n    log && console.log('perf ' + name + ': ' + (t2 - t1));\r\n    return t2 - t1;\r\n};\r\nconst toArray = (t) => (Array.isArray(t) ? t : [t, t]);\r\nconst hasKey = (...args) => {\r\n    const props = args.shift();\r\n    const keys = typeof props == 'object' ? Object.keys(props) : [props];\r\n    for (let i = 0, klen = keys.length; i < klen; i++)\r\n        for (let j = 0, alen = args.length; j < alen; j++)\r\n            if (keys[i] == args[j])\r\n                return true;\r\n    return false;\r\n};\r\nconst clamp = (min, max, value) => (value <= min ? min : value >= max ? max : value);\r\nconst relativeClamp = (value, refMin, refMax, toMin, toMax) => clamp(toMin, toMax, ((value - refMin) / (refMax - refMin)) * (toMax - toMin) + toMin);\r\nexport { isDef, now, aOr, toDegrees, toRadians, toArray, hasKey, perf, clamp, relativeClamp };\r\n//# sourceMappingURL=Utilites.js.map","var ShapePrimitiveAdaptMode;\r\n(function (ShapePrimitiveAdaptMode) {\r\n    ShapePrimitiveAdaptMode[ShapePrimitiveAdaptMode[\"None\"] = 0] = \"None\";\r\n    ShapePrimitiveAdaptMode[ShapePrimitiveAdaptMode[\"Scale\"] = 2] = \"Scale\";\r\n    ShapePrimitiveAdaptMode[ShapePrimitiveAdaptMode[\"Center\"] = 4] = \"Center\";\r\n    ShapePrimitiveAdaptMode[ShapePrimitiveAdaptMode[\"Fill\"] = 8] = \"Fill\";\r\n})(ShapePrimitiveAdaptMode || (ShapePrimitiveAdaptMode = {}));\r\nexport { ShapePrimitiveAdaptMode, };\r\n//# sourceMappingURL=Interfaces.js.map","import { ShapeBasePropArguments, ShapeLoopGenerator, LoopMeta, Repetition, RepetitionType } from \"../types/ShapeBase\";\r\nimport { ShapeLoopProps, ShapeLoopSettings, ShapePrimitiveProps, ShapePrimitiveAdaptMode, } from \"../interfaces/shapes/Interfaces\";\r\nimport ShapePrimitive from \"./ShapePrimitive\";\r\nimport ShapeBase from \"./ShapeBase\";\r\nimport Vec2 from \"../math/Vec2\";\r\nimport Context from \"../Context\";\r\nclass ShapeLoop extends ShapePrimitive {\r\n    constructor(settings = {}, bPreventGeneration = false) {\r\n        settings.type = settings.type || 'ShapeLoop';\r\n        super(settings);\r\n        this.shapeLoopPropsDependencies = (settings.shapeLoopPropsDependencies || []).concat('bAdaptBuffer');\r\n        this.props.loop = settings.loop;\r\n        if (!bPreventGeneration) {\r\n            this.loop = {\r\n                start: 0,\r\n                end: ShapeLoop.PI2,\r\n                inc: ShapeLoop.PI2 / 30,\r\n                vertex: () => Vec2.ZERO,\r\n            };\r\n            this.bStaticLoop = this.isStaticLoop();\r\n            this.bStatic = this.isStatic();\r\n            this.bStaticIndexed = this.isStaticIndexed();\r\n        }\r\n    }\r\n    isStaticLoop() {\r\n        if (this.shapeLoopPropsDependencies.indexOf('vertexCallback') >= 0 && typeof this.vertexCallback === 'function')\r\n            return false;\r\n        if (this.shapeLoopPropsDependencies.indexOf('prop_arguments') >= 0)\r\n            return false;\r\n        for (let i = 0, len = this.shapeLoopPropsDependencies.length; i < len; i++)\r\n            if (typeof this.props[this.shapeLoopPropsDependencies[i]] === 'function')\r\n                return false;\r\n        return true;\r\n    }\r\n    isStatic() {\r\n        return this.bStaticLoop && super.isStatic();\r\n    }\r\n    isStaticIndexed() {\r\n        return this.bStaticLoop && super.isStaticIndexed();\r\n    }\r\n    clearBuffer(bClearIndexed = false, bPropagateToParents = true) {\r\n        super.clearBuffer(bClearIndexed, bPropagateToParents);\r\n        this.bStaticLoop = this.isStaticLoop();\r\n        if (bClearIndexed) {\r\n            this.loop_buffer = undefined;\r\n        }\r\n    }\r\n    setProp(key, value) {\r\n        let bClearIndexed = false;\r\n        key = typeof key === 'string' ? { [key]: value } : key;\r\n        for (let i = this.shapeLoopPropsDependencies.length - 1; i >= 0; i--) {\r\n            if (this.shapeLoopPropsDependencies[i] in key) {\r\n                bClearIndexed = true;\r\n                break;\r\n            }\r\n        }\r\n        if ('loop' in key) {\r\n            key.loop = Object.assign(Object.assign({}, this.props.loop), key.loop);\r\n            bClearIndexed = true;\r\n        }\r\n        super.setProp(key, value, bClearIndexed);\r\n    }\r\n    getProp(key, prop_arguments, default_value) {\r\n        return super.getProp(key, prop_arguments, default_value);\r\n    }\r\n    getBufferLength(prop_arguments) {\r\n        if (this.bStatic && this.buffer && this.buffer.length > 0)\r\n            return this.buffer.length;\r\n        if (this.bStaticLoop && this.loop_buffer && this.loop_buffer.length > 0)\r\n            return this.loop_buffer.length * this.getRepetitionCount();\r\n        const { repetition } = this.getLoop(prop_arguments);\r\n        return this.getRepetitionCount() * repetition * 2;\r\n    }\r\n    generateBuffer(generate_id, prop_arguments) {\r\n        this.bindSideLength(prop_arguments);\r\n        if (!this.bStaticLoop)\r\n            return this.generateLoopBuffer(prop_arguments);\r\n        if (typeof this.loop_buffer === 'undefined')\r\n            this.loop_buffer = this.generateLoopBuffer(prop_arguments);\r\n        return this.loop_buffer;\r\n    }\r\n    generateLoopBuffer(prop_arguments) {\r\n        const { start, end, inc, repetition } = this.getLoop(prop_arguments);\r\n        const getVertex = (this.props.loop && this.props.loop.vertex ? this.props.loop.vertex : this.loop.vertex);\r\n        const shape_loop = {\r\n            current_index: 1,\r\n            current_offset: 0,\r\n            current_angle: 0,\r\n            current_col: 1,\r\n            current_row: 1,\r\n            current_col_offset: 0,\r\n            current_row_offset: 0,\r\n            type: RepetitionType.Loop,\r\n            count: repetition,\r\n            count_col: 1,\r\n            count_row: 1,\r\n        };\r\n        const vertex_length = shape_loop.count;\r\n        prop_arguments.shape_loop = shape_loop;\r\n        const buffer = new Float32Array(vertex_length * 2);\r\n        for (let i = 0, j = 0; i < vertex_length; i++, j += 2) {\r\n            const angle = start + inc * i;\r\n            shape_loop.current_angle = angle >= end ? end : angle;\r\n            shape_loop.current_index = i + 1;\r\n            shape_loop.current_offset = shape_loop.current_index / shape_loop.count;\r\n            const vertex = Float32Array.from(getVertex.call(Context, shape_loop.current_angle, prop_arguments));\r\n            this.vertexCallback && this.vertexCallback.call(Context, vertex, prop_arguments, i, vertex_length);\r\n            buffer[j] = vertex[0];\r\n            buffer[j + 1] = vertex[1];\r\n        }\r\n        return this.bAdaptBuffer != ShapePrimitiveAdaptMode.None\r\n            ? ShapePrimitive.adaptBuffer(buffer, this.bAdaptBuffer)\r\n            : buffer;\r\n    }\r\n    getLoop(prop_arguments = ShapeBase.EMPTY_PROP_ARGUMENTS) {\r\n        var _a, _b, _c, _d, _e, _f;\r\n        prop_arguments.time = this.scene ? this.scene.current_time : 1;\r\n        let start = (_b = (_a = this.props.loop) === null || _a === void 0 ? void 0 : _a.start) !== null && _b !== void 0 ? _b : this.loop.start;\r\n        let end = (_d = (_c = this.props.loop) === null || _c === void 0 ? void 0 : _c.end) !== null && _d !== void 0 ? _d : this.loop.end;\r\n        let inc = (_f = (_e = this.props.loop) === null || _e === void 0 ? void 0 : _e.inc) !== null && _f !== void 0 ? _f : this.loop.inc;\r\n        start = (typeof start === 'function' ? start(prop_arguments) : start);\r\n        end = (typeof end === 'function' ? end(prop_arguments) : end);\r\n        inc = (typeof inc === 'function' ? inc(prop_arguments) : inc);\r\n        const shape_loop_repetition = Math.ceil((end - start) / inc);\r\n        return { start, end, inc, repetition: shape_loop_repetition < 0 ? 0 : shape_loop_repetition };\r\n    }\r\n    setShape(loop) {\r\n        this.setProp('loop', loop);\r\n    }\r\n}\r\nShapeLoop.PI2 = Math.PI * 2;\r\nShapeLoop.PId2 = Math.PI / 2;\r\nShapeLoop.EMPTY_PROP_ARGUMENTS = {\r\n    time: 1,\r\n    context: Context,\r\n    repetition: ShapeBase.getEmptyRepetition(),\r\n    shape_loop: {\r\n        type: RepetitionType.Loop,\r\n        current_index: 0,\r\n        current_offset: 0,\r\n        current_angle: 0,\r\n        current_row: 0,\r\n        current_col: 0,\r\n        current_col_offset: 0,\r\n        current_row_offset: 0,\r\n        count: 0,\r\n        count_col: 0,\r\n        count_row: 0,\r\n    },\r\n};\r\nexport default ShapeLoop;\r\n//# sourceMappingURL=ShapeLoop.js.map","var RepetitionType;\r\n(function (RepetitionType) {\r\n    RepetitionType[RepetitionType[\"Ring\"] = 1] = \"Ring\";\r\n    RepetitionType[RepetitionType[\"Matrix\"] = 2] = \"Matrix\";\r\n    RepetitionType[RepetitionType[\"Loop\"] = 3] = \"Loop\";\r\n})(RepetitionType || (RepetitionType = {}));\r\nexport { RepetitionType, };\r\n//# sourceMappingURL=ShapeBase.js.map","import SceneChild from \"./SceneChild\";\r\nimport ShapeBase from \"./shapes/ShapeBase\";\r\nimport Scene from \"./Scene\";\r\nclass Group extends SceneChild {\r\n    constructor(settings = {}) {\r\n        settings.type = 'Group';\r\n        super(settings);\r\n        this.children = [];\r\n        ['id', 'name', 'order', 'type'].forEach((prop) => {\r\n            if (prop in settings)\r\n                delete settings[prop];\r\n        });\r\n        this.props = settings;\r\n    }\r\n    isStatic() {\r\n        const children = this.children;\r\n        for (let i = 0, len = children.length; i < len; i++)\r\n            if (!children[i].isStatic())\r\n                return false;\r\n        return true;\r\n    }\r\n    isStaticIndexed() {\r\n        const children = this.children;\r\n        for (let i = 0, len = children.length; i < len; i++)\r\n            if (!children[i].isStaticIndexed())\r\n                return false;\r\n        return true;\r\n    }\r\n    add(item) {\r\n        item.setProp(this.props);\r\n        item.order =\r\n            typeof item.order !== 'undefined'\r\n                ? item.order\r\n                : this.children.length > 0\r\n                    ? Math.max.apply(this, this.children.map(e => e.order || 0)) + 1\r\n                    : 0;\r\n        this.scene && Scene.propagateToChilden(item, this.scene);\r\n        this.children.push(item);\r\n        this.sortChildren();\r\n    }\r\n    sortChildren() {\r\n        this.children.sort((a, b) => a.order - b.order);\r\n        this.children = this.children.map((child, index) => {\r\n            child.order = index;\r\n            return child;\r\n        });\r\n        this.clearBuffer(true);\r\n    }\r\n    getChildren() {\r\n        return this.children;\r\n    }\r\n    find(id_or_name) {\r\n        if (this.id === id_or_name || this.name === id_or_name)\r\n            return this;\r\n        const children = this.getChildren();\r\n        for (let i = 0, len = children.length; i < len; i++) {\r\n            const result = children[i].find(id_or_name);\r\n            if (result !== null)\r\n                return result;\r\n        }\r\n        return null;\r\n    }\r\n    get(index) {\r\n        return index >= 0 && index < this.children.length ? this.children[index] : null;\r\n    }\r\n    remove(index) {\r\n        if (index >= 0 && index < this.children.length) {\r\n            const removed = this.children.splice(index, 1);\r\n            this.clearBuffer(true);\r\n            return removed;\r\n        }\r\n        return false;\r\n    }\r\n    removeFromId(id) {\r\n        for (let i = 0, len = this.children.length; i < len; i++) {\r\n            if (this.children[i].id == id) {\r\n                this.children.splice(i, 1);\r\n                return this.clearBuffer(true);\r\n            }\r\n        }\r\n    }\r\n    generate(indexing_id, bDirectSceneChild = false, parent_prop_arguments) {\r\n        this.children.forEach(item => item.generate(indexing_id, bDirectSceneChild, parent_prop_arguments));\r\n    }\r\n    clearBuffer(bClearIndexed = false, bPropagateToParents = true) {\r\n        this.children.forEach(item => item.clearBuffer(bClearIndexed, false));\r\n        if (this.scene && bPropagateToParents) {\r\n            const parents = this.scene.getParentsOfSceneChild(this);\r\n            parents.length > 0 && parents[parents.length - 1].clearBuffer(bClearIndexed, bPropagateToParents);\r\n        }\r\n    }\r\n    setProp(key, value) {\r\n        if (typeof key === 'object')\r\n            Object.keys(key).forEach((k) => (this.props[k] = key[k]));\r\n        else\r\n            this.props[key] = value;\r\n        this.children.forEach(item => item.setProp(key, value));\r\n    }\r\n    getBufferLength(prop_arguments) {\r\n        return this.children.map(sceneChild => sceneChild.getBufferLength(prop_arguments)).reduce((p, c) => p + c, 0);\r\n    }\r\n    getBuffer() {\r\n        const buffers = this.children\r\n            .map(item => item.getBuffer())\r\n            .filter(b => b !== undefined);\r\n        const size = buffers.reduce((curr_value, buffer) => curr_value + buffer.length, 0);\r\n        if (size > 0) {\r\n            const result = new Float32Array(size);\r\n            result.set(buffers[0], 0);\r\n            for (let i = 1, offset = 0, len = buffers.length; i < len; i++) {\r\n                offset += buffers[i - 1].length;\r\n                result.set(buffers[i], offset);\r\n            }\r\n            return result;\r\n        }\r\n        return ShapeBase.EMPTY_BUFFER;\r\n    }\r\n    getIndexedBuffer() {\r\n        const indexed = this.children.map(item => item.getIndexedBuffer()).filter(b => b !== undefined);\r\n        return [].concat.apply(null, indexed);\r\n    }\r\n    stream(callback) {\r\n        this.children.forEach(item => item.stream(callback));\r\n    }\r\n    index(buffer, parent) {\r\n        for (let i = 0, len = this.children.length; i < len; i++)\r\n            this.children[i].index(buffer, parent);\r\n    }\r\n    static propagateProp(itemToPropagate, key, value) {\r\n        itemToPropagate.setProp(key, value);\r\n    }\r\n    static removeIntersected(group, dest) {\r\n        const groupProps = group.getProps();\r\n        const destProps = dest.getProps();\r\n        const groupPropsKeys = Object.keys(groupProps);\r\n        const destPropsKeys = Object.keys(destProps);\r\n        const result = {};\r\n        groupPropsKeys.forEach((key) => {\r\n            destPropsKeys.indexOf(key) >= 0 && (result[key] = groupProps[key]);\r\n        });\r\n        return result;\r\n    }\r\n}\r\nexport default Group;\r\n//# sourceMappingURL=Group.js.map","import ShapeBase from \"./ShapeBase\";\r\nimport { ShapePrimitiveProps, ShapePrimitiveSettings, ShapeBaseProps, ShapePrimitiveAdaptMode, } from \"../interfaces/shapes/Interfaces\";\r\nimport { aOr } from \"../Utilites\";\r\nimport Vec2, { TArray } from \"../math/Vec2\";\r\nclass ShapePrimitive extends ShapeBase {\r\n    constructor(settings = {}) {\r\n        var _a, _b;\r\n        super(settings);\r\n        this.props.sideLength = aOr(settings.sideLength, [50, 50]);\r\n        this.sideLength = Vec2.create(aOr(settings.sideLength, [50, 50]));\r\n        this.props.fillColor = settings.fillColor;\r\n        this.props.lineWidth = settings.lineWidth;\r\n        this.props.strokeColor = settings.strokeColor;\r\n        this.bAdaptBuffer = (_a = settings.bAdaptBuffer) !== null && _a !== void 0 ? _a : ShapePrimitiveAdaptMode.None;\r\n        this.bCloseShape = (_b = settings.bCloseShape) !== null && _b !== void 0 ? _b : true;\r\n        this.vertexCallback = settings.vertexCallback;\r\n    }\r\n    isStatic() {\r\n        return (typeof this.props.sideLength !==\r\n            'function' &&\r\n            super.isStatic());\r\n    }\r\n    getProp(key, prop_arguments, default_value) {\r\n        return super.getProp(key, prop_arguments, default_value);\r\n    }\r\n    bindSideLength(prop_arguments) {\r\n        this.sideLength = Vec2.create(this.getProp('sideLength', prop_arguments, [50, 50]));\r\n    }\r\n    applyVertexTransform(vertex) {\r\n        vertex[0] *= this.sideLength[0];\r\n        vertex[1] *= this.sideLength[1];\r\n    }\r\n    isClosed() {\r\n        return this.bCloseShape;\r\n    }\r\n    setClosed(bCloseShape) {\r\n        this.bCloseShape = bCloseShape;\r\n    }\r\n    isAdapted() {\r\n        return this.bAdaptBuffer;\r\n    }\r\n    setAdapted(bAdapted) {\r\n        this.bAdaptBuffer = bAdapted;\r\n        this.clearBuffer(true);\r\n    }\r\n    addIndex(buffer, frame_length, current_repetition, parent) {\r\n        const current = {\r\n            shape: this,\r\n            buffer_length: frame_length,\r\n            parent,\r\n            repetition: current_repetition,\r\n        };\r\n        buffer.push(current);\r\n    }\r\n    static getBounding(buffer) {\r\n        let minX = Number.MAX_VALUE, minY = Number.MAX_VALUE, maxX = Number.MIN_VALUE, maxY = Number.MIN_VALUE;\r\n        for (let i = 0, len = buffer.length; i < len; i += 2) {\r\n            const x = buffer[i];\r\n            const y = buffer[i + 1];\r\n            if (x > maxX)\r\n                maxX = x;\r\n            else if (x < minX)\r\n                minX = x;\r\n            if (y > maxY)\r\n                maxY = y;\r\n            else if (y < minY)\r\n                minY = y;\r\n        }\r\n        return {\r\n            x: minX,\r\n            y: minY,\r\n            cx: (minX + maxX) / 2,\r\n            cy: (minY + maxY) / 2,\r\n            width: maxX - minX,\r\n            height: maxY - minY,\r\n        };\r\n    }\r\n    static adaptBuffer(input, mode) {\r\n        if (mode == ShapePrimitiveAdaptMode.None)\r\n            return input;\r\n        const output = new Float32Array(input.length);\r\n        const rect = ShapePrimitive.getBounding(input);\r\n        let scale = rect.width > 2 || rect.height > 2 || (mode >= ShapePrimitiveAdaptMode.Fill && (rect.width < 2 || rect.height < 2))\r\n            ? 2 / Math.max(rect.width, rect.height)\r\n            : 1;\r\n        let translateX = mode >= ShapePrimitiveAdaptMode.Center ? rect.cx : 0;\r\n        let translateY = mode >= ShapePrimitiveAdaptMode.Center ? rect.cy : 0;\r\n        for (let i = 0, len = input.length; i < len; i += 2) {\r\n            output[i] = (input[i] - translateX) * scale;\r\n            output[i + 1] = (input[i + 1] - translateY) * scale;\r\n        }\r\n        return output;\r\n    }\r\n}\r\nexport default ShapePrimitive;\r\n//# sourceMappingURL=ShapePrimitive.js.map","import ShapePrimitive from \"./ShapePrimitive\";\r\nimport { ShapeBufferSettings, ShapePrimitiveAdaptMode } from \"../interfaces/shapes/Interfaces\";\r\nclass ShapeBuffer extends ShapePrimitive {\r\n    constructor(settings = {}) {\r\n        settings.type = settings.type || 'ShapeBuffer';\r\n        settings.bAdaptBuffer = settings.bAdaptBuffer || ShapePrimitiveAdaptMode.Scale;\r\n        super(settings);\r\n        this.shape = settings.shape instanceof Float32Array ? settings.shape : ShapeBuffer.EMPTY_BUFFER;\r\n        this.shape_buffer =\r\n            this.isAdapted() != ShapePrimitiveAdaptMode.None\r\n                ? ShapePrimitive.adaptBuffer(this.shape, this.isAdapted())\r\n                : this.shape;\r\n        this.bStatic = this.isStatic();\r\n        this.bStaticIndexed = this.isStaticIndexed();\r\n    }\r\n    clearBuffer(bClearIndexed = false, bPropagateToParents = true) {\r\n        super.clearBuffer(bClearIndexed, bPropagateToParents);\r\n        this.shape_buffer =\r\n            this.isAdapted() != ShapePrimitiveAdaptMode.None\r\n                ? ShapePrimitive.adaptBuffer(this.shape, this.isAdapted())\r\n                : this.shape;\r\n    }\r\n    getBufferLength() {\r\n        if (this.buffer && this.buffer.length > 0)\r\n            return this.buffer.length;\r\n        return this.shape_buffer.length * this.getRepetitionCount();\r\n    }\r\n    generateBuffer(generate_id, prop_arguments) {\r\n        this.bindSideLength(prop_arguments);\r\n        if (this.vertexCallback) {\r\n            const buffer_length = this.shape_buffer.length;\r\n            const points_length = buffer_length / 2;\r\n            const buffer = Float32Array.from(this.shape_buffer);\r\n            for (let i = 0, j = 0; i < buffer_length; i += 2, j++) {\r\n                const vertex = [buffer[i], buffer[i + 1]];\r\n                this.vertexCallback(vertex, prop_arguments, j, points_length);\r\n                buffer[i] = vertex[0];\r\n                buffer[i + 1] = vertex[1];\r\n            }\r\n            return buffer;\r\n        }\r\n        return this.shape_buffer;\r\n    }\r\n    setShape(shape) {\r\n        this.shape = shape;\r\n        this.clearBuffer(true);\r\n    }\r\n    subdivide(level = 1) {\r\n        let subdivided = this.shape;\r\n        if (subdivided)\r\n            for (let i = 0; i < level; i++)\r\n                subdivided = ShapeBuffer.subdivide(subdivided, this.bCloseShape);\r\n        subdivided && this.setShape(subdivided);\r\n    }\r\n    static subdivide(shape, bClosed = true) {\r\n        if (shape && shape.length) {\r\n            const shape_len = shape.length;\r\n            const subdivided = new Float32Array(shape_len * 2 - (bClosed ? 0 : 2));\r\n            for (let i = 0; i < shape_len; i += 2) {\r\n                if (i === 0) {\r\n                    subdivided[0] = shape[0];\r\n                    subdivided[1] = shape[1];\r\n                }\r\n                else {\r\n                    const px = shape[i - 2];\r\n                    const py = shape[i - 1];\r\n                    const x = shape[i];\r\n                    const y = shape[i + 1];\r\n                    const nx = (x + px) / 2;\r\n                    const ny = (y + py) / 2;\r\n                    subdivided[(i - 1) * 2] = nx;\r\n                    subdivided[(i - 1) * 2 + 1] = ny;\r\n                    subdivided[i * 2] = x;\r\n                    subdivided[i * 2 + 1] = y;\r\n                }\r\n                if (bClosed) {\r\n                    subdivided[(shape_len - 1) * 2] = (shape[0] + shape[shape_len - 2]) / 2;\r\n                    subdivided[(shape_len - 1) * 2 + 1] = (shape[1] + shape[shape_len - 1]) / 2;\r\n                }\r\n            }\r\n            return subdivided;\r\n        }\r\n    }\r\n}\r\nexport default ShapeBuffer;\r\n//# sourceMappingURL=ShapeBuffer.js.map","import { ShapeLoopGenerator, ShapeBasePropArguments, ShapeBaseStreamIndexing, Repetition, ShapeBaseStreamArguments, RepetitionType, } from \"../types/ShapeBase\";\r\nimport SceneChild from \"../SceneChild\";\r\nimport Vec2, { TArray } from \"../math/Vec2\";\r\nimport Context from \"../Context\";\r\nclass ShapeBase extends SceneChild {\r\n    constructor(settings = {}) {\r\n        super(settings);\r\n        this.generate_id = -1;\r\n        this.props = {\r\n            distance: settings.distance,\r\n            repetitions: settings.repetitions,\r\n            rotateX: settings.rotateX,\r\n            rotateY: settings.rotateY,\r\n            rotateZ: settings.rotateZ,\r\n            skewX: settings.skewX,\r\n            skewY: settings.skewY,\r\n            squeezeX: settings.squeezeX,\r\n            squeezeY: settings.squeezeY,\r\n            displace: settings.displace,\r\n            translate: settings.translate,\r\n            scale: settings.scale,\r\n            rotationOrigin: settings.rotationOrigin,\r\n        };\r\n        this.bUseParent = !!settings.bUseParent;\r\n    }\r\n    isStatic() {\r\n        const props = this.props;\r\n        return (typeof props.distance !== 'function' &&\r\n            typeof props.repetitions !== 'function' &&\r\n            typeof props.rotateX !== 'function' &&\r\n            typeof props.rotateY !== 'function' &&\r\n            typeof props.rotateZ !== 'function' &&\r\n            typeof props.displace !== 'function' &&\r\n            typeof props.skewX !== 'function' &&\r\n            typeof props.skewY !== 'function' &&\r\n            typeof props.squeezeX !== 'function' &&\r\n            typeof props.squeezeY !== 'function' &&\r\n            typeof props.translate !== 'function' &&\r\n            typeof props.scale !== 'function' &&\r\n            typeof props.rotationOrigin !== 'function');\r\n    }\r\n    isStaticIndexed() {\r\n        return typeof this.props.repetitions !== 'function';\r\n    }\r\n    getProp(key, prop_arguments, default_value) {\r\n        let attribute = this.props[key];\r\n        if (typeof attribute == 'function') {\r\n            prop_arguments = prop_arguments || ShapeBase.EMPTY_PROP_ARGUMENTS;\r\n            if (typeof prop_arguments.shape === 'undefined')\r\n                prop_arguments.shape = this;\r\n            if (typeof prop_arguments.context === 'undefined')\r\n                prop_arguments.context = Context;\r\n            if (this.scene)\r\n                prop_arguments.time = this.scene.current_time;\r\n            attribute = attribute(prop_arguments);\r\n        }\r\n        return typeof attribute === 'undefined' || Number.isNaN(attribute) ? default_value : attribute;\r\n    }\r\n    setProp(key, value, bClearIndexed = false) {\r\n        if (typeof key == 'string') {\r\n            bClearIndexed = bClearIndexed || key == 'repetitions';\r\n            this.props[key] = value;\r\n        }\r\n        else {\r\n            bClearIndexed = bClearIndexed || 'repetitions' in key;\r\n            Object.keys(key).forEach((k) => (this.props[k] = key[k]));\r\n        }\r\n        this.clearBuffer(bClearIndexed);\r\n    }\r\n    clearBuffer(bClearIndexed = false, bPropagateToParents = true) {\r\n        this.buffer = undefined;\r\n        if (bClearIndexed)\r\n            this.indexed_buffer = undefined;\r\n        this.bStatic = this.isStatic();\r\n        this.bStaticIndexed = this.isStaticIndexed();\r\n        if (bPropagateToParents && this.scene && !this.scene.isFirstLevelChild(this)) {\r\n            const parents = this.scene.getParentsOfSceneChild(this);\r\n            parents.length > 0 && parents[parents.length - 1].clearBuffer(bClearIndexed, bPropagateToParents);\r\n        }\r\n    }\r\n    generate(generate_id, bDirectSceneChild = false, parent_prop_arguments) {\r\n        var _a, _b;\r\n        if (!this.scene || (this.buffer && (this.bStatic || (generate_id === this.generate_id && !this.bUseParent))))\r\n            return;\r\n        this.generate_id = generate_id;\r\n        const repetition = ShapeBase.getEmptyRepetition();\r\n        const repetitions = this.getProp('repetitions', { parent: parent_prop_arguments, repetition, time: 1, context: Context }, 1);\r\n        const repetition_type = Array.isArray(repetitions) ? RepetitionType.Matrix : RepetitionType.Ring;\r\n        const repetition_count = Array.isArray(repetitions)\r\n            ? repetitions[0] * ((_a = repetitions[1]) !== null && _a !== void 0 ? _a : repetitions[0])\r\n            : repetitions;\r\n        const repetition_col_count = Array.isArray(repetitions) ? repetitions[0] : repetition_count;\r\n        const repetition_row_count = Array.isArray(repetitions) ? (_b = repetitions[1]) !== null && _b !== void 0 ? _b : repetitions[0] : 1;\r\n        repetition.count = repetition_count;\r\n        repetition.count_col = repetition_col_count;\r\n        repetition.count_row = repetition_row_count;\r\n        repetition.type = repetition_type;\r\n        const prop_arguments = {\r\n            repetition,\r\n            context: Context,\r\n            time: this.scene ? this.scene.current_time : 1,\r\n            shape: this,\r\n            data: this.data,\r\n            parent: parent_prop_arguments,\r\n        };\r\n        this.single_repetition_buffer_length = new Uint16Array(repetition_count);\r\n        let total_buffer_length = 0;\r\n        const buffers = [];\r\n        let current_index = 0;\r\n        const center_matrix = Vec2.create((repetition_col_count - 1) / 2, (repetition_row_count - 1) / 2);\r\n        for (let current_row_repetition = 0; current_row_repetition < repetition_row_count; current_row_repetition++) {\r\n            for (let current_col_repetition = 0; current_col_repetition < repetition_col_count; current_col_repetition++, current_index++) {\r\n                repetition.current_index = current_index + 1;\r\n                repetition.current_offset = repetition.current_index / repetition.count;\r\n                repetition.current_angle =\r\n                    repetition_type == RepetitionType.Ring ? ((Math.PI * 2) / repetition_count) * current_index : 0;\r\n                repetition.current_col = current_col_repetition + 1;\r\n                repetition.current_col_offset = repetition.current_col / repetition.count_col;\r\n                repetition.current_row = current_row_repetition + 1;\r\n                repetition.current_row_offset = repetition.current_row / repetition.count_row;\r\n                const distance = Vec2.create(this.getProp('distance', prop_arguments, Vec2.ZERO));\r\n                const displace = this.getProp('displace', prop_arguments, 0);\r\n                const scale = Vec2.create(this.getProp('scale', prop_arguments, Vec2.ONE));\r\n                const translate = Vec2.create(this.getProp('translate', prop_arguments, Vec2.ZERO));\r\n                const skewX = this.getProp('skewX', prop_arguments, 0);\r\n                const skewY = this.getProp('skewY', prop_arguments, 0);\r\n                const squeezeX = this.getProp('squeezeX', prop_arguments, 0);\r\n                const squeezeY = this.getProp('squeezeY', prop_arguments, 0);\r\n                const rotateX = this.getProp('rotateX', prop_arguments, 0);\r\n                const rotateY = this.getProp('rotateY', prop_arguments, 0);\r\n                const rotateZ = this.getProp('rotateZ', prop_arguments, 0);\r\n                const rotationOrigin = Vec2.create(this.getProp('rotationOrigin', prop_arguments, Vec2.ZERO));\r\n                const buffer = this.generateBuffer(generate_id, prop_arguments);\r\n                const buffer_length = buffer.length;\r\n                buffers[current_index] = new Float32Array(buffer_length);\r\n                this.single_repetition_buffer_length[current_index] = buffer_length;\r\n                total_buffer_length += buffer_length;\r\n                let offset;\r\n                switch (repetition_type) {\r\n                    case RepetitionType.Ring:\r\n                        offset = Vec2.create(distance[0], 0);\r\n                        Vec2.rotateZ(offset, Vec2.ZERO, repetition.current_angle + displace);\r\n                        break;\r\n                    case RepetitionType.Matrix:\r\n                        offset = Vec2.create(distance[0] * (current_col_repetition - center_matrix[0]), distance[1] * (current_row_repetition - center_matrix[1]));\r\n                        break;\r\n                }\r\n                for (let buffer_index = 0; buffer_index < buffer_length; buffer_index += 2) {\r\n                    const vertex = Vec2.create(buffer[buffer_index], buffer[buffer_index + 1]);\r\n                    this.applyVertexTransform(vertex);\r\n                    squeezeX !== 0 && Vec2.squeezeX(vertex, squeezeX);\r\n                    squeezeY !== 0 && Vec2.squeezeY(vertex, squeezeY);\r\n                    rotateX !== 0 && Vec2.rotateX(vertex, rotationOrigin, rotateX);\r\n                    rotateY !== 0 && Vec2.rotateY(vertex, rotationOrigin, rotateY);\r\n                    rotateZ !== 0 && Vec2.rotateZ(vertex, rotationOrigin, rotateZ);\r\n                    skewX !== 0 && Vec2.skewX(vertex, skewX);\r\n                    skewY !== 0 && Vec2.skewY(vertex, skewY);\r\n                    (scale[0] != 1 || scale[1] != 1) && Vec2.scale(vertex, scale);\r\n                    (translate[0] != 0 || translate[1] != 0) && Vec2.translate(vertex, translate);\r\n                    if (repetition_type === RepetitionType.Ring) {\r\n                        Vec2.rotateZ(vertex, Vec2.ZERO, repetition.current_angle + displace);\r\n                    }\r\n                    Vec2.translate(vertex, offset);\r\n                    if (bDirectSceneChild) {\r\n                        vertex[0] += this.scene.center[0];\r\n                        vertex[1] += this.scene.center[1];\r\n                    }\r\n                    buffers[current_index][buffer_index] = vertex[0];\r\n                    buffers[current_index][buffer_index + 1] = vertex[1];\r\n                }\r\n            }\r\n        }\r\n        this.buffer = new Float32Array(total_buffer_length);\r\n        for (let i = 0, offset = 0, len = buffers.length; i < len; offset += buffers[i].length, i++)\r\n            this.buffer.set(buffers[i], offset);\r\n        if (bDirectSceneChild && (!this.indexed_buffer || !this.bStaticIndexed))\r\n            this.index((this.indexed_buffer = []));\r\n    }\r\n    applyVertexTransform(vertex) { }\r\n    getRepetitionCount() {\r\n        var _a;\r\n        let repetitions = this.getProp('repetitions', undefined, 1);\r\n        return Array.isArray(repetitions) ? repetitions[0] * ((_a = repetitions[1]) !== null && _a !== void 0 ? _a : repetitions[0]) : repetitions;\r\n    }\r\n    getBuffer() {\r\n        return this.buffer;\r\n    }\r\n    getIndexedBuffer() {\r\n        return this.indexed_buffer;\r\n    }\r\n    getSingleRepetitionBufferLength() {\r\n        return this.single_repetition_buffer_length;\r\n    }\r\n    stream(callback) {\r\n        if (this.scene && this.buffer && this.indexed_buffer) {\r\n            for (let i = 0, j = 0, len = this.indexed_buffer.length; i < len; i++) {\r\n                const current_indexing = this.indexed_buffer[i];\r\n                const prop_arguments = {\r\n                    shape: current_indexing.shape,\r\n                    repetition: current_indexing.repetition,\r\n                    context: Context,\r\n                    time: 0,\r\n                    parent: current_indexing.parent,\r\n                    data: current_indexing.shape.data,\r\n                };\r\n                const fillColor = current_indexing.shape.getProp('fillColor', prop_arguments);\r\n                const lineWidth = current_indexing.shape.getProp('lineWidth', prop_arguments, fillColor ? undefined : 1);\r\n                const strokeColor = current_indexing.shape.getProp('strokeColor', prop_arguments, fillColor ? undefined : this.scene.mainColor);\r\n                const streamArguments = {\r\n                    shape: current_indexing.shape,\r\n                    repetition: current_indexing.repetition,\r\n                    buffer: this.buffer,\r\n                    buffer_length: current_indexing.buffer_length,\r\n                    current_buffer_index: j,\r\n                    current_shape_index: i,\r\n                    total_shapes: len,\r\n                    lineWidth,\r\n                    strokeColor,\r\n                    fillColor,\r\n                };\r\n                callback(streamArguments);\r\n                j += current_indexing.buffer_length;\r\n            }\r\n        }\r\n    }\r\n    index(buffer, parent) {\r\n        var _a, _b;\r\n        const shape_buffer = this.getBuffer();\r\n        if (shape_buffer) {\r\n            const repetitions = this.getProp('repetitions', { parent, time: 1, repetition: ShapeBase.getEmptyRepetition(), context: Context }, 1);\r\n            const repetition_type = Array.isArray(repetitions) ? RepetitionType.Matrix : RepetitionType.Ring;\r\n            const repetition_count = Array.isArray(repetitions)\r\n                ? repetitions[0] * ((_a = repetitions[1]) !== null && _a !== void 0 ? _a : repetitions[0])\r\n                : repetitions;\r\n            const repetition_col_count = Array.isArray(repetitions) ? repetitions[0] : repetition_count;\r\n            const repetition_row_count = Array.isArray(repetitions) ? (_b = repetitions[1]) !== null && _b !== void 0 ? _b : repetitions[0] : 1;\r\n            let current_index = 0;\r\n            for (let current_row_repetition = 0; current_row_repetition < repetition_row_count; current_row_repetition++) {\r\n                for (let current_col_repetition = 0; current_col_repetition < repetition_col_count; current_col_repetition++, current_index++) {\r\n                    const repetition = {\r\n                        current_index: current_index + 1,\r\n                        current_offset: (current_index + 1) / repetition_count,\r\n                        current_angle: repetition_type == RepetitionType.Ring ? ((Math.PI * 2) / repetition_count) * current_index : 0,\r\n                        count: repetition_count,\r\n                        count_col: repetition_col_count,\r\n                        count_row: repetition_row_count,\r\n                        current_col: current_col_repetition + 1,\r\n                        current_col_offset: (current_col_repetition + 1) / repetition_col_count,\r\n                        current_row: current_row_repetition + 1,\r\n                        current_row_offset: (current_row_repetition + 1) / repetition_row_count,\r\n                        type: repetition_type,\r\n                    };\r\n                    this.addIndex(buffer, this.single_repetition_buffer_length[current_index], repetition, parent);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nShapeBase.EMPTY_BUFFER = new Float32Array(0);\r\nShapeBase.getEmptyRepetition = () => ({\r\n    current_index: 1,\r\n    current_offset: 0,\r\n    current_angle: 0,\r\n    current_col: 1,\r\n    current_row: 1,\r\n    current_col_offset: 0,\r\n    current_row_offset: 0,\r\n    type: RepetitionType.Ring,\r\n    count: 1,\r\n    count_col: 1,\r\n    count_row: 1,\r\n});\r\nShapeBase.EMPTY_PROP_ARGUMENTS = {\r\n    time: 1,\r\n    context: Context,\r\n    repetition: ShapeBase.getEmptyRepetition(),\r\n};\r\nexport default ShapeBase;\r\n//# sourceMappingURL=ShapeBase.js.map","import ShapeBase from \"./ShapeBase\";\r\nimport SceneChild from \"../SceneChild\";\r\nimport Scene from \"../Scene\";\r\nclass Shape extends ShapeBase {\r\n    constructor(settings = {}) {\r\n        settings.type = settings.type || 'Shape';\r\n        super(settings);\r\n        if (settings.shape instanceof SceneChild) {\r\n            this.shape = settings.shape;\r\n        }\r\n        this.bStatic = this.isStatic();\r\n        this.bStaticIndexed = this.isStaticIndexed();\r\n    }\r\n    isStatic() {\r\n        return super.isStatic() && (this.shape ? this.shape.isStatic() : true);\r\n    }\r\n    isStaticIndexed() {\r\n        return super.isStaticIndexed() && (this.shape ? this.shape.isStaticIndexed() : true);\r\n    }\r\n    find(id_or_name) {\r\n        if (this.id === id_or_name || this.name === id_or_name)\r\n            return this;\r\n        if (this.shape)\r\n            return this.shape.find(id_or_name);\r\n        return null;\r\n    }\r\n    getBufferLength(prop_arguments) {\r\n        if (this.bStatic && this.buffer && this.buffer.length > 0)\r\n            return this.buffer.length;\r\n        const child_buffer_length = this.shape ? this.shape.getBufferLength(prop_arguments) : 0;\r\n        return child_buffer_length * this.getRepetitionCount();\r\n    }\r\n    generateBuffer(generate_id, prop_arguments) {\r\n        if (this.shape) {\r\n            this.shape.generate(generate_id, false, prop_arguments);\r\n            return this.shape.getBuffer() || Shape.EMPTY_BUFFER;\r\n        }\r\n        return Shape.EMPTY_BUFFER;\r\n    }\r\n    setShape(shape) {\r\n        if (typeof shape === 'undefined') {\r\n            this.shape = undefined;\r\n            this.clearBuffer(true);\r\n        }\r\n        else {\r\n            this.scene && Scene.propagateToChilden(shape, this.scene);\r\n            this.shape = shape;\r\n            this.shape.clearBuffer(true);\r\n        }\r\n    }\r\n    addIndex(buffer, frame_length, current_repetition, parent) {\r\n        if (this.shape) {\r\n            const current = {\r\n                shape: this,\r\n                buffer_length: frame_length,\r\n                parent,\r\n                repetition: current_repetition,\r\n            };\r\n            this.shape.index(buffer, current);\r\n        }\r\n    }\r\n}\r\nexport default Shape;\r\n//# sourceMappingURL=Shape.js.map","let __id = 0;\r\nclass SceneChild {\r\n    constructor(settings) {\r\n        var _a;\r\n        this.id = (_a = settings.id) !== null && _a !== void 0 ? _a : ++__id;\r\n        this.type = settings.type || 'SceneChild';\r\n        this.name = settings.name || this.type + '_' + this.id;\r\n        this.data = settings.data || {};\r\n        this.props = {};\r\n    }\r\n    find(id_or_name) {\r\n        if (this.id === id_or_name || this.name === id_or_name)\r\n            return this;\r\n        return null;\r\n    }\r\n    getProps() {\r\n        return this.props;\r\n    }\r\n    getProp(key, prop_arguments, default_value) {\r\n        var _a;\r\n        return (_a = this.props[key]) !== null && _a !== void 0 ? _a : default_value;\r\n    }\r\n    setPropUnsafe(key, value) {\r\n        if (typeof key == 'string')\r\n            this.props[key] = value;\r\n        else\r\n            Object.keys(key).forEach((k) => (this.props[k] = key[k]));\r\n    }\r\n}\r\nexport default SceneChild;\r\n//# sourceMappingURL=SceneChild.js.map","import { now, aOr, isDef } from \"./Utilites\";\r\nimport SceneChild from \"./SceneChild\";\r\nimport Group from \"./Group\";\r\nimport Shape from \"./shapes/Shape\";\r\nimport Vec2, { TArray } from \"./math/Vec2\";\r\nclass Scene {\r\n    constructor(settings = {}) {\r\n        this.start_time = 0;\r\n        this.last_update_time = 0;\r\n        this.current_time = 0;\r\n        this.delta_time = 0;\r\n        this.fps = 0;\r\n        this.width = aOr(settings.width, 400);\r\n        this.height = aOr(settings.height, 400);\r\n        this.background = aOr(settings.background, '#fff');\r\n        this.mainColor = aOr(settings.mainColor, '#000');\r\n        this.children = [];\r\n        this.center = Vec2.create(this.width / 2, this.height / 2);\r\n    }\r\n    resize(width, height = width) {\r\n        this.width = width;\r\n        this.height = height;\r\n        this.center = Vec2.create(this.width / 2, this.height / 2);\r\n        this.children.forEach(sceneChild => sceneChild.clearBuffer());\r\n    }\r\n    update(at_time) {\r\n        if (at_time == undefined) {\r\n            if (!this.start_time) {\r\n                this.start_time = now();\r\n            }\r\n            const current_time = now();\r\n            this.current_time = current_time - this.start_time;\r\n        }\r\n        else {\r\n            this.current_time = at_time;\r\n        }\r\n        this.children.forEach((child) => child.generate(this.current_time, true));\r\n    }\r\n    clearAllBuffers() {\r\n        Scene.walk((child) => child.clearBuffer(true, false), this);\r\n    }\r\n    draw(callback) {\r\n        this.children.forEach(sceneChild => sceneChild.stream(callback));\r\n    }\r\n    getChildren() {\r\n        return this.children;\r\n    }\r\n    add(item, order) {\r\n        item.order =\r\n            typeof order !== 'undefined'\r\n                ? order\r\n                : typeof item.order !== 'undefined'\r\n                    ? item.order\r\n                    : this.children.length > 0\r\n                        ? Math.max.apply(this, this.children.map(e => { var _a; return (_a = e.order) !== null && _a !== void 0 ? _a : 0; })) + 1\r\n                        : 0;\r\n        Scene.propagateToChilden(item, this);\r\n        this.children.push(item);\r\n        item.clearBuffer();\r\n        this.sortChildren();\r\n    }\r\n    sortChildren() {\r\n        this.children.sort((a, b) => a.order - b.order);\r\n        this.children = this.children.map((child, index) => {\r\n            child.order = index;\r\n            return child;\r\n        });\r\n    }\r\n    isFirstLevelChild(sceneChild) {\r\n        for (let i = 0, len = this.children.length; i < len; i++)\r\n            if (this.children[i].id == sceneChild.id)\r\n                return true;\r\n        const parents = this.getParentsOfSceneChild(sceneChild);\r\n        return parents.length == 1 && parents[0] instanceof Group;\r\n    }\r\n    find(id_or_name) {\r\n        const children = this.getChildren();\r\n        for (let i = 0, len = children.length; i < len; i++) {\r\n            const result = children[i].find(id_or_name);\r\n            if (result !== null)\r\n                return result;\r\n        }\r\n        return null;\r\n    }\r\n    get(index) {\r\n        return index >= 0 && index < this.children.length ? this.children[index] : null;\r\n    }\r\n    remove(index) {\r\n        index >= 0 && index < this.children.length && this.children.splice(index, 1);\r\n    }\r\n    clearChildren() {\r\n        this.children = [];\r\n    }\r\n    removeFromId(id) {\r\n        for (let i = 0, len = this.children.length; i < len; i++)\r\n            if (this.children[i].id == id) {\r\n                this.children.splice(i, 1);\r\n                return;\r\n            }\r\n    }\r\n    getParentsOfSceneChild(sceneChild) {\r\n        const result = Scene.getParentsOfSceneChild(this, sceneChild);\r\n        if (result) {\r\n            result.splice(0, 1);\r\n            return result;\r\n        }\r\n        return [];\r\n    }\r\n    static getParentsOfSceneChild(current, sceneChild, parents = []) {\r\n        let result;\r\n        if (current instanceof SceneChild) {\r\n            if (current.id == sceneChild.id)\r\n                return parents;\r\n            if (current instanceof Shape && current.shape) {\r\n                const tmp_parents = parents.slice();\r\n                tmp_parents.push(current);\r\n                if ((result = Scene.getParentsOfSceneChild(current.shape, sceneChild, tmp_parents)))\r\n                    return result;\r\n            }\r\n        }\r\n        if (current instanceof Scene || current instanceof Group) {\r\n            const children = current.getChildren();\r\n            parents.push(current);\r\n            for (let i = 0, len = children.length; i < len; i++) {\r\n                const child = children[i];\r\n                if ((result = Scene.getParentsOfSceneChild(child, sceneChild, parents)))\r\n                    return result;\r\n            }\r\n            parents.pop();\r\n        }\r\n        return null;\r\n    }\r\n    static walk(callback, current) {\r\n        if (current instanceof SceneChild) {\r\n            if (callback(current) === false)\r\n                return false;\r\n            if (current instanceof Shape && current.shape)\r\n                if (Scene.walk(callback, current.shape) === false)\r\n                    return false;\r\n        }\r\n        if (current instanceof Scene || current instanceof Group) {\r\n            const children = current.getChildren();\r\n            for (let i = 0, len = children.length; i < len; i++) {\r\n                const child = children[i];\r\n                if (Scene.walk(callback, child) === false)\r\n                    return false;\r\n            }\r\n        }\r\n    }\r\n    static propagateToChilden(child, scene) {\r\n        child.scene = scene;\r\n        if (child instanceof Group) {\r\n            child.children.forEach((item) => {\r\n                Scene.propagateToChilden(item, scene);\r\n            });\r\n        }\r\n        else if (child instanceof Shape && child.shape) {\r\n            child.shape.scene = scene;\r\n            Scene.propagateToChilden(child.shape, scene);\r\n        }\r\n    }\r\n}\r\nexport default Scene;\r\n//# sourceMappingURL=Scene.js.map","import SimplexNoise from 'simplex-noise';\r\nimport Vec2, { TArray } from \"./math/Vec2\";\r\nimport { Repetition, RepetitionType } from \"./types/ShapeBase\";\r\nconst noises = {\r\n    random: new SimplexNoise(Math.random),\r\n};\r\nfunction noise(seed = 'random', x = 0, y = 0, z = 0) {\r\n    if (!noises[seed]) {\r\n        noises[seed] = new SimplexNoise(seed);\r\n    }\r\n    return noises[seed].noise3D(x, y, z);\r\n}\r\nfunction angle(repetition, offsetFromCenter = [0, 0]) {\r\n    var _a;\r\n    if (repetition.type == RepetitionType.Matrix) {\r\n        const matrixOffset = Vec2.create(offsetFromCenter);\r\n        const center_matrix = Vec2.create((repetition.count_col - 1) / 2, (repetition.count_row - 1) / 2);\r\n        center_matrix[0] += center_matrix[0] * matrixOffset[0];\r\n        center_matrix[1] += center_matrix[1] * matrixOffset[1];\r\n        const x = repetition.current_col - 1 - center_matrix[0];\r\n        const y = repetition.current_row - 1 - center_matrix[1];\r\n        return x === 0 ? 0 : Math.atan(y / x);\r\n    }\r\n    return (_a = repetition.current_angle) !== null && _a !== void 0 ? _a : 0;\r\n}\r\nfunction angle2(repetition, offsetFromCenter = [0, 0]) {\r\n    var _a;\r\n    if (repetition.type == RepetitionType.Matrix) {\r\n        const matrixOffset = Vec2.create(offsetFromCenter);\r\n        const center_matrix = Vec2.create((repetition.count_col - 1) / 2, (repetition.count_row - 1) / 2);\r\n        center_matrix[0] += center_matrix[0] * matrixOffset[0];\r\n        center_matrix[1] += center_matrix[1] * matrixOffset[1];\r\n        const x = repetition.current_col - 1 - center_matrix[0];\r\n        const y = repetition.current_row - 1 - center_matrix[1];\r\n        return x === 0 ? 0 : Math.atan2(y, x);\r\n    }\r\n    return (_a = repetition.current_angle) !== null && _a !== void 0 ? _a : 0;\r\n}\r\nfunction distance(repetition, offsetFromCenter = [0, 0]) {\r\n    if (repetition.type == RepetitionType.Matrix) {\r\n        const matrixOffset = Vec2.create(offsetFromCenter);\r\n        const center_matrix = Vec2.create((repetition.count_col - 1) / 2, (repetition.count_row - 1) / 2);\r\n        center_matrix[0] += center_matrix[0] * matrixOffset[0];\r\n        center_matrix[1] += center_matrix[1] * matrixOffset[1];\r\n        const current = Vec2.create(repetition.current_col - 1, repetition.current_row - 1);\r\n        return Vec2.distance(current, center_matrix);\r\n    }\r\n    return 1;\r\n}\r\nfunction percW(percentage, shape) {\r\n    return shape && shape.scene ? (shape.scene.width * percentage) / 100 : percentage;\r\n}\r\nfunction percH(percentage, shape) {\r\n    return shape && shape.scene ? (shape.scene.height * percentage) / 100 : percentage;\r\n}\r\nexport default {\r\n    noise,\r\n    angle,\r\n    angle2,\r\n    distance,\r\n    percW,\r\n    percH,\r\n};\r\n//# sourceMappingURL=Context.js.map","import { toDegrees, toRadians } from \"../../core/Utilites\";\r\nimport SceneChildPropsData, { ISceneChildPropData, TSceneChildPropsDataKeys, } from \"./SceneChildPropsData\";\r\nclass ScenePropUtilities {\r\n    static bValueLoop(value) {\r\n        return (typeof value === 'object' &&\r\n            'start' in value &&\r\n            'end' in value &&\r\n            'inc' in value &&\r\n            'vertex' in value &&\r\n            value.vertex.raw &&\r\n            value.vertex.raw.length > 0);\r\n    }\r\n    static bValueVertexCallback(value) {\r\n        return value && value.raw && value.raw.length > 0;\r\n    }\r\n    static composeVertexCallback(value) {\r\n        if (value && value.raw) {\r\n            const vertexCallback = new Function('vertex', ScenePropUtilities.RAW_ARGUMENTS, 'vertex_index', 'vertex_lenght', `return ${value.raw}`);\r\n            return vertexCallback;\r\n        }\r\n    }\r\n    static composeLoop(loop) {\r\n        const vertex = loop.vertex.raw\r\n            ? new Function('index', ScenePropUtilities.RAW_ARGUMENTS, `return ${loop.vertex.raw}`)\r\n            : undefined;\r\n        return {\r\n            start: loop.start,\r\n            end: loop.end,\r\n            inc: loop.inc,\r\n            vertex,\r\n        };\r\n    }\r\n    static bValueAnimation(value) {\r\n        return (value &&\r\n            typeof value === 'object' &&\r\n            value.type &&\r\n            (value.type === 'simple' || value.type === 'raw'));\r\n    }\r\n    static bValueDrawer(value) {\r\n        return value && typeof value === 'object' && value.type && value.type === 'drawer-transformation';\r\n    }\r\n    static bPropTransformable(name, value) {\r\n        const sceneChildProp = SceneChildPropsData[name];\r\n        return (sceneChildProp &&\r\n            sceneChildProp.transformation !== 'none' &&\r\n            typeof value !== 'undefined' &&\r\n            typeof value !== 'function' &&\r\n            !ScenePropUtilities.bValueAnimation(value));\r\n    }\r\n    static getValueDrawerTransformationType(name) {\r\n        const sceneChildProp = SceneChildPropsData[name];\r\n        return sceneChildProp && sceneChildProp.transformation !== 'none' ? sceneChildProp.transformation : null;\r\n    }\r\n    static getTransformedValue(drawer, name, value) {\r\n        const sceneChildProp = SceneChildPropsData[name];\r\n        if (ScenePropUtilities.bPropTransformable(name, value)) {\r\n            let transformedValueFunction;\r\n            switch (sceneChildProp.transformation) {\r\n                case 'angle':\r\n                    transformedValueFunction = toRadians;\r\n                    break;\r\n                case 'resolution-based':\r\n                    transformedValueFunction = drawer.getValueFromResolution.bind(drawer);\r\n                    break;\r\n                case 'resolution-scaled-based':\r\n                    transformedValueFunction = drawer.getValueFromResolutionScaled.bind(drawer);\r\n                    break;\r\n            }\r\n            return transformedValueFunction\r\n                ? Array.isArray(value)\r\n                    ? [transformedValueFunction(value[0]), transformedValueFunction(value[1])]\r\n                    : transformedValueFunction(value)\r\n                : value;\r\n        }\r\n        return value;\r\n    }\r\n    static getTransformedValueInverse(drawer, name, value) {\r\n        const sceneChildProp = SceneChildPropsData[name];\r\n        if (ScenePropUtilities.bPropTransformable(name, value)) {\r\n            let transformedValueFunction;\r\n            switch (sceneChildProp.transformation) {\r\n                case 'angle':\r\n                    transformedValueFunction = toDegrees;\r\n                    break;\r\n                case 'resolution-based':\r\n                    transformedValueFunction = drawer.getValueFromResolutionScaled.bind(drawer);\r\n                    break;\r\n                case 'resolution-scaled-based':\r\n                    transformedValueFunction = drawer.getValueFromResolution.bind(drawer);\r\n                    break;\r\n            }\r\n            if (transformedValueFunction)\r\n                return Array.isArray(value)\r\n                    ? [transformedValueFunction(value[0]), transformedValueFunction(value[1])]\r\n                    : transformedValueFunction(value);\r\n        }\r\n        return value;\r\n    }\r\n}\r\nScenePropUtilities.RAW_ARGUMENTS = '{ context, repetition, time, shape, shape_loop, data }';\r\nScenePropUtilities.RAW_ARGUMENTS_WIT_PARENT = '{ context, repetition, parent, time, shape, shape_loop, data }';\r\nexport default ScenePropUtilities;\r\n//# sourceMappingURL=ScenePropUtilities.js.map","import { aOr, clamp } from \"../../Utilites\";\r\nimport ShapeLoop from \"../ShapeLoop\";\r\nimport { ShapeLoopProps, ShapePrimitiveAdaptMode } from \"../../interfaces/shapes/Interfaces\";\r\nclass Spiral extends ShapeLoop {\r\n    constructor(settings = {}) {\r\n        var _a;\r\n        settings.type = 'Spiral';\r\n        settings.bCloseShape = false;\r\n        settings.bAdaptBuffer = (_a = settings.bAdaptBuffer) !== null && _a !== void 0 ? _a : ShapePrimitiveAdaptMode.None;\r\n        settings.shapeLoopPropsDependencies = (settings.shapeLoopPropsDependencies || []).concat([\r\n            'twists',\r\n            'twists_start',\r\n            'spiral',\r\n            'sideLength',\r\n        ]);\r\n        super(settings, true);\r\n        this.props.spiral = aOr(settings.spiral, Spiral.types.ARCHIMEDE);\r\n        this.props.twists = aOr(settings.twists, 2);\r\n        this.props.twists_start = aOr(settings.twists_start, 0);\r\n        this.loop = {\r\n            start: (prop_arguments) => ShapeLoop.PI2 * this.getProp('twists_start', prop_arguments),\r\n            end: (prop_arguments) => ShapeLoop.PI2 * (this.getProp('twists_start', prop_arguments) + this.getProp('twists', prop_arguments)),\r\n            inc: (prop_arguments) => {\r\n                const twists = this.getProp('twists', prop_arguments);\r\n                const rep = ShapeLoop.PI2 * twists;\r\n                const radius = 4 + Math.sqrt(this.sideLength[0] * this.sideLength[1]);\r\n                return rep / (radius * twists);\r\n            },\r\n            vertex: (angle, prop_arguments) => {\r\n                const r = Spiral.getRFromSpiralType(this.getProp('spiral', prop_arguments), angle);\r\n                return [r * Math.cos(angle), r * Math.sin(angle)];\r\n            },\r\n        };\r\n        this.bStaticLoop = this.isStaticLoop();\r\n        this.bStatic = this.isStatic();\r\n        this.bStaticIndexed = this.isStaticIndexed();\r\n    }\r\n    getProp(key, prop_arguments, defaul_value) {\r\n        return super.getProp(key, prop_arguments, defaul_value);\r\n    }\r\n    setProp(key, value) {\r\n        key = typeof key === 'string' ? { [key]: value } : key;\r\n        if (('twists' in key || 'twists_start' in key) && this.props.loop) {\r\n            this.props.loop.start = undefined;\r\n            this.props.loop.end = undefined;\r\n        }\r\n        super.setProp(key, value);\r\n    }\r\n    static getRFromSpiralType(spiral, angle) {\r\n        switch (spiral) {\r\n            case Spiral.types.ARCHIMEDE:\r\n                return angle / 10;\r\n            case Spiral.types.HYPERBOLIC:\r\n                return (1 / angle) * 3;\r\n            case Spiral.types.FERMAT:\r\n                return Math.pow(angle, 0.5) / 3;\r\n            case Spiral.types.LITUUS:\r\n                return Math.pow(angle, -0.5);\r\n            case Spiral.types.LOGARITHMIC:\r\n                return Math.pow(Math.E, (angle * 0.2)) / 10;\r\n        }\r\n        return 1;\r\n    }\r\n}\r\nSpiral.types = {\r\n    ARCHIMEDE: 'ARCHIMEDE',\r\n    HYPERBOLIC: 'HYPERBOLIC',\r\n    FERMAT: 'FERMAT',\r\n    LITUUS: 'LITUUS',\r\n    LOGARITHMIC: 'LOGARITHMIC',\r\n};\r\nexport default Spiral;\r\n//# sourceMappingURL=Spiral.js.map","import { ShapePrimitiveAdaptMode } from \"../../core/interfaces/shapes/Interfaces\";\r\nimport Spiral from \"../../core/shapes/primitives/Spiral\";\r\nconst OptionShapePrimitiveAdaptMode = [\r\n    { key: 'None', value: ShapePrimitiveAdaptMode.None },\r\n    { key: 'Scale', value: ShapePrimitiveAdaptMode.Scale },\r\n    { key: 'Center', value: ShapePrimitiveAdaptMode.Center },\r\n    { key: 'Fill', value: ShapePrimitiveAdaptMode.Fill },\r\n];\r\nconst OptionSpiralType = [\r\n    { key: 'ARCHIMEDE', value: Spiral.types.ARCHIMEDE },\r\n    { key: 'FERMAT', value: Spiral.types.FERMAT },\r\n    { key: 'HYPERBOLIC', value: Spiral.types.HYPERBOLIC },\r\n    { key: 'LITUUS', value: Spiral.types.LITUUS },\r\n    { key: 'LOGARITHMIC', value: Spiral.types.LOGARITHMIC },\r\n];\r\nconst SceneChildPropsData = {\r\n    repetitions: {\r\n        animable: true,\r\n        name: 'repetitions',\r\n        label: 'Repetitions',\r\n        type: 'range',\r\n        min: 1,\r\n        max: 100,\r\n        step: 1,\r\n        default: 1,\r\n        default_animate: 20,\r\n        canBArray: true,\r\n        transformation: 'none',\r\n        type_value: 'int',\r\n    },\r\n    distance: {\r\n        animable: true,\r\n        name: 'distance',\r\n        label: 'Distance',\r\n        type: 'range',\r\n        min: -200,\r\n        max: 200,\r\n        step: 1,\r\n        default: 0,\r\n        canBArray: true,\r\n        default_animate: 50,\r\n        transformation: 'resolution-based',\r\n    },\r\n    displace: {\r\n        animable: true,\r\n        name: 'displace',\r\n        label: 'Displace',\r\n        type: 'range',\r\n        min: -360,\r\n        max: 360,\r\n        step: 1,\r\n        default: 0,\r\n        default_animate: 360,\r\n        transformation: 'angle',\r\n    },\r\n    squeezeX: {\r\n        animable: true,\r\n        name: 'squeezeX',\r\n        label: 'SqueezeX',\r\n        type: 'range',\r\n        min: -0.2,\r\n        max: 0.2,\r\n        step: 0.001,\r\n        default: 0,\r\n        default_animate: 0.01,\r\n        transformation: 'resolution-scaled-based',\r\n    },\r\n    squeezeY: {\r\n        animable: true,\r\n        name: 'squeezeY',\r\n        label: 'SqueezeY',\r\n        type: 'range',\r\n        min: -0.2,\r\n        max: 0.2,\r\n        step: 0.001,\r\n        default: 0,\r\n        default_animate: 0.01,\r\n        transformation: 'resolution-scaled-based',\r\n    },\r\n    rotateX: {\r\n        animable: true,\r\n        name: 'rotateX',\r\n        label: 'RotateX',\r\n        type: 'range',\r\n        min: -360,\r\n        max: 360,\r\n        step: 1,\r\n        default: 0,\r\n        default_animate: 360,\r\n        transformation: 'angle',\r\n    },\r\n    rotateY: {\r\n        animable: true,\r\n        name: 'rotateY',\r\n        label: 'RotateY',\r\n        type: 'range',\r\n        min: -360,\r\n        max: 360,\r\n        step: 1,\r\n        default: 0,\r\n        default_animate: 360,\r\n        transformation: 'angle',\r\n    },\r\n    rotateZ: {\r\n        animable: true,\r\n        name: 'rotateZ',\r\n        label: 'RotateZ',\r\n        type: 'range',\r\n        min: -360,\r\n        max: 360,\r\n        step: 1,\r\n        default: 0,\r\n        default_animate: 360,\r\n        transformation: 'angle',\r\n    },\r\n    skewX: {\r\n        animable: true,\r\n        name: 'skewX',\r\n        label: 'SkewX',\r\n        type: 'range',\r\n        min: -90,\r\n        max: 90,\r\n        step: 1,\r\n        default: 0,\r\n        default_animate: 1,\r\n        transformation: 'angle',\r\n    },\r\n    skewY: {\r\n        animable: true,\r\n        name: 'skewY',\r\n        label: 'SkewY',\r\n        type: 'range',\r\n        min: -90,\r\n        max: 90,\r\n        step: 1,\r\n        default: 0,\r\n        default_animate: 1,\r\n        transformation: 'angle',\r\n    },\r\n    translate: {\r\n        animable: true,\r\n        name: 'translate',\r\n        label: 'Translate',\r\n        type: 'multiple-range',\r\n        min: -200,\r\n        max: 200,\r\n        step: 1,\r\n        default: [0, 0],\r\n        default_animate: 0,\r\n        transformation: 'resolution-based',\r\n    },\r\n    scale: {\r\n        animable: true,\r\n        name: 'scale',\r\n        label: 'Scale',\r\n        type: 'multiple-range',\r\n        min: -5,\r\n        max: 5,\r\n        step: 0.01,\r\n        default: [1, 1],\r\n        default_animate: 3,\r\n        transformation: 'none',\r\n    },\r\n    rotationOrigin: {\r\n        animable: true,\r\n        name: 'rotationOrigin',\r\n        label: 'Rotation Origin',\r\n        type: 'multiple-range',\r\n        min: -1,\r\n        max: 1,\r\n        step: 0.01,\r\n        default: [1, 1],\r\n        default_animate: [-1, 1],\r\n        transformation: 'none',\r\n    },\r\n    fillColor: {\r\n        animable: true,\r\n        name: 'fillColor',\r\n        label: 'Fill',\r\n        type: 'color',\r\n        default: '#000',\r\n        default_animate: '#fff',\r\n        transformation: 'none',\r\n    },\r\n    strokeColor: {\r\n        animable: true,\r\n        name: 'strokeColor',\r\n        label: 'Stroke',\r\n        type: 'color',\r\n        default: '#fff',\r\n        default_animate: '#000',\r\n        transformation: 'none',\r\n    },\r\n    lineWidth: {\r\n        animable: true,\r\n        name: 'lineWidth',\r\n        label: 'Stroke weight',\r\n        type: 'slider',\r\n        min: 0,\r\n        max: 30,\r\n        step: 0.1,\r\n        default: 1,\r\n        default_animate: 3,\r\n        transformation: 'none',\r\n    },\r\n    bCloseShape: { name: 'bCloseShape', label: 'Closed', type: 'checkbox', default: undefined, transformation: 'none' },\r\n    bUseParent: {\r\n        name: 'bbUseParent',\r\n        label: 'Use parent repetition',\r\n        type: 'checkbox',\r\n        default: false,\r\n        transformation: 'none',\r\n    },\r\n    bAdaptBuffer: {\r\n        name: 'bAdaptBuffer',\r\n        label: 'Adapt',\r\n        type: 'radio',\r\n        options: OptionShapePrimitiveAdaptMode,\r\n        default: undefined,\r\n        transformation: 'none',\r\n    },\r\n    sideLength: {\r\n        animable: true,\r\n        name: 'sideLength',\r\n        label: 'Side Length',\r\n        type: 'multiple-range',\r\n        min: 0.1,\r\n        max: 100,\r\n        step: 0.1,\r\n        default: [10, 10],\r\n        default_animate: 20,\r\n        transformation: 'resolution-based',\r\n    },\r\n    sideNumber: {\r\n        animable: true,\r\n        name: 'sideNumber',\r\n        label: 'Side Number',\r\n        type: 'range',\r\n        min: 1,\r\n        max: 20,\r\n        step: 1,\r\n        default: 5,\r\n        default_animate: 2,\r\n        transformation: 'none',\r\n    },\r\n    n: {\r\n        animable: true,\r\n        name: 'n',\r\n        label: 'n',\r\n        type: 'range',\r\n        min: 1,\r\n        max: 10,\r\n        step: 1,\r\n        default: 1,\r\n        default_animate: 3,\r\n        transformation: 'none',\r\n    },\r\n    d: {\r\n        animable: true,\r\n        name: 'd',\r\n        label: 'd',\r\n        type: 'range',\r\n        min: 1,\r\n        max: 10,\r\n        step: 1,\r\n        default: 2,\r\n        default_animate: 4,\r\n        transformation: 'none',\r\n    },\r\n    wx: {\r\n        animable: true,\r\n        name: 'wx',\r\n        label: 'wx',\r\n        type: 'range',\r\n        min: 1,\r\n        max: 10,\r\n        step: 1,\r\n        default: 1,\r\n        default_animate: 3,\r\n        transformation: 'none',\r\n    },\r\n    wy: {\r\n        animable: true,\r\n        name: 'wy',\r\n        label: 'wy',\r\n        type: 'range',\r\n        min: 1,\r\n        max: 10,\r\n        step: 1,\r\n        default: 2,\r\n        default_animate: 4,\r\n        transformation: 'none',\r\n    },\r\n    wz: {\r\n        animable: true,\r\n        name: 'wz',\r\n        label: 'wz',\r\n        type: 'range',\r\n        min: -360,\r\n        max: 360,\r\n        step: 1,\r\n        default: 0,\r\n        default_animate: 360,\r\n        transformation: 'angle',\r\n    },\r\n    twists: {\r\n        animable: true,\r\n        name: 'twists',\r\n        label: 'Twists',\r\n        type: 'range',\r\n        min: 1,\r\n        max: 60,\r\n        step: 0.1,\r\n        default: 1,\r\n        default_animate: 3,\r\n        transformation: 'none',\r\n    },\r\n    twists_start: {\r\n        animable: true,\r\n        name: 'twists_start',\r\n        label: 'Twists start',\r\n        type: 'range',\r\n        min: 1,\r\n        max: 60,\r\n        step: 0.1,\r\n        default: 0,\r\n        default_animate: 1,\r\n        transformation: 'none',\r\n    },\r\n    spiral: {\r\n        name: 'spiral',\r\n        label: 'Spiral type',\r\n        type: 'select',\r\n        options: OptionSpiralType,\r\n        default: Spiral.types.ARCHIMEDE,\r\n        transformation: 'none',\r\n    },\r\n    'loop.start': {\r\n        name: 'loop.start',\r\n        label: 'start',\r\n        type: 'range',\r\n        default: undefined,\r\n        min: 0,\r\n        max: 100,\r\n        step: 0.01,\r\n        transformation: 'none',\r\n    },\r\n    'loop.end': {\r\n        name: 'loop.end',\r\n        label: 'end',\r\n        type: 'range',\r\n        default: undefined,\r\n        min: 0,\r\n        max: 100,\r\n        step: 0.01,\r\n        transformation: 'none',\r\n    },\r\n    'loop.inc': {\r\n        name: 'loop.inc',\r\n        label: 'inc',\r\n        type: 'range',\r\n        default: undefined,\r\n        min: 0.01,\r\n        max: 100,\r\n        step: 0.01,\r\n        transformation: 'none',\r\n    },\r\n};\r\nexport default SceneChildPropsData;\r\n//# sourceMappingURL=SceneChildPropsData.js.map","import { v1 as uuidv1 } from 'uuid';\r\nimport SceneChild from \"../../core/SceneChild\";\r\nimport Line from \"../../core/shapes/primitives/Line\";\r\nimport Triangle from \"../../core/shapes/primitives/Triangle\";\r\nimport Rect from \"../../core/shapes/primitives/Rect\";\r\nimport RegularPolygon from \"../../core/shapes/primitives/RegularPolygon\";\r\nimport Circle from \"../../core/shapes/primitives/Circle\";\r\nimport Rose from \"../../core/shapes/primitives/Rose\";\r\nimport Spiral from \"../../core/shapes/primitives/Spiral\";\r\nimport Lissajous from \"../../core/shapes/primitives/Lissajous\";\r\nimport Shape from \"../../core/shapes/Shape\";\r\nimport ShapePrimitive from \"../../core/shapes/ShapePrimitive\";\r\nimport ShapeLoop from \"../../core/shapes/ShapeLoop\";\r\nimport ShapeBuffer from \"../../core/shapes/ShapeBuffer\";\r\nimport Scene from \"../../core/Scene\";\r\nimport Group from \"../../core/Group\";\r\nimport ShapeBase from \"../../core/shapes/ShapeBase\";\r\nimport SceneChildPropsData, { TSceneChildPropsDataKeys } from \"./SceneChildPropsData\";\r\nimport ScenePropUtilities from \"./ScenePropUtilities\";\r\nimport Animation from \"../animation/Animation\";\r\nclass SceneUtilities {\r\n    constructor() {\r\n        this.registeredSceneChilds = {};\r\n        this.registeredSceneChilds = {};\r\n        this.registeredSceneChilds = {\r\n            Line,\r\n            Triangle,\r\n            Rect,\r\n            RegularPolygon,\r\n            Circle,\r\n            Rose,\r\n            Spiral,\r\n            Lissajous,\r\n            Group,\r\n            Shape,\r\n            ShapeLoop,\r\n            ShapeBuffer,\r\n        };\r\n    }\r\n    getRegistered() {\r\n        return Object.keys(this.registeredSceneChilds);\r\n    }\r\n    register(type, ref) {\r\n        if (!(type in this.registeredSceneChilds)) {\r\n            this.registeredSceneChilds[type] = ref;\r\n        }\r\n        else {\r\n            console.warn(`SceneUtilities: SceneChild \"${type}\" is already registered`);\r\n        }\r\n    }\r\n    unregister(type) {\r\n        if (type in this.registeredSceneChilds) {\r\n            delete this.registeredSceneChilds[type];\r\n        }\r\n        else {\r\n            console.warn(`SceneUtilities: SceneChild \"${type}\" is not registered`);\r\n        }\r\n    }\r\n    create(item, props, scene, drawer) {\r\n        var _a;\r\n        scene = scene ? scene : typeof item !== 'string' ? item.scene : undefined;\r\n        if (item instanceof SceneChild) {\r\n            this.getChildren(item).forEach(child => this.create(child, undefined, scene, drawer));\r\n            return item;\r\n        }\r\n        if (item in this.registeredSceneChilds) {\r\n            if (!props)\r\n                props = {};\r\n            props.id = props.id || uuidv1();\r\n            if (!props.name && scene)\r\n                props.name = item + '_' + (this.getCountSceneChildOfType(scene, item) + 1);\r\n            if (!props.data)\r\n                props.data = {};\r\n            if (!('props' in props.data))\r\n                props.data.props = {};\r\n            if (!('visible' in props.data))\r\n                props.data.visible = true;\r\n            if (!('highlighted' in props.data))\r\n                props.data.highlighted = false;\r\n            if (!('disableGhost' in props.data))\r\n                props.data.disableGhost = false;\r\n            if (item === 'ShapeLoop') {\r\n                if (!('loop' in props))\r\n                    props.loop = { start: 0, end: Math.PI * 2, inc: (Math.PI * 2) / 20 };\r\n            }\r\n            const sceneChild = new this.registeredSceneChilds[item](props);\r\n            if (sceneChild && drawer && this.isAPrimitive(sceneChild)) {\r\n                const sideLength = (_a = SceneChildPropsData.sideLength) === null || _a === void 0 ? void 0 : _a.default;\r\n                sceneChild.setProp('sideLength', ScenePropUtilities.getTransformedValue(drawer, 'sideLength', sideLength));\r\n                sceneChild.data.props.sideLength = sideLength;\r\n            }\r\n            this.getChildren(sceneChild).forEach(child => this.create(child));\r\n            return sceneChild;\r\n        }\r\n        console.warn(`SceneUtilities: Creation failed. SceneChild \"${item}\" is not registered`);\r\n        return null;\r\n    }\r\n    getCountSceneChildOfType(scene, type) {\r\n        let count = 0;\r\n        Scene.walk(sceneChild => {\r\n            count += sceneChild.type == type ? 1 : 0;\r\n        }, scene);\r\n        return count;\r\n    }\r\n    copy(sceneChild, scene, drawer, strict = false) {\r\n        const props = sceneChild.getProps();\r\n        if (sceneChild instanceof ShapeBase) {\r\n            props.bUseParent = sceneChild.bUseParent;\r\n        }\r\n        if (sceneChild instanceof ShapeBuffer) {\r\n            props.shape = sceneChild.shape;\r\n        }\r\n        if (sceneChild instanceof ShapePrimitive) {\r\n            props.bCloseShape = sceneChild.bCloseShape;\r\n            props.bAdaptBuffer = sceneChild.bAdaptBuffer;\r\n            props.vertexCallback = sceneChild.vertexCallback;\r\n        }\r\n        if (sceneChild instanceof ShapeLoop) {\r\n            props.shapeLoopPropsDependencies = sceneChild.shapeLoopPropsDependencies;\r\n        }\r\n        if (sceneChild instanceof ShapeLoop) {\r\n            props.shapeLoopPropsDependencies = sceneChild.shapeLoopPropsDependencies;\r\n        }\r\n        if (strict) {\r\n            props.id = sceneChild.id;\r\n            props.name = sceneChild.name;\r\n            props.order = sceneChild.order;\r\n            props.data = JSON.parse(JSON.stringify(sceneChild.data || {}));\r\n        }\r\n        const copied = this.create(sceneChild.type, props, scene, drawer);\r\n        if (copied) {\r\n            if (sceneChild instanceof Group) {\r\n                sceneChild.getChildren().forEach((child) => {\r\n                    const copiedChild = this.copy(child, scene, drawer);\r\n                    copiedChild && copied.add(copiedChild);\r\n                });\r\n            }\r\n            else if (sceneChild instanceof Shape && sceneChild.shape) {\r\n                const copiedShape = sceneChild.shape instanceof Float32Array ? sceneChild.shape : this.copy(sceneChild.shape, scene, drawer);\r\n                copiedShape && (copied.shape = copiedShape);\r\n            }\r\n            else if (sceneChild instanceof ShapeBuffer && sceneChild.shape) {\r\n                ;\r\n                copied.setShape(new Float32Array(sceneChild.shape));\r\n            }\r\n            return copied;\r\n        }\r\n        console.warn(`SceneUtilities: Copy failed.`, sceneChild);\r\n        return null;\r\n    }\r\n    add(parent, sceneChild, props, scene) {\r\n        let newSceneChild = null;\r\n        if (parent instanceof Group || parent instanceof Scene) {\r\n            newSceneChild = this.create(sceneChild, props, scene);\r\n            newSceneChild && parent.add(newSceneChild);\r\n        }\r\n        else if (parent instanceof Shape) {\r\n            if (parent.shape == undefined) {\r\n                newSceneChild = this.create(sceneChild, props, scene);\r\n                newSceneChild && parent.setShape(newSceneChild);\r\n            }\r\n            else if (parent.shape instanceof ShapeBase) {\r\n                newSceneChild = this.create(sceneChild, props, scene);\r\n                if (newSceneChild) {\r\n                    const newGroup = this.create('Group', undefined, scene);\r\n                    const sibling = parent.shape;\r\n                    this.remove(parent, sibling);\r\n                    parent.setShape(newGroup);\r\n                    newGroup.add(sibling);\r\n                    newGroup.add(newSceneChild);\r\n                }\r\n            }\r\n            else if (parent.shape instanceof Group) {\r\n                this.add(parent.shape, sceneChild, undefined, scene);\r\n            }\r\n        }\r\n        return newSceneChild;\r\n    }\r\n    remove(from, item) {\r\n        if (!item) {\r\n            if (from.scene) {\r\n                const parent = this.getParent(from);\r\n                !parent ? from.scene.removeFromId(from.id) : this.remove(parent, from);\r\n            }\r\n            else {\r\n                console.warn(`SceneUtilities: Remove failed. SceneChild is not added into scene`, from);\r\n            }\r\n        }\r\n        else {\r\n            if (from instanceof Group)\r\n                from.removeFromId(item.id);\r\n            else if (from instanceof Shape)\r\n                from.setShape(undefined);\r\n        }\r\n    }\r\n    getRootParent(sceneChild) {\r\n        const parents = this.getParents(sceneChild);\r\n        return parents.length > 0 ? parents[0] : null;\r\n    }\r\n    getParent(sceneChild) {\r\n        const parents = this.getParents(sceneChild);\r\n        return parents.length > 0 ? parents[parents.length - 1] : null;\r\n    }\r\n    getParents(sceneChild) {\r\n        return sceneChild && sceneChild.scene ? sceneChild.scene.getParentsOfSceneChild(sceneChild) : [];\r\n    }\r\n    getChildren(sceneChild) {\r\n        if (sceneChild instanceof Group)\r\n            return sceneChild.getChildren();\r\n        return sceneChild instanceof Shape && sceneChild.shape ? [sceneChild.shape] : [];\r\n    }\r\n    getChildrenPrimitives(sceneChild) {\r\n        let result = [];\r\n        const children = this.getChildren(sceneChild);\r\n        for (let i = 0, len = children.length; i < len; i++) {\r\n            if (children[i] instanceof ShapePrimitive)\r\n                result.push(children[i]);\r\n            else\r\n                result = result.concat(...this.getChildrenPrimitives(children[i]));\r\n        }\r\n        return result;\r\n    }\r\n    getNeighbors(sceneChild) {\r\n        if (sceneChild.scene) {\r\n            const parent = this.getParent(sceneChild);\r\n            return parent == null ? sceneChild.scene.getChildren() : this.getChildren(parent);\r\n        }\r\n        return [];\r\n    }\r\n    getCountOfSceneChildType(scene, type) {\r\n        let count = 0;\r\n        Scene.walk(sceneChild => {\r\n            count += sceneChild.type == type ? 1 : 0;\r\n        }, scene);\r\n        return count;\r\n    }\r\n    walk(sceneChild, callback) {\r\n        callback(sceneChild);\r\n        this.getChildren(sceneChild).forEach(child => callback(child));\r\n    }\r\n    isGroup(sceneChild) {\r\n        return sceneChild instanceof Group;\r\n    }\r\n    hasShapeChild(sceneChild) {\r\n        return sceneChild instanceof Shape ? sceneChild.shape !== undefined : false;\r\n    }\r\n    hasShapeBuffer(sceneChild) {\r\n        return sceneChild instanceof ShapeBuffer;\r\n    }\r\n    isAPrimitive(sceneChild) {\r\n        return sceneChild instanceof ShapePrimitive;\r\n    }\r\n    hasLoop(sceneChild) {\r\n        return sceneChild instanceof ShapeLoop;\r\n    }\r\n    setProp(sceneChild, name, value, drawer) {\r\n        if (ScenePropUtilities.bValueAnimation(value)) {\r\n            sceneChild.data.props[name] = value;\r\n            sceneChild.setProp(name, Animation.composeAnimation(drawer, name, value));\r\n            return;\r\n        }\r\n        if (name === 'loop') {\r\n            if (ScenePropUtilities.bValueLoop(value)) {\r\n                sceneChild.data.props[name] = value;\r\n                sceneChild.setProp(name, ScenePropUtilities.composeLoop(value));\r\n                const dynamic = value.dynamyc;\r\n                const realDynamic = sceneChild.shapeLoopPropsDependencies.indexOf('prop_argumens') >= 0;\r\n                if (dynamic !== realDynamic) {\r\n                    const dependencies = [...sceneChild.shapeLoopPropsDependencies];\r\n                    if (dynamic)\r\n                        !(dependencies.indexOf('prop_argumens') >= 0) && dependencies.push('prop_arguments');\r\n                    else\r\n                        dependencies.indexOf('prop_argumens') >= 0 && dependencies.splice(dependencies.indexOf('prop_arguments', 1));\r\n                    sceneChild.shapeLoopPropsDependencies = dependencies;\r\n                }\r\n                sceneChild.clearBuffer(true, true);\r\n            }\r\n            return;\r\n        }\r\n        if (name === 'vertexCallback') {\r\n            if (sceneChild instanceof ShapePrimitive && ScenePropUtilities.bValueVertexCallback(value)) {\r\n                sceneChild.data.props[name] = value;\r\n                sceneChild.vertexCallback = ScenePropUtilities.composeVertexCallback(value);\r\n                sceneChild.bUseParent = true;\r\n                sceneChild.clearBuffer(true, true);\r\n            }\r\n            return;\r\n        }\r\n        if (ScenePropUtilities.bPropTransformable(name, value)) {\r\n            if (ScenePropUtilities.bValueDrawer(value)) {\r\n                sceneChild.data.props[name] = value;\r\n                sceneChild.setProp(name, ScenePropUtilities.getTransformedValue(drawer, name, value.value));\r\n            }\r\n            else {\r\n                sceneChild.setProp(name, value);\r\n            }\r\n            return;\r\n        }\r\n        if (name in SceneChildPropsData && SceneChildPropsData[name].transformation !== 'none')\r\n            sceneChild.data.props[name] = value;\r\n        switch (name) {\r\n            case 'bUseParent':\r\n                if (sceneChild instanceof ShapeBase)\r\n                    sceneChild.bUseParent = value;\r\n                break;\r\n            case 'bCloseShape':\r\n                ;\r\n                sceneChild.setClosed(value);\r\n                break;\r\n            case 'bAdaptBuffer':\r\n                ;\r\n                sceneChild.setAdapted(value);\r\n                break;\r\n            default:\r\n                if (name.indexOf('.') > 0) {\r\n                    const splitted = name.split('.');\r\n                    sceneChild.setProp({ [splitted[0]]: { [splitted[1]]: value } });\r\n                }\r\n                else\r\n                    sceneChild.setProp(name, value);\r\n                break;\r\n        }\r\n    }\r\n}\r\nexport default new SceneUtilities();\r\n//# sourceMappingURL=SceneUtilities.js.map","class Emitter {\r\n    constructor() {\r\n        this.callbacks = {};\r\n    }\r\n    attach(e, callback) {\r\n        if (!(e in this.callbacks)) {\r\n            this.callbacks[e] = [];\r\n        }\r\n        this.callbacks[e].push(callback);\r\n    }\r\n    detach(e, callback) {\r\n        if (e in this.callbacks) {\r\n            const index = this.callbacks[e].indexOf(callback);\r\n            if (index >= 0) {\r\n                this.callbacks[e].splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n    dispatch(e, params) {\r\n        if (e in this.callbacks) {\r\n            for (let i = 0, len = this.callbacks[e].length; i < len; i++)\r\n                if (this.callbacks[e][i](params) === false)\r\n                    break;\r\n        }\r\n    }\r\n}\r\nexport default Emitter;\r\n//# sourceMappingURL=Emitter.js.map","import { ShapeBufferSettings, ShapePrimitiveAdaptMode } from \"../../interfaces/shapes/Interfaces\";\r\nimport ShapeBuffer from \"../ShapeBuffer\";\r\nclass Line extends ShapeBuffer {\r\n    constructor(settings = {}) {\r\n        settings.type = 'Line';\r\n        settings.shape = Float32Array.from([-1, 0, 1, 0]);\r\n        settings.bAdaptBuffer = ShapePrimitiveAdaptMode.None;\r\n        settings.bCloseShape = false;\r\n        super(settings);\r\n    }\r\n}\r\nexport default Line;\r\n//# sourceMappingURL=Line.js.map","import { ShapeBufferSettings, ShapePrimitiveAdaptMode } from \"../../interfaces/shapes/Interfaces\";\r\nimport ShapeBuffer from \"../ShapeBuffer\";\r\nclass Triangle extends ShapeBuffer {\r\n    constructor(settings = {}) {\r\n        settings.type = 'Triangle';\r\n        settings.shape = Float32Array.from([-1, -1, 1, 0, -1, 1]);\r\n        settings.bAdaptBuffer = ShapePrimitiveAdaptMode.None;\r\n        super(settings);\r\n    }\r\n}\r\nexport default Triangle;\r\n//# sourceMappingURL=Triangle.js.map","import { ShapeBufferSettings, ShapePrimitiveAdaptMode } from \"../../interfaces/shapes/Interfaces\";\r\nimport ShapeBuffer from \"../ShapeBuffer\";\r\nclass Rect extends ShapeBuffer {\r\n    constructor(settings = {}) {\r\n        settings.type = 'Rect';\r\n        settings.shape = Float32Array.from([-1, -1, 1, -1, 1, 1, -1, 1]);\r\n        settings.bAdaptBuffer = ShapePrimitiveAdaptMode.None;\r\n        super(settings);\r\n    }\r\n}\r\nexport default Rect;\r\n//# sourceMappingURL=Rect.js.map","import ShapeLoop from \"../ShapeLoop\";\r\nimport { ShapeLoopProps, ShapePrimitiveAdaptMode } from \"../../interfaces/shapes/Interfaces\";\r\nclass RegularPolygon extends ShapeLoop {\r\n    constructor(settings = {}) {\r\n        var _a;\r\n        settings.type = settings.type || 'RegularPolygon';\r\n        settings.shapeLoopPropsDependencies = (settings.shapeLoopPropsDependencies || []).concat(['sideNumber']);\r\n        settings.bAdaptBuffer = (_a = settings.bAdaptBuffer) !== null && _a !== void 0 ? _a : ShapePrimitiveAdaptMode.None;\r\n        super(settings, true);\r\n        this.props.sideNumber = settings.sideNumber;\r\n        this.loop = {\r\n            start: 0,\r\n            end: ShapeLoop.PI2,\r\n            inc: (prop_arguments) => ShapeLoop.PI2 / this.getProp('sideNumber', prop_arguments, 5),\r\n            vertex: angle => {\r\n                return [Math.cos(angle), Math.sin(angle)];\r\n            },\r\n        };\r\n        this.bStaticLoop = this.isStaticLoop();\r\n        this.bStatic = this.isStatic();\r\n        this.bStaticIndexed = this.isStaticIndexed();\r\n    }\r\n    getProp(key, prop_arguments, default_value) {\r\n        return super.getProp(key, prop_arguments, default_value);\r\n    }\r\n    setProp(key, value) {\r\n        super.setProp(key, value);\r\n    }\r\n}\r\nexport default RegularPolygon;\r\n//# sourceMappingURL=RegularPolygon.js.map","import { ShapeLoopSettings, ShapePrimitiveAdaptMode } from \"../../interfaces/shapes/Interfaces\";\r\nimport ShapeLoop from \"../ShapeLoop\";\r\nclass Circle extends ShapeLoop {\r\n    constructor(settings = {}) {\r\n        var _a;\r\n        settings.type = 'Circle';\r\n        settings.shapeLoopPropsDependencies = (settings.shapeLoopPropsDependencies || []).concat(['sideLength']);\r\n        settings.bAdaptBuffer = (_a = settings.bAdaptBuffer) !== null && _a !== void 0 ? _a : ShapePrimitiveAdaptMode.Scale;\r\n        super(settings);\r\n        this.loop = {\r\n            start: 0,\r\n            end: ShapeLoop.PI2,\r\n            inc: () => (1 / Math.pow(this.sideLength[0] * this.sideLength[1], 0.25)) * ShapeLoop.PId2,\r\n            vertex: angle => [Math.cos(angle), Math.sin(angle)],\r\n        };\r\n    }\r\n}\r\nexport default Circle;\r\n//# sourceMappingURL=Circle.js.map","import { aOr } from \"../../Utilites\";\r\nimport ShapeLoop from \"../ShapeLoop\";\r\nimport { ShapeLoopProps, ShapePrimitiveAdaptMode } from \"../../interfaces/shapes/Interfaces\";\r\nclass Rose extends ShapeLoop {\r\n    constructor(settings = {}) {\r\n        var _a;\r\n        settings.type = 'Rose';\r\n        settings.shapeLoopPropsDependencies = (settings.shapeLoopPropsDependencies || []).concat(['n', 'd', 'sideLength']);\r\n        settings.bAdaptBuffer = (_a = settings.bAdaptBuffer) !== null && _a !== void 0 ? _a : ShapePrimitiveAdaptMode.Scale;\r\n        super(settings, true);\r\n        this.props.n = aOr(settings.n, 1);\r\n        this.props.d = aOr(settings.d, 2);\r\n        this.loop = {\r\n            start: 0,\r\n            end: (prop_arguments) => Rose.getFinalAngleFromK(this.getProp('n', prop_arguments), this.getProp('d', prop_arguments)),\r\n            inc: (prop_arguments) => {\r\n                const n = this.getProp('n', prop_arguments);\r\n                const d = this.getProp('d', prop_arguments);\r\n                const sides = Math.pow(this.sideLength[0] * this.sideLength[1], 0.45);\r\n                const k = d < n ? n / d : 1.5;\r\n                return ShapeLoop.PI2 / (sides * k);\r\n            },\r\n            vertex: (angle, prop_arguments) => {\r\n                const k = this.getProp('n', prop_arguments) / this.getProp('d', prop_arguments);\r\n                const f = Math.cos(k * angle);\r\n                return [f * Math.cos(angle), f * Math.sin(angle)];\r\n            },\r\n        };\r\n        this.bStaticLoop = this.isStaticLoop();\r\n        this.bStatic = this.isStatic();\r\n        this.bStaticIndexed = this.isStaticIndexed();\r\n    }\r\n    getProp(key, prop_arguments, default_value) {\r\n        return super.getProp(key, prop_arguments, default_value);\r\n    }\r\n    setProp(key, value) {\r\n        super.setProp(key, value);\r\n    }\r\n    static getFinalAngleFromK(n, d) {\r\n        if (n == d)\r\n            return ShapeLoop.PI2;\r\n        const k = n / d;\r\n        const p = n * d;\r\n        if (!Number.isInteger(k) && k % 0.5 == 0)\r\n            return 4 * Math.PI;\r\n        return Math.PI * d * (p % 2 == 0 ? 2 : 1);\r\n    }\r\n}\r\nexport default Rose;\r\n//# sourceMappingURL=Rose.js.map","import ShapeLoop from \"../ShapeLoop\";\r\nimport { ShapeLoopProps, ShapePrimitiveAdaptMode } from \"../../interfaces/shapes/Interfaces\";\r\nclass Lissajous extends ShapeLoop {\r\n    constructor(settings = {}) {\r\n        var _a;\r\n        settings.type = 'Lissajous';\r\n        settings.shapeLoopPropsDependencies = (settings.shapeLoopPropsDependencies || []).concat([\r\n            'wx',\r\n            'wy',\r\n            'wz',\r\n            'sideLength',\r\n        ]);\r\n        settings.bAdaptBuffer = (_a = settings.bAdaptBuffer) !== null && _a !== void 0 ? _a : ShapePrimitiveAdaptMode.Scale;\r\n        super(settings, true);\r\n        this.props.wx = settings.wx || 1;\r\n        this.props.wy = settings.wy || 2;\r\n        this.props.wz = settings.wz || 0;\r\n        this.loop = {\r\n            start: 0,\r\n            end: ShapeLoop.PI2,\r\n            inc: prop_arguments => {\r\n                const wx = this.getProp('wx', prop_arguments);\r\n                const wy = this.getProp('wy', prop_arguments);\r\n                const ratio = wx == wy ? ShapeLoop.PId2 : 0.5 - Math.min(49, wx + wy) * 0.01;\r\n                return (1 / Math.pow(this.sideLength[0] * this.sideLength[1], 0.25)) * ratio;\r\n            },\r\n            vertex: (angle, prop_arguments) => {\r\n                const wx = this.getProp('wx', prop_arguments);\r\n                const wy = this.getProp('wy', prop_arguments);\r\n                const wz = this.getProp('wz', prop_arguments, 0);\r\n                return wx == wy ? [Math.cos(angle + wz), Math.sin(angle)] : [Math.cos(wx * angle + wz), Math.sin(wy * angle)];\r\n            },\r\n        };\r\n        this.bStaticLoop = this.isStaticLoop();\r\n        this.bStatic = this.isStatic();\r\n        this.bStaticIndexed = this.isStaticIndexed();\r\n    }\r\n    getProp(key, prop_arguments, default_value) {\r\n        return super.getProp(key, prop_arguments, default_value);\r\n    }\r\n    setProp(key, value) {\r\n        super.setProp(key, value);\r\n    }\r\n}\r\nexport default Lissajous;\r\n//# sourceMappingURL=Lissajous.js.map","const Easings = {\r\n    linear: (time, start, end, durate) => (end * time) / durate + start,\r\n    quadraticIn: (time, start, end, duratte) => {\r\n        time /= duratte;\r\n        return end * time * time + start;\r\n    },\r\n    quadraticOut: (time, start, end, durate) => {\r\n        time /= durate;\r\n        return -end * time * (time - 2) + start;\r\n    },\r\n    quadraticInOut: (time, start, end, durate) => {\r\n        time /= durate / 2;\r\n        if (time < 1)\r\n            return (end / 2) * time * time + start;\r\n        time--;\r\n        return (-end / 2) * (time * (time - 2) - 1) + start;\r\n    },\r\n    cubicIn: (time, start, end, durate) => {\r\n        time /= durate;\r\n        return end * time * time * time + start;\r\n    },\r\n    cubicOut: (time, start, end, durate) => {\r\n        time /= durate;\r\n        time--;\r\n        return end * (time * time * time + 1) + start;\r\n    },\r\n    cubicInOut: (time, start, end, durate) => {\r\n        time /= durate / 2;\r\n        if (time < 1)\r\n            return (end / 2) * time * time * time + start;\r\n        time -= 2;\r\n        return (end / 2) * (time * time * time + 2) + start;\r\n    },\r\n    quarticIn: (time, start, end, durate) => {\r\n        time /= durate;\r\n        return end * time * time * time * time + start;\r\n    },\r\n    quarticOut: (time, start, end, durate) => {\r\n        time /= durate;\r\n        time--;\r\n        return -end * (time * time * time * time - 1) + start;\r\n    },\r\n    quarticInOut: (time, start, end, durate) => {\r\n        time /= durate / 2;\r\n        if (time < 1)\r\n            return (end / 2) * time * time * time * time + start;\r\n        time -= 2;\r\n        return (-end / 2) * (time * time * time * time - 2) + start;\r\n    },\r\n    quinticIn: (time, start, end, durate) => {\r\n        time /= durate;\r\n        return end * time * time * time * time * time + start;\r\n    },\r\n    quinticOut: (time, start, end, durate) => {\r\n        time /= durate;\r\n        time--;\r\n        return end * (time * time * time * time * time + 1) + start;\r\n    },\r\n    quinticInOut: (time, start, end, durate) => {\r\n        time /= durate / 2;\r\n        if (time < 1)\r\n            return (end / 2) * time * time * time * time * time + start;\r\n        time -= 2;\r\n        return (end / 2) * (time * time * time * time * time + 2) + start;\r\n    },\r\n    sinusoidalIn: (time, start, end, durate) => {\r\n        return -end * Math.cos((time / durate) * (Math.PI / 2)) + end + start;\r\n    },\r\n    sinusoidalOut: (time, start, end, durate) => {\r\n        return end * Math.sin((time / durate) * (Math.PI / 2)) + start;\r\n    },\r\n    sinusoidalInOut: (time, start, end, durate) => {\r\n        return (-end / 2) * (Math.cos((Math.PI * time) / durate) - 1) + start;\r\n    },\r\n    exponentialIn: (time, start, end, durate) => {\r\n        return end * Math.pow(2, 10 * (time / durate - 1)) + start;\r\n    },\r\n    exponentialOut: (time, start, end, durate) => {\r\n        return end * (-Math.pow(2, (-10 * time) / durate) + 1) + start;\r\n    },\r\n    exponentialInOut: (time, start, end, durate) => {\r\n        time /= durate / 2;\r\n        if (time < 1)\r\n            return (end / 2) * Math.pow(2, 10 * (time - 1)) + start;\r\n        time--;\r\n        return (end / 2) * (-Math.pow(2, -10 * time) + 2) + start;\r\n    },\r\n    circularIn: (time, start, end, durate) => {\r\n        time /= durate;\r\n        return -end * (Math.sqrt(1 - time * time) - 1) + start;\r\n    },\r\n    circularOut: (time, start, end, durate) => {\r\n        time /= durate;\r\n        time--;\r\n        return end * Math.sqrt(1 - time * time) + start;\r\n    },\r\n    circularInOut: (time, start, end, durate) => {\r\n        time /= durate / 2;\r\n        if (time < 1)\r\n            return (-end / 2) * (Math.sqrt(1 - time * time) - 1) + start;\r\n        time -= 2;\r\n        return (end / 2) * (Math.sqrt(1 - time * time) + 1) + start;\r\n    },\r\n    elasticIn: function (time, start, end, durate, a, p) {\r\n        if (time == 0) {\r\n            return start;\r\n        }\r\n        if ((time /= durate) == 1) {\r\n            return start + end;\r\n        }\r\n        if (!p) {\r\n            p = durate * 0.3;\r\n        }\r\n        if (!a || a < Math.abs(end)) {\r\n            a = end;\r\n            var s = p / 4;\r\n        }\r\n        else {\r\n            var s = (p / (2 * Math.PI)) * Math.asin(end / a);\r\n        }\r\n        return -(a * Math.pow(2, 10 * (time -= 1)) * Math.sin(((time * durate - s) * (2 * Math.PI)) / p)) + start;\r\n    },\r\n    elasticOut: function (time, start, end, durate, a, p) {\r\n        if (time == 0) {\r\n            return start;\r\n        }\r\n        if ((time /= durate) == 1) {\r\n            return start + end;\r\n        }\r\n        if (!p) {\r\n            p = durate * 0.3;\r\n        }\r\n        if (!a || a < Math.abs(end)) {\r\n            a = end;\r\n            var s = p / 4;\r\n        }\r\n        else {\r\n            var s = (p / (2 * Math.PI)) * Math.asin(end / a);\r\n        }\r\n        return a * Math.pow(2, -10 * time) * Math.sin(((time * durate - s) * (2 * Math.PI)) / p) + end + start;\r\n    },\r\n    elasticBoth: function (time, start, end, durate, a, p) {\r\n        if (time == 0) {\r\n            return start;\r\n        }\r\n        if ((time /= durate / 2) == 2) {\r\n            return start + end;\r\n        }\r\n        if (!p) {\r\n            p = durate * (0.3 * 1.5);\r\n        }\r\n        if (!a || a < Math.abs(end)) {\r\n            a = end;\r\n            var s = p / 4;\r\n        }\r\n        else {\r\n            var s = (p / (2 * Math.PI)) * Math.asin(end / a);\r\n        }\r\n        if (time < 1) {\r\n            return -0.5 * (a * Math.pow(2, 10 * (time -= 1)) * Math.sin(((time * durate - s) * (2 * Math.PI)) / p)) + start;\r\n        }\r\n        return a * Math.pow(2, -10 * (time -= 1)) * Math.sin(((time * durate - s) * (2 * Math.PI)) / p) * 0.5 + end + start;\r\n    },\r\n    backIn: function (time, start, end, durate, s) {\r\n        if (typeof s == 'undefined') {\r\n            s = 1.70158;\r\n        }\r\n        return end * (time /= durate) * time * ((s + 1) * time - s) + start;\r\n    },\r\n    backOut: function (time, start, end, durate, s) {\r\n        if (typeof s == 'undefined') {\r\n            s = 1.70158;\r\n        }\r\n        return end * ((time = time / durate - 1) * time * ((s + 1) * time + s) + 1) + start;\r\n    },\r\n    backBoth: function (time, start, end, durate, s) {\r\n        if (typeof s == 'undefined') {\r\n            s = 1.70158;\r\n        }\r\n        if ((time /= durate / 2) < 1) {\r\n            return (end / 2) * (time * time * (((s *= 1.525) + 1) * time - s)) + start;\r\n        }\r\n        return (end / 2) * ((time -= 2) * time * (((s *= 1.525) + 1) * time + s) + 2) + start;\r\n    },\r\n    bounceIn: function (time, start, end, durate) {\r\n        return end - Easings.bounceOut(durate - time, 0, end, durate) + start;\r\n    },\r\n    bounceOut: function (time, start, end, durate) {\r\n        if ((time /= durate) < 1 / 2.75) {\r\n            return end * (7.5625 * time * time) + start;\r\n        }\r\n        else if (time < 2 / 2.75) {\r\n            return end * (7.5625 * (time -= 1.5 / 2.75) * time + 0.75) + start;\r\n        }\r\n        else if (time < 2.5 / 2.75) {\r\n            return end * (7.5625 * (time -= 2.25 / 2.75) * time + 0.9375) + start;\r\n        }\r\n        return end * (7.5625 * (time -= 2.625 / 2.75) * time + 0.984375) + start;\r\n    },\r\n    bounceBoth: function (time, start, end, durate) {\r\n        if (time < durate / 2) {\r\n            return Easings.bounceIn(time * 2, 0, end, durate) * 0.5 + start;\r\n        }\r\n        return Easings.bounceOut(time * 2 - durate, 0, end, durate) * 0.5 + end * 0.5 + start;\r\n    },\r\n};\r\nexport default Easings;\r\n//# sourceMappingURL=Easings.js.map","import ColorManager from '@pups/core/build/Models/Color/ColorManager';\r\nimport Easings, { TEasing } from \"./Easings\";\r\nimport { toArray } from \"../../core/Utilites\";\r\nconst Simple = {\r\n    loop: (props) => Simple.compose(Object.assign(Object.assign({ mode: 'sinusoidal', mode_function: 'cos' }, props), { type: 'loop', delay: undefined })),\r\n    uncontrolledLoop: (props) => Simple.compose(Object.assign(Object.assign({ mode: 'easing', mode_function: 'linear' }, props), { type: 'uncontrolled-loop' })),\r\n    static: (props) => Simple.compose(Object.assign(Object.assign({ mode: 'easing', mode_function: 'linear' }, props), { type: 'static' })),\r\n    compose: (simpleAnimation) => {\r\n        if (typeof simpleAnimation.from !== 'string' && typeof simpleAnimation.to !== 'string') {\r\n            const bArray = Array.isArray(simpleAnimation.from) || Array.isArray(simpleAnimation.to);\r\n            const from = bArray ? toArray(simpleAnimation.from) : simpleAnimation.from;\r\n            const to = bArray ? toArray(simpleAnimation.to) : simpleAnimation.to;\r\n            const vCallback = bArray\r\n                ? (current_index, v) => {\r\n                    const a = (simpleAnimation.invertOdd && current_index % 2 == 1 ? to : from);\r\n                    const b = (simpleAnimation.invertOdd && current_index % 2 == 1 ? from : to);\r\n                    return simpleAnimation.type_value === 'int'\r\n                        ? [Math.round(a[0] + v * (b[0] - a[0])), Math.round(a[1] + v * (b[1] - a[1]))]\r\n                        : [a[0] + v * (b[0] - a[0]), a[1] + v * (b[1] - a[1])];\r\n                }\r\n                : (current_index, v) => {\r\n                    const a = (simpleAnimation.invertOdd && current_index % 2 == 1 ? to : from);\r\n                    const b = (simpleAnimation.invertOdd && current_index % 2 == 1 ? from : to);\r\n                    return simpleAnimation.type_value === 'int' ? Math.round(a + v * (b - a)) : a + v * (b - a);\r\n                };\r\n            return createSimpleAnimationCallback(simpleAnimation, (props, v) => vCallback(props.repetition.current_index, v));\r\n        }\r\n        else {\r\n            const from = new ColorManager(simpleAnimation.from);\r\n            const to = new ColorManager(simpleAnimation.to);\r\n            const vCallback = simpleAnimation.colorTransitionMode == 'hue' ? interpolateColorHSL : interpolateColorRGB;\r\n            return createSimpleAnimationCallback(simpleAnimation, (props, v) => {\r\n                const a = simpleAnimation.invertOdd && props.repetition.current_index % 2 == 1 ? to : from;\r\n                const b = simpleAnimation.invertOdd && props.repetition.current_index % 2 == 1 ? from : to;\r\n                return vCallback(a, b, v);\r\n            });\r\n        }\r\n    },\r\n};\r\nfunction createSimpleAnimationCallback(animation, value) {\r\n    let { durate, type, mode, mode_function, delay } = animation;\r\n    if (type === 'static') {\r\n        if (delay && delay > 0)\r\n            return function SimpleAnimation(props) {\r\n                return value(props, props.time <= delay\r\n                    ? 0\r\n                    : props.time - delay >= durate\r\n                        ? 1\r\n                        : Easings[mode_function](props.time - delay, 0, 1, durate));\r\n            };\r\n        else\r\n            return function SimpleAnimation(props) {\r\n                return value(props, props.time <= durate ? Easings[mode_function](props.time, 0, 1 - 0, durate) : 1);\r\n            };\r\n    }\r\n    else {\r\n        if (type === 'loop') {\r\n            if (mode == 'sinusoidal') {\r\n                return function SimpleAnimation(props) {\r\n                    const frequency = ((props.time || 0) * 2 * Math.PI) / durate;\r\n                    return value(props, 0.5 + Math[mode_function](frequency) * 0.5);\r\n                };\r\n            }\r\n            else {\r\n                return function SimpleAnimation(props) {\r\n                    const d2 = durate / 2;\r\n                    const t = props.time % durate;\r\n                    return value(props, t <= d2\r\n                        ? Easings[mode_function](t, 0, 1, d2)\r\n                        : Easings[mode_function](d2 - (t - d2), 0, 1, d2));\r\n                };\r\n            }\r\n        }\r\n        else {\r\n            if (mode == 'sinusoidal') {\r\n                return function SimpleAnimation(props) {\r\n                    let time = props.time % (durate + delay);\r\n                    time = time <= delay ? 0 : time - delay;\r\n                    const frequency = ((time || 0) * 2 * Math.PI) / durate;\r\n                    return value(props, 0.5 + Math[mode_function](frequency) * 0.5);\r\n                };\r\n            }\r\n            else {\r\n                if (delay && delay > 0)\r\n                    return function SimpleAnimation(props) {\r\n                        const time = props.time % (durate + delay);\r\n                        return value(props, time <= delay\r\n                            ? 0\r\n                            : time - delay >= durate\r\n                                ? 1\r\n                                : Easings[mode_function](time - delay, 0, 1, durate));\r\n                    };\r\n                else\r\n                    return function SimpleAnimation(props) {\r\n                        const time = props.time % durate;\r\n                        return value(props, time <= durate ? Easings[mode_function](time, 0, 1 - 0, durate) : 1);\r\n                    };\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction interpolateColorRGB(start, end, v) {\r\n    const aAlpha = start.getAlpha();\r\n    const bAlpha = end.getAlpha();\r\n    const s = start.getRgb();\r\n    const e = end.getRgb();\r\n    const r = s.r + v * (e.r - s.r);\r\n    const g = s.g + v * (e.g - s.g);\r\n    const b = s.b + v * (e.b - s.b);\r\n    const alpha = aAlpha + v * (bAlpha - aAlpha);\r\n    return `rgba(${Math.floor(r)},${Math.floor(g)},${Math.floor(b)},${alpha <= 0 ? 0 : alpha >= 1 ? 1 : alpha})`;\r\n}\r\nfunction interpolateColorHSL(start, end, v) {\r\n    const aAlpha = start.getAlpha();\r\n    const bAlpha = end.getAlpha();\r\n    const s = start.getHsl();\r\n    const e = end.getHsl();\r\n    const _h = s.h + v * (e.h - s.h);\r\n    const _s = s.s + v * (e.s - s.s);\r\n    const _l = s.l + v * (e.l - s.l);\r\n    const alpha = aAlpha + v * (bAlpha - aAlpha);\r\n    return `hsla(${Math.floor(_h * 360)},${Math.floor(_s * 100)}%,${Math.floor(_l * 100)}%,${alpha <= 0 ? 0 : alpha >= 1 ? 1 : alpha})`;\r\n}\r\nexport default Simple;\r\n//# sourceMappingURL=Simple.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nlet uid = 0;\r\n/**\r\n * Ritorna un numerio incrementale\r\n *\r\n * @param {number} [from=0]\r\n * @returns {number}\r\n */\r\nexports.newId = (from = 0) => ++uid + from;\r\n/**\r\n * Ritorna stringa di almeno due cifre\r\n *\r\n * @param {number} n\r\n * @returns {string}\r\n */\r\nexports.twoDigits = (n) => (n <= 9 ? '0' : '') + n;\r\n/**\r\n * Ritorna un valore compreso tra 0 ed 1\r\n *\r\n * @param {number} value\r\n * @returns {number}\r\n */\r\nexports.clamp01 = (value) => exports.clamp(0, 1, value);\r\n/**\r\n * Ritorna un valore compreso tra {min} ed {max}\r\n *\r\n * @param {number} min\r\n * @param {number} max\r\n * @param {number} value\r\n * @returns {number}\r\n */\r\nexports.clamp = (min, max, value) => value <= min ? min : (value >= max ? max : value);\r\n/**\r\n * Ritorna un valore compreso tra {min} e {max} in rifermiento a {refMin} e {refMax}\r\n *\r\n * @example\r\n * ```javascript\r\n * relativeClamp2(0.5, 0, 1, 100, 200) // 150\r\n * ```\r\n *\r\n * @param {number} value\r\n * @param {number} refMin\r\n * @param {number} refMax\r\n * @param {number} toMin\r\n * @param {number} toMax\r\n * @returns {number}\r\n */\r\nexports.relativeClamp = (value, refMin, refMax, toMin, toMax) => exports.clamp(toMin, toMax, (value - refMin) / (refMax - refMin) * (toMax - toMin) + toMin);\r\n/**\r\n * Ritorna un numero approssimato alla cifra {decimal}\r\n *\r\n * @param {*} value\r\n * @param {number} [decimal=20]\r\n * @returns {number}\r\n */\r\nexports.fix = (value, decimal = 20) => +parseFloat(value).toFixed(decimal);\r\n/**\r\n * Ritorna il prossimo numero di una lista\r\n *\r\n * @example\r\n * ```javascript\r\n * console.log(2, 3) // 0\r\n * ```\r\n *\r\n * @param {number} index\r\n * @param {number} length\r\n * @param {number} [offset=1]\r\n * @returns\r\n */\r\nexports.nextNumber = (index, length, offset = 1) => (index + offset) % length;\r\n/**\r\n * Ritorna il valore precedente di una lista\r\n * @example\r\n * ```javascript\r\n *\r\n * console.log(0, 3) // 2\r\n * ```\r\n *\r\n * @param {number} index\r\n * @param {number} length\r\n * @param {number} [offset=1]\r\n * @returns\r\n */\r\nexports.prevNumber = (index, length, offset = 1) => {\r\n    index -= offset;\r\n    return (index < 0 ? index + length : index) % length;\r\n};\r\n/**\r\n * Ritorna un numero random tra {min} e {max}\r\n *\r\n * @param {number} min\r\n * @param {number} max\r\n * @returns {number}\r\n */\r\nexports.randomFloat = (min, max) => Math.random() * (max - min) + min;\r\n/**\r\n * Ritorna un numero intero tra {min} e {max} (inclusi)\r\n *\r\n * @param {number} min\r\n * @param {number} max\r\n * @returns {number}\r\n */\r\nexports.randomInt = (min, max) => Math.trunc(Math.random() * (max - min + 1)) + min;\r\n/**\r\n * Funzione lerp\r\n *\r\n * @param {number} value1\r\n * @param {number} value2\r\n * @param {number} amount\r\n * @returns {number}\r\n */\r\nexports.lerp = (value1, value2, amount) => value1 + (value2 - value1) * exports.clamp01(amount);\r\n/**\r\n * Round\r\n *\r\n * @param {number} val\r\n * @returns {number}\r\n */\r\nexports.round = (val) => ~~(val + 0.5);\r\n//# sourceMappingURL=Number.js.map","import Emitter from \"../events/Emitter\";\r\nclass Timeline extends Emitter {\r\n    constructor() {\r\n        super();\r\n        this.sequence = {\r\n            start: 0,\r\n            end: 60000,\r\n            durate: 60000,\r\n            framerate: 60,\r\n            frames: ((6000 - 0) / 1000) * 60,\r\n        };\r\n        this.fps = this.sequence.framerate;\r\n        this.fps_samples_size = 30;\r\n        this.fps_samples = [];\r\n        this.fps_samples_index = 0;\r\n        this.b_sequence_started = false;\r\n        this.current_frame = -1;\r\n        this.last_tick = 0;\r\n        this.calculateTickAndSequence();\r\n    }\r\n    getSequence() {\r\n        return Object.assign({}, this.sequence);\r\n    }\r\n    setSequence(start, end, framerate) {\r\n        this.sequence.start = start;\r\n        this.sequence.end = end;\r\n        this.sequence.framerate = framerate;\r\n        this.calculateTickAndSequence();\r\n        this.dispatch('timeline:update_sequence', this.getSequence());\r\n    }\r\n    getFramerate() {\r\n        return this.sequence.framerate;\r\n    }\r\n    setFramerate(framerate) {\r\n        this.sequence.framerate = framerate;\r\n        this.calculateTickAndSequence();\r\n        this.dispatch('timeline:update_sequence', this.getSequence());\r\n    }\r\n    calculateTickAndSequence() {\r\n        this.tick_time = 1000 / this.sequence.framerate;\r\n        this.sequence.frames = Math.floor(((this.sequence.end - this.sequence.start) / 1000) * this.sequence.framerate);\r\n        this.sequence.durate = this.sequence.end - this.sequence.start;\r\n    }\r\n    getSequenceStartTime() {\r\n        return this.sequence.start;\r\n    }\r\n    setSequenceStartTime(start_time) {\r\n        this.sequence.start = start_time;\r\n        this.calculateTickAndSequence();\r\n        this.dispatch('timeline:update_sequence', this.getSequence());\r\n    }\r\n    getSequenceEndTime() {\r\n        return this.sequence.end;\r\n    }\r\n    setSequenceEndTime(end_time) {\r\n        this.sequence.end = end_time;\r\n        this.calculateTickAndSequence();\r\n        this.dispatch('timeline:update_sequence', this.getSequence());\r\n    }\r\n    getSequenceDuration() {\r\n        return this.sequence.end - this.sequence.start;\r\n    }\r\n    getFramesCount() {\r\n        return this.sequence.frames;\r\n    }\r\n    start() {\r\n        if (!this.b_sequence_started) {\r\n            this.b_sequence_started = true;\r\n            this.last_tick = 0;\r\n            this.dispatch('timeline:change_status', Timeline.START);\r\n        }\r\n    }\r\n    pause() {\r\n        if (this.b_sequence_started) {\r\n            this.b_sequence_started = false;\r\n            this.dispatch('timeline:change_status', Timeline.PAUSE);\r\n        }\r\n    }\r\n    stop() {\r\n        if (this.current_frame != 1 || this.b_sequence_started) {\r\n            this.b_sequence_started = false;\r\n            this.current_frame = -1;\r\n            this.last_tick = 0;\r\n            this.dispatch('timeline:progress', {\r\n                current_frame: this.current_frame,\r\n                current_time: 0,\r\n                fps: this.fps,\r\n            });\r\n            this.dispatch('timeline:change_status', Timeline.STOP);\r\n        }\r\n    }\r\n    tick(timestamp) {\r\n        if (this.b_sequence_started) {\r\n            const currentTime = timestamp;\r\n            const elapsed = currentTime - this.last_tick;\r\n            if (elapsed >= this.tick_time) {\r\n                const delta = (currentTime - this.last_tick) / 1000;\r\n                this.calculateFPS(1 / delta);\r\n                this.last_tick = currentTime - (elapsed % this.tick_time);\r\n                this.current_frame = (this.current_frame + 1) % this.sequence.frames;\r\n                this.dispatch('timeline:progress', {\r\n                    current_frame: this.current_frame,\r\n                    current_time: this.getTime(),\r\n                    fps: this.fps,\r\n                });\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    calculateFPS(currentFPS) {\r\n        const samples = this.fps_samples.length;\r\n        if (samples > 0) {\r\n            let average = 0;\r\n            for (let i = 0; i < samples; i++)\r\n                average += this.fps_samples[i];\r\n            this.fps = Math.round(average / samples);\r\n        }\r\n        this.fps_samples[this.fps_samples_index] = Math.round(currentFPS);\r\n        this.fps_samples_index = (this.fps_samples_index + 1) % this.fps_samples_size;\r\n    }\r\n    bSequenceStarted() {\r\n        return this.b_sequence_started;\r\n    }\r\n    getCurrentFrame() {\r\n        return this.current_frame;\r\n    }\r\n    getFrameTime(frame) {\r\n        frame = frame < 0 ? this.sequence.frames - (frame % this.sequence.frames) : frame % this.sequence.frames;\r\n        return (this.sequence.start + frame * this.tick_time) % this.sequence.end;\r\n    }\r\n    getFrameAtTime(time) {\r\n        return Math.round(((this.sequence.start + time) % this.sequence.end) / this.tick_time);\r\n    }\r\n    setFrame(frame) {\r\n        this.current_frame = frame - 1;\r\n    }\r\n    getTickTime() {\r\n        return this.tick_time;\r\n    }\r\n    getTime() {\r\n        return ((this.sequence.start + (this.current_frame <= 0 ? 0 : this.current_frame) * this.tick_time) % this.sequence.end);\r\n    }\r\n    setTime(time) {\r\n        time = time <= this.sequence.start ? this.sequence.start : time >= this.sequence.end ? this.sequence.end : time;\r\n        this.current_frame = Math.floor(time / this.tick_time) - 1;\r\n        this.dispatch('timeline:progress', {\r\n            current_frame: this.current_frame,\r\n            current_time: time,\r\n            fps: this.fps,\r\n        });\r\n    }\r\n}\r\nTimeline.START = 'start';\r\nTimeline.PAUSE = 'pause';\r\nTimeline.STOP = 'stop';\r\nexport default Timeline;\r\n//# sourceMappingURL=Timeline.js.map","class FrameBuffer {\r\n    constructor() {\r\n        this.frames = {};\r\n    }\r\n    exist(frameNumber) {\r\n        return frameNumber in this.frames;\r\n    }\r\n    get(frameNumber) {\r\n        return this.exist(frameNumber) ? this.frames[frameNumber] : null;\r\n    }\r\n    count() {\r\n        return Object.keys(this.frames).length;\r\n    }\r\n    push(frameNumber, context) {\r\n        this.frames[frameNumber] = context.getImageData(0, 0, context.canvas.width, context.canvas.height);\r\n    }\r\n    flush() {\r\n        this.frames = {};\r\n    }\r\n    getRenderedFrames() {\r\n        return Object.keys(this.frames).map(e => +e);\r\n    }\r\n}\r\nexport default FrameBuffer;\r\n//# sourceMappingURL=FrameBuffer.js.map","import Vec2 from \"../../core/math/Vec2\";\r\nimport Scene from \"../../core/Scene\";\r\nimport Timeline from \"../timeline/Timeline\";\r\nimport SceneUtilities from \"../scene-utilities/SceneUtilities\";\r\nimport FrameBuffer from \"./FrameBuffer\";\r\nimport Emitter from \"../events/Emitter\";\r\nimport { now } from \"../../core/Utilites\";\r\nclass DrawerCanvas extends Emitter {\r\n    constructor(scene, canvasOrContainer, drawOptions = {}, ratio = undefined, resolution = 0, bBuffering = false) {\r\n        var _a, _b, _c, _d, _e, _f, _g;\r\n        super();\r\n        this.bBuffering = false;\r\n        this.timeline = new Timeline();\r\n        this.resolution = resolution || (scene && scene.width ? scene.width : 0);\r\n        this.ratio = ratio || (scene && scene.width && scene.height ? scene.width / scene.height : 1);\r\n        this.bBuffering = bBuffering;\r\n        this.buffer = new FrameBuffer();\r\n        if (scene) {\r\n            const width = this.ratio >= 1 ? scene.width : scene.width * this.ratio;\r\n            const height = this.ratio >= 1 ? scene.height / this.ratio : scene.height;\r\n            scene.resize(width, height);\r\n            this.setScene(scene);\r\n        }\r\n        if ((typeof HTMLCanvasElement !== 'undefined' && canvasOrContainer instanceof HTMLCanvasElement) ||\r\n            (typeof OffscreenCanvas !== 'undefined' && canvasOrContainer instanceof OffscreenCanvas)) {\r\n            const canvas = canvasOrContainer;\r\n            this.setCanvas(canvas);\r\n        }\r\n        else if (canvasOrContainer) {\r\n            const canvas = document.createElement('canvas');\r\n            const container = canvasOrContainer;\r\n            container.appendChild(canvas);\r\n            this.setCanvas(canvas);\r\n        }\r\n        this.drawOptions = {\r\n            scale: (_a = drawOptions.scale) !== null && _a !== void 0 ? _a : 1,\r\n            translate: (_b = drawOptions.translate) !== null && _b !== void 0 ? _b : [0, 0],\r\n            time: (_c = drawOptions.time) !== null && _c !== void 0 ? _c : 0,\r\n            simmetricLine: (_d = drawOptions.simmetricLine) !== null && _d !== void 0 ? _d : 0,\r\n            clearCanvas: (_e = drawOptions.clearCanvas) !== null && _e !== void 0 ? _e : true,\r\n            fixedLineWidth: (_f = drawOptions.fixedLineWidth) !== null && _f !== void 0 ? _f : false,\r\n            noBackground: (_g = drawOptions.noBackground) !== null && _g !== void 0 ? _g : false,\r\n            ghosts: drawOptions.ghosts || 0,\r\n            ghost_skip_time: drawOptions.ghost_skip_time || 0,\r\n            ghost_skip_function: drawOptions.ghost_skip_function,\r\n            backgroundImage: drawOptions.backgroundImage,\r\n        };\r\n        this.draw_id = null;\r\n        this.redraw_id = null;\r\n        this.animation_id = null;\r\n        this.draw = this.draw.bind(this);\r\n        this.animate = this.animate.bind(this);\r\n        this.startAnimation = this.startAnimation.bind(this);\r\n    }\r\n    setBuffering(bBuffering) {\r\n        this.bBuffering = bBuffering;\r\n        this.flushBuffer();\r\n    }\r\n    getBBuffering() {\r\n        return this.bBuffering;\r\n    }\r\n    setScene(scene) {\r\n        this.scene = scene;\r\n        if (!this.resolution && this.scene.width)\r\n            this.resolution = this.scene.width;\r\n        if (this.canvas) {\r\n            this.setCanvas(this.canvas);\r\n        }\r\n    }\r\n    getScene() {\r\n        return this.scene;\r\n    }\r\n    getTimeline() {\r\n        return this.timeline;\r\n    }\r\n    setCanvas(canvasOrContainer) {\r\n        let canvas;\r\n        if (typeof HTMLElement !== 'undefined' && canvasOrContainer instanceof HTMLElement) {\r\n            if (typeof HTMLCanvasElement !== 'undefined' && canvasOrContainer instanceof HTMLCanvasElement) {\r\n                canvas = canvasOrContainer;\r\n            }\r\n            else {\r\n                canvas = (this.canvas || document.createElement('canvas'));\r\n                while (canvasOrContainer.lastChild)\r\n                    canvasOrContainer.removeChild(canvasOrContainer.lastChild);\r\n                canvasOrContainer.appendChild(canvas);\r\n            }\r\n        }\r\n        else {\r\n            canvas = canvasOrContainer;\r\n        }\r\n        this.canvas = canvas;\r\n        this.context = this.canvas.getContext('2d', {\r\n            alpha: true,\r\n            desynchronized: false,\r\n        });\r\n        if (this.scene) {\r\n            this.resize(this.scene.width, this.scene.height);\r\n        }\r\n    }\r\n    getCanvas() {\r\n        return this.canvas;\r\n    }\r\n    getContext() {\r\n        return this.context;\r\n    }\r\n    resize(width, height, ratio, resolution) {\r\n        const dpi = 1;\r\n        ratio = ratio || this.ratio || width / height;\r\n        const size = Math.max(width, height);\r\n        width = ratio >= 1 ? size : size * ratio;\r\n        height = ratio >= 1 ? size / ratio : size;\r\n        this.ratio = ratio;\r\n        if (this.scene)\r\n            this.scene.resize(width, height);\r\n        if (this.canvas) {\r\n            this.canvas.width = width * dpi;\r\n            this.canvas.height = height * dpi;\r\n            if (typeof HTMLCanvasElement !== 'undefined' && this.canvas instanceof HTMLCanvasElement) {\r\n                this.canvas.style.width = width + 'px';\r\n                this.canvas.style.height = height + 'px';\r\n            }\r\n        }\r\n        if (resolution && resolution != this.resolution && this.scene) {\r\n            this.resolution = resolution;\r\n            Scene.walk((sceneChild) => {\r\n                const props = sceneChild.data.props;\r\n                Object.keys(props).forEach(name => {\r\n                    SceneUtilities.setProp(sceneChild, name, props[name], this);\r\n                });\r\n            }, this.scene);\r\n        }\r\n        this.flushBuffer();\r\n        this.dispatch('drawer-canvas:resize');\r\n    }\r\n    flushBuffer() {\r\n        if (this.bBuffering) {\r\n            this.buffer.flush();\r\n            this.dispatch('drawer-canvas:buffer_flush');\r\n        }\r\n    }\r\n    getRenderedFrames() {\r\n        if (this.bBuffering) {\r\n            return this.buffer.getRenderedFrames();\r\n        }\r\n        return [];\r\n    }\r\n    setRatio(ratio) {\r\n        this.resize(this.scene.width, this.scene.height, ratio);\r\n    }\r\n    getRatio() {\r\n        return this.ratio;\r\n    }\r\n    getResolution() {\r\n        return this.resolution;\r\n    }\r\n    setResolution(resolution) {\r\n        this.resize(this.scene.width, this.scene.height, this.ratio, resolution);\r\n    }\r\n    getValueFromResolution(value) {\r\n        return (value * this.resolution) / 200;\r\n    }\r\n    getValueFromResolutionScaled(value) {\r\n        return (value * 200) / this.resolution;\r\n    }\r\n    setOption(name, value) {\r\n        if (typeof name == 'object') {\r\n            const keys = Object.keys(name);\r\n            for (let i = 0, len = keys.length; i < len; i++) {\r\n                this.drawOptions[keys[i]] = name[keys[i]];\r\n            }\r\n        }\r\n        else {\r\n            this.drawOptions[name] = value;\r\n        }\r\n        this.flushBuffer();\r\n    }\r\n    getOption(name, default_value) {\r\n        var _a;\r\n        return (_a = this.drawOptions[name]) !== null && _a !== void 0 ? _a : default_value;\r\n    }\r\n    getOptions() {\r\n        return this.drawOptions;\r\n    }\r\n    animate(timestamp) {\r\n        if (this.timeline.bSequenceStarted()) {\r\n            this.animation_id = requestAnimationFrame(this.animate);\r\n            if (this.timeline.tick(timestamp))\r\n                this.draw();\r\n        }\r\n    }\r\n    startAnimation() {\r\n        this.stopAnimation();\r\n        this.timeline.start();\r\n        this.animation_id = requestAnimationFrame(this.animate);\r\n    }\r\n    stopAnimation() {\r\n        this.timeline.stop();\r\n        if (this.animation_id)\r\n            cancelAnimationFrame(this.animation_id);\r\n    }\r\n    pauseAnimation() {\r\n        this.timeline.pause();\r\n        if (this.animation_id)\r\n            cancelAnimationFrame(this.animation_id);\r\n    }\r\n    playAnimation() {\r\n        this.timeline.start();\r\n        requestAnimationFrame(this.animate);\r\n    }\r\n    draw() {\r\n        var _a, _b;\r\n        let draw_time = 0;\r\n        const drawOptions = Object.assign({}, this.drawOptions);\r\n        drawOptions.ghost_index = undefined;\r\n        drawOptions.clearCanvas = this.drawOptions.clearCanvas || this.timeline.getCurrentFrame() <= 0;\r\n        drawOptions.time = this.timeline.getTime();\r\n        const current_frame = this.timeline.getFrameAtTime(drawOptions.time);\r\n        this.dispatch('drawer-canvas:before_draw', {\r\n            current_frame: current_frame,\r\n            current_time: drawOptions.time,\r\n        });\r\n        if (this.bBuffering && this.buffer.exist(current_frame)) {\r\n            (_a = this.context) === null || _a === void 0 ? void 0 : _a.putImageData(this.buffer.get(current_frame), 0, 0);\r\n        }\r\n        else {\r\n            draw_time += DrawerCanvas.draw(this.scene, this.context, drawOptions, this.resolution);\r\n            if (drawOptions.ghosts) {\r\n                const time = this.timeline.getTime();\r\n                const sequenceEndTime = this.timeline.getSequenceEndTime();\r\n                for (let i = 1; i <= drawOptions.ghosts; i++) {\r\n                    const ghostTime = time -\r\n                        (drawOptions.ghost_skip_function\r\n                            ? drawOptions.ghost_skip_function(i)\r\n                            : i * ((_b = drawOptions.ghost_skip_time) !== null && _b !== void 0 ? _b : 30));\r\n                    drawOptions.clearCanvas = false;\r\n                    drawOptions.ghost_index = i;\r\n                    drawOptions.time =\r\n                        ghostTime < 0\r\n                            ? ghostTime + sequenceEndTime\r\n                            : ghostTime > sequenceEndTime\r\n                                ? ghostTime % sequenceEndTime\r\n                                : ghostTime;\r\n                    draw_time += DrawerCanvas.draw(this.scene, this.context, drawOptions, this.resolution);\r\n                }\r\n            }\r\n            if (this.bBuffering && this.context) {\r\n                this.buffer.push(current_frame, this.context);\r\n                if (this.buffer.count() >= this.timeline.getFramesCount()) {\r\n                    this.dispatch('drawer-canvas:buffer_loaded');\r\n                }\r\n            }\r\n        }\r\n        return draw_time;\r\n    }\r\n    redraw() {\r\n        if (!this.timeline.bSequenceStarted()) {\r\n            this.draw_id && cancelAnimationFrame(this.draw_id);\r\n            !this.drawOptions.clearCanvas &&\r\n                (typeof this.drawOptions.ghosts == undefined || this.drawOptions.ghosts == 0) &&\r\n                this.timeline.stop();\r\n            this.draw_id = requestAnimationFrame(this.draw);\r\n        }\r\n        else if (!this.drawOptions.clearCanvas &&\r\n            (typeof this.drawOptions.ghosts == undefined || this.drawOptions.ghosts == 0)) {\r\n            this.stopAnimation();\r\n            this.redraw_id && cancelAnimationFrame(this.redraw_id);\r\n            this.redraw_id = requestAnimationFrame(this.startAnimation);\r\n        }\r\n    }\r\n    static draw(scene, context, options, resolution) {\r\n        var _a, _b, _c, _d;\r\n        const start_time = now();\r\n        if (context) {\r\n            const scale = (_a = options.scale) !== null && _a !== void 0 ? _a : 1;\r\n            const translate = (_b = options.translate) !== null && _b !== void 0 ? _b : [0, 0];\r\n            const time = (_c = options.time) !== null && _c !== void 0 ? _c : 0;\r\n            const simmetricLine = (_d = options.simmetricLine) !== null && _d !== void 0 ? _d : 0;\r\n            const fixedLineWidth = options.fixedLineWidth;\r\n            const clearCanvas = options.clearCanvas;\r\n            const noBackground = options.noBackground;\r\n            const backgroundImage = options.backgroundImage;\r\n            const bGhost = typeof options.ghosts !== 'undefined' &&\r\n                options.ghosts > 0 &&\r\n                typeof options.ghost_index !== 'undefined' &&\r\n                options.ghost_index > 0;\r\n            const ghostMultiplier = bGhost\r\n                ? 1 - options.ghost_index / (options.ghosts + 0.5)\r\n                : 1;\r\n            const width = scene.width;\r\n            const height = scene.height;\r\n            const ratio_x = width > height ? 1 : height / width;\r\n            const ratio_y = width > height ? width / height : 1;\r\n            resolution = resolution || width;\r\n            const final_scale = [(width / (resolution / ratio_x)) * scale, (height / (resolution / ratio_y)) * scale];\r\n            const final_translate = [\r\n                width / 2 - (scale > 1 ? (translate[0] * width) / (1 / ((scale - 1) / 2)) : 0),\r\n                height / 2 - (scale > 1 ? (translate[1] * height) / (1 / ((scale - 1) / 2)) : 0),\r\n            ];\r\n            scene.current_time = time;\r\n            scene.getChildren().forEach((sceneChild) => {\r\n                if (!sceneChild.data ||\r\n                    !(sceneChild.data.visible === false) ||\r\n                    !(bGhost && sceneChild.data.disableGhost === true))\r\n                    sceneChild.generate(time, true);\r\n            });\r\n            if (clearCanvas) {\r\n                if (noBackground) {\r\n                    context.clearRect(0, 0, width, height);\r\n                }\r\n                else {\r\n                    context.fillStyle = scene.background;\r\n                    context.fillRect(0, 0, width, height);\r\n                    backgroundImage && context.drawImage(backgroundImage, 0, 0, width, height);\r\n                }\r\n            }\r\n            if (simmetricLine > 0) {\r\n                const offset = Math.PI / simmetricLine;\r\n                const size = Math.max(width, height) / 2;\r\n                const center = [size / 2, size / 2];\r\n                for (let i = 0; i < simmetricLine; i++) {\r\n                    const a = Float32Array.from([-size, -size]);\r\n                    const b = Float32Array.from([size * 2, size * 2]);\r\n                    const rotate = i * offset + Math.PI / 4;\r\n                    Vec2.rotateZ(a, center, rotate);\r\n                    Vec2.rotateZ(b, center, rotate);\r\n                    context.beginPath();\r\n                    context.strokeStyle = scene.mainColor;\r\n                    context.lineWidth = 1;\r\n                    context.moveTo((a[0] - size / 2) * final_scale[0] + final_translate[0], (a[1] - size / 2) * final_scale[1] + final_translate[1]);\r\n                    context.lineTo((b[0] - size / 2) * final_scale[0] + final_translate[0], (b[1] - size / 2) * final_scale[1] + final_translate[1]);\r\n                    context.stroke();\r\n                }\r\n            }\r\n            scene.draw(({ lineWidth, strokeColor, fillColor, shape, buffer, buffer_length, current_buffer_index }) => {\r\n                if (shape.data && (shape.data.visible === false || (bGhost && shape.data.disableGhost === true)))\r\n                    return;\r\n                context.beginPath();\r\n                context.moveTo((buffer[current_buffer_index] - width / 2) * final_scale[0] + final_translate[0], (buffer[current_buffer_index + 1] - height / 2) * final_scale[1] + final_translate[1]);\r\n                for (let i = 2; i < buffer_length; i += 2) {\r\n                    context.lineTo((buffer[current_buffer_index + i] - width / 2) * final_scale[0] + final_translate[0], (buffer[current_buffer_index + i + 1] - height / 2) * final_scale[1] + final_translate[1]);\r\n                }\r\n                shape && shape.isClosed() && context.closePath();\r\n                if (shape && shape.data && shape.data.highlighted) {\r\n                    context.lineWidth = (lineWidth || 1) * 3 * scale;\r\n                    context.strokeStyle = scene.mainColor;\r\n                    context.stroke();\r\n                    return;\r\n                }\r\n                if (fillColor) {\r\n                    if (bGhost) {\r\n                        const color = /\\((.+),(.+),(.+),(.+)?\\)/g.exec(fillColor);\r\n                        if (color) {\r\n                            let [, a, b, c, o] = color;\r\n                            const alpha = o ? parseFloat(o) : 1;\r\n                            const ghostAlpha = alpha <= 0 ? 0 : alpha * ghostMultiplier;\r\n                            fillColor =\r\n                                fillColor.indexOf('rgb') >= 0\r\n                                    ? `rgba(${a},${b},${c},${ghostAlpha})`\r\n                                    : `hsla(${a},${b},${c},${ghostAlpha})`;\r\n                        }\r\n                    }\r\n                    context.fillStyle = fillColor;\r\n                    context.fill();\r\n                }\r\n                if (strokeColor && lineWidth) {\r\n                    if (bGhost) {\r\n                        const color = /\\((.+),(.+),(.+),(.+)?\\)/g.exec(strokeColor);\r\n                        if (color) {\r\n                            let [, a, b, c, o] = color;\r\n                            const alpha = o ? parseFloat(o) : 1;\r\n                            const ghostAlpha = alpha <= 0 ? 0 : alpha * ghostMultiplier;\r\n                            strokeColor =\r\n                                strokeColor.indexOf('rgb') >= 0\r\n                                    ? `rgba(${a},${b},${c},${ghostAlpha})`\r\n                                    : `hsla(${a},${b},${c},${ghostAlpha})`;\r\n                        }\r\n                        lineWidth *= ghostMultiplier;\r\n                    }\r\n                    context.lineWidth = fixedLineWidth ? lineWidth : lineWidth * scale;\r\n                    context.strokeStyle = strokeColor;\r\n                    context.stroke();\r\n                }\r\n            });\r\n        }\r\n        const end_time = now();\r\n        return end_time - start_time;\r\n    }\r\n}\r\nexport default DrawerCanvas;\r\n//# sourceMappingURL=DrawerCanvas.js.map","/*\n * A fast javascript implementation of simplex noise by Jonas Wagner\n\nBased on a speed-improved simplex noise algorithm for 2D, 3D and 4D in Java.\nWhich is based on example code by Stefan Gustavson (stegu@itn.liu.se).\nWith Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\nBetter rank ordering method by Stefan Gustavson in 2012.\n\n\n Copyright (c) 2018 Jonas Wagner\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n(function() {\n  'use strict';\n\n  var F2 = 0.5 * (Math.sqrt(3.0) - 1.0);\n  var G2 = (3.0 - Math.sqrt(3.0)) / 6.0;\n  var F3 = 1.0 / 3.0;\n  var G3 = 1.0 / 6.0;\n  var F4 = (Math.sqrt(5.0) - 1.0) / 4.0;\n  var G4 = (5.0 - Math.sqrt(5.0)) / 20.0;\n\n  function SimplexNoise(randomOrSeed) {\n    var random;\n    if (typeof randomOrSeed == 'function') {\n      random = randomOrSeed;\n    }\n    else if (randomOrSeed) {\n      random = alea(randomOrSeed);\n    } else {\n      random = Math.random;\n    }\n    this.p = buildPermutationTable(random);\n    this.perm = new Uint8Array(512);\n    this.permMod12 = new Uint8Array(512);\n    for (var i = 0; i < 512; i++) {\n      this.perm[i] = this.p[i & 255];\n      this.permMod12[i] = this.perm[i] % 12;\n    }\n\n  }\n  SimplexNoise.prototype = {\n    grad3: new Float32Array([1, 1, 0,\n      -1, 1, 0,\n      1, -1, 0,\n\n      -1, -1, 0,\n      1, 0, 1,\n      -1, 0, 1,\n\n      1, 0, -1,\n      -1, 0, -1,\n      0, 1, 1,\n\n      0, -1, 1,\n      0, 1, -1,\n      0, -1, -1]),\n    grad4: new Float32Array([0, 1, 1, 1, 0, 1, 1, -1, 0, 1, -1, 1, 0, 1, -1, -1,\n      0, -1, 1, 1, 0, -1, 1, -1, 0, -1, -1, 1, 0, -1, -1, -1,\n      1, 0, 1, 1, 1, 0, 1, -1, 1, 0, -1, 1, 1, 0, -1, -1,\n      -1, 0, 1, 1, -1, 0, 1, -1, -1, 0, -1, 1, -1, 0, -1, -1,\n      1, 1, 0, 1, 1, 1, 0, -1, 1, -1, 0, 1, 1, -1, 0, -1,\n      -1, 1, 0, 1, -1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, -1,\n      1, 1, 1, 0, 1, 1, -1, 0, 1, -1, 1, 0, 1, -1, -1, 0,\n      -1, 1, 1, 0, -1, 1, -1, 0, -1, -1, 1, 0, -1, -1, -1, 0]),\n    noise2D: function(xin, yin) {\n      var permMod12 = this.permMod12;\n      var perm = this.perm;\n      var grad3 = this.grad3;\n      var n0 = 0; // Noise contributions from the three corners\n      var n1 = 0;\n      var n2 = 0;\n      // Skew the input space to determine which simplex cell we're in\n      var s = (xin + yin) * F2; // Hairy factor for 2D\n      var i = Math.floor(xin + s);\n      var j = Math.floor(yin + s);\n      var t = (i + j) * G2;\n      var X0 = i - t; // Unskew the cell origin back to (x,y) space\n      var Y0 = j - t;\n      var x0 = xin - X0; // The x,y distances from the cell origin\n      var y0 = yin - Y0;\n      // For the 2D case, the simplex shape is an equilateral triangle.\n      // Determine which simplex we are in.\n      var i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords\n      if (x0 > y0) {\n        i1 = 1;\n        j1 = 0;\n      } // lower triangle, XY order: (0,0)->(1,0)->(1,1)\n      else {\n        i1 = 0;\n        j1 = 1;\n      } // upper triangle, YX order: (0,0)->(0,1)->(1,1)\n      // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\n      // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\n      // c = (3-sqrt(3))/6\n      var x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\n      var y1 = y0 - j1 + G2;\n      var x2 = x0 - 1.0 + 2.0 * G2; // Offsets for last corner in (x,y) unskewed coords\n      var y2 = y0 - 1.0 + 2.0 * G2;\n      // Work out the hashed gradient indices of the three simplex corners\n      var ii = i & 255;\n      var jj = j & 255;\n      // Calculate the contribution from the three corners\n      var t0 = 0.5 - x0 * x0 - y0 * y0;\n      if (t0 >= 0) {\n        var gi0 = permMod12[ii + perm[jj]] * 3;\n        t0 *= t0;\n        n0 = t0 * t0 * (grad3[gi0] * x0 + grad3[gi0 + 1] * y0); // (x,y) of grad3 used for 2D gradient\n      }\n      var t1 = 0.5 - x1 * x1 - y1 * y1;\n      if (t1 >= 0) {\n        var gi1 = permMod12[ii + i1 + perm[jj + j1]] * 3;\n        t1 *= t1;\n        n1 = t1 * t1 * (grad3[gi1] * x1 + grad3[gi1 + 1] * y1);\n      }\n      var t2 = 0.5 - x2 * x2 - y2 * y2;\n      if (t2 >= 0) {\n        var gi2 = permMod12[ii + 1 + perm[jj + 1]] * 3;\n        t2 *= t2;\n        n2 = t2 * t2 * (grad3[gi2] * x2 + grad3[gi2 + 1] * y2);\n      }\n      // Add contributions from each corner to get the final noise value.\n      // The result is scaled to return values in the interval [-1,1].\n      return 70.0 * (n0 + n1 + n2);\n    },\n    // 3D simplex noise\n    noise3D: function(xin, yin, zin) {\n      var permMod12 = this.permMod12;\n      var perm = this.perm;\n      var grad3 = this.grad3;\n      var n0, n1, n2, n3; // Noise contributions from the four corners\n      // Skew the input space to determine which simplex cell we're in\n      var s = (xin + yin + zin) * F3; // Very nice and simple skew factor for 3D\n      var i = Math.floor(xin + s);\n      var j = Math.floor(yin + s);\n      var k = Math.floor(zin + s);\n      var t = (i + j + k) * G3;\n      var X0 = i - t; // Unskew the cell origin back to (x,y,z) space\n      var Y0 = j - t;\n      var Z0 = k - t;\n      var x0 = xin - X0; // The x,y,z distances from the cell origin\n      var y0 = yin - Y0;\n      var z0 = zin - Z0;\n      // For the 3D case, the simplex shape is a slightly irregular tetrahedron.\n      // Determine which simplex we are in.\n      var i1, j1, k1; // Offsets for second corner of simplex in (i,j,k) coords\n      var i2, j2, k2; // Offsets for third corner of simplex in (i,j,k) coords\n      if (x0 >= y0) {\n        if (y0 >= z0) {\n          i1 = 1;\n          j1 = 0;\n          k1 = 0;\n          i2 = 1;\n          j2 = 1;\n          k2 = 0;\n        } // X Y Z order\n        else if (x0 >= z0) {\n          i1 = 1;\n          j1 = 0;\n          k1 = 0;\n          i2 = 1;\n          j2 = 0;\n          k2 = 1;\n        } // X Z Y order\n        else {\n          i1 = 0;\n          j1 = 0;\n          k1 = 1;\n          i2 = 1;\n          j2 = 0;\n          k2 = 1;\n        } // Z X Y order\n      }\n      else { // x0<y0\n        if (y0 < z0) {\n          i1 = 0;\n          j1 = 0;\n          k1 = 1;\n          i2 = 0;\n          j2 = 1;\n          k2 = 1;\n        } // Z Y X order\n        else if (x0 < z0) {\n          i1 = 0;\n          j1 = 1;\n          k1 = 0;\n          i2 = 0;\n          j2 = 1;\n          k2 = 1;\n        } // Y Z X order\n        else {\n          i1 = 0;\n          j1 = 1;\n          k1 = 0;\n          i2 = 1;\n          j2 = 1;\n          k2 = 0;\n        } // Y X Z order\n      }\n      // A step of (1,0,0) in (i,j,k) means a step of (1-c,-c,-c) in (x,y,z),\n      // a step of (0,1,0) in (i,j,k) means a step of (-c,1-c,-c) in (x,y,z), and\n      // a step of (0,0,1) in (i,j,k) means a step of (-c,-c,1-c) in (x,y,z), where\n      // c = 1/6.\n      var x1 = x0 - i1 + G3; // Offsets for second corner in (x,y,z) coords\n      var y1 = y0 - j1 + G3;\n      var z1 = z0 - k1 + G3;\n      var x2 = x0 - i2 + 2.0 * G3; // Offsets for third corner in (x,y,z) coords\n      var y2 = y0 - j2 + 2.0 * G3;\n      var z2 = z0 - k2 + 2.0 * G3;\n      var x3 = x0 - 1.0 + 3.0 * G3; // Offsets for last corner in (x,y,z) coords\n      var y3 = y0 - 1.0 + 3.0 * G3;\n      var z3 = z0 - 1.0 + 3.0 * G3;\n      // Work out the hashed gradient indices of the four simplex corners\n      var ii = i & 255;\n      var jj = j & 255;\n      var kk = k & 255;\n      // Calculate the contribution from the four corners\n      var t0 = 0.6 - x0 * x0 - y0 * y0 - z0 * z0;\n      if (t0 < 0) n0 = 0.0;\n      else {\n        var gi0 = permMod12[ii + perm[jj + perm[kk]]] * 3;\n        t0 *= t0;\n        n0 = t0 * t0 * (grad3[gi0] * x0 + grad3[gi0 + 1] * y0 + grad3[gi0 + 2] * z0);\n      }\n      var t1 = 0.6 - x1 * x1 - y1 * y1 - z1 * z1;\n      if (t1 < 0) n1 = 0.0;\n      else {\n        var gi1 = permMod12[ii + i1 + perm[jj + j1 + perm[kk + k1]]] * 3;\n        t1 *= t1;\n        n1 = t1 * t1 * (grad3[gi1] * x1 + grad3[gi1 + 1] * y1 + grad3[gi1 + 2] * z1);\n      }\n      var t2 = 0.6 - x2 * x2 - y2 * y2 - z2 * z2;\n      if (t2 < 0) n2 = 0.0;\n      else {\n        var gi2 = permMod12[ii + i2 + perm[jj + j2 + perm[kk + k2]]] * 3;\n        t2 *= t2;\n        n2 = t2 * t2 * (grad3[gi2] * x2 + grad3[gi2 + 1] * y2 + grad3[gi2 + 2] * z2);\n      }\n      var t3 = 0.6 - x3 * x3 - y3 * y3 - z3 * z3;\n      if (t3 < 0) n3 = 0.0;\n      else {\n        var gi3 = permMod12[ii + 1 + perm[jj + 1 + perm[kk + 1]]] * 3;\n        t3 *= t3;\n        n3 = t3 * t3 * (grad3[gi3] * x3 + grad3[gi3 + 1] * y3 + grad3[gi3 + 2] * z3);\n      }\n      // Add contributions from each corner to get the final noise value.\n      // The result is scaled to stay just inside [-1,1]\n      return 32.0 * (n0 + n1 + n2 + n3);\n    },\n    // 4D simplex noise, better simplex rank ordering method 2012-03-09\n    noise4D: function(x, y, z, w) {\n      var perm = this.perm;\n      var grad4 = this.grad4;\n\n      var n0, n1, n2, n3, n4; // Noise contributions from the five corners\n      // Skew the (x,y,z,w) space to determine which cell of 24 simplices we're in\n      var s = (x + y + z + w) * F4; // Factor for 4D skewing\n      var i = Math.floor(x + s);\n      var j = Math.floor(y + s);\n      var k = Math.floor(z + s);\n      var l = Math.floor(w + s);\n      var t = (i + j + k + l) * G4; // Factor for 4D unskewing\n      var X0 = i - t; // Unskew the cell origin back to (x,y,z,w) space\n      var Y0 = j - t;\n      var Z0 = k - t;\n      var W0 = l - t;\n      var x0 = x - X0; // The x,y,z,w distances from the cell origin\n      var y0 = y - Y0;\n      var z0 = z - Z0;\n      var w0 = w - W0;\n      // For the 4D case, the simplex is a 4D shape I won't even try to describe.\n      // To find out which of the 24 possible simplices we're in, we need to\n      // determine the magnitude ordering of x0, y0, z0 and w0.\n      // Six pair-wise comparisons are performed between each possible pair\n      // of the four coordinates, and the results are used to rank the numbers.\n      var rankx = 0;\n      var ranky = 0;\n      var rankz = 0;\n      var rankw = 0;\n      if (x0 > y0) rankx++;\n      else ranky++;\n      if (x0 > z0) rankx++;\n      else rankz++;\n      if (x0 > w0) rankx++;\n      else rankw++;\n      if (y0 > z0) ranky++;\n      else rankz++;\n      if (y0 > w0) ranky++;\n      else rankw++;\n      if (z0 > w0) rankz++;\n      else rankw++;\n      var i1, j1, k1, l1; // The integer offsets for the second simplex corner\n      var i2, j2, k2, l2; // The integer offsets for the third simplex corner\n      var i3, j3, k3, l3; // The integer offsets for the fourth simplex corner\n      // simplex[c] is a 4-vector with the numbers 0, 1, 2 and 3 in some order.\n      // Many values of c will never occur, since e.g. x>y>z>w makes x<z, y<w and x<w\n      // impossible. Only the 24 indices which have non-zero entries make any sense.\n      // We use a thresholding to set the coordinates in turn from the largest magnitude.\n      // Rank 3 denotes the largest coordinate.\n      i1 = rankx >= 3 ? 1 : 0;\n      j1 = ranky >= 3 ? 1 : 0;\n      k1 = rankz >= 3 ? 1 : 0;\n      l1 = rankw >= 3 ? 1 : 0;\n      // Rank 2 denotes the second largest coordinate.\n      i2 = rankx >= 2 ? 1 : 0;\n      j2 = ranky >= 2 ? 1 : 0;\n      k2 = rankz >= 2 ? 1 : 0;\n      l2 = rankw >= 2 ? 1 : 0;\n      // Rank 1 denotes the second smallest coordinate.\n      i3 = rankx >= 1 ? 1 : 0;\n      j3 = ranky >= 1 ? 1 : 0;\n      k3 = rankz >= 1 ? 1 : 0;\n      l3 = rankw >= 1 ? 1 : 0;\n      // The fifth corner has all coordinate offsets = 1, so no need to compute that.\n      var x1 = x0 - i1 + G4; // Offsets for second corner in (x,y,z,w) coords\n      var y1 = y0 - j1 + G4;\n      var z1 = z0 - k1 + G4;\n      var w1 = w0 - l1 + G4;\n      var x2 = x0 - i2 + 2.0 * G4; // Offsets for third corner in (x,y,z,w) coords\n      var y2 = y0 - j2 + 2.0 * G4;\n      var z2 = z0 - k2 + 2.0 * G4;\n      var w2 = w0 - l2 + 2.0 * G4;\n      var x3 = x0 - i3 + 3.0 * G4; // Offsets for fourth corner in (x,y,z,w) coords\n      var y3 = y0 - j3 + 3.0 * G4;\n      var z3 = z0 - k3 + 3.0 * G4;\n      var w3 = w0 - l3 + 3.0 * G4;\n      var x4 = x0 - 1.0 + 4.0 * G4; // Offsets for last corner in (x,y,z,w) coords\n      var y4 = y0 - 1.0 + 4.0 * G4;\n      var z4 = z0 - 1.0 + 4.0 * G4;\n      var w4 = w0 - 1.0 + 4.0 * G4;\n      // Work out the hashed gradient indices of the five simplex corners\n      var ii = i & 255;\n      var jj = j & 255;\n      var kk = k & 255;\n      var ll = l & 255;\n      // Calculate the contribution from the five corners\n      var t0 = 0.6 - x0 * x0 - y0 * y0 - z0 * z0 - w0 * w0;\n      if (t0 < 0) n0 = 0.0;\n      else {\n        var gi0 = (perm[ii + perm[jj + perm[kk + perm[ll]]]] % 32) * 4;\n        t0 *= t0;\n        n0 = t0 * t0 * (grad4[gi0] * x0 + grad4[gi0 + 1] * y0 + grad4[gi0 + 2] * z0 + grad4[gi0 + 3] * w0);\n      }\n      var t1 = 0.6 - x1 * x1 - y1 * y1 - z1 * z1 - w1 * w1;\n      if (t1 < 0) n1 = 0.0;\n      else {\n        var gi1 = (perm[ii + i1 + perm[jj + j1 + perm[kk + k1 + perm[ll + l1]]]] % 32) * 4;\n        t1 *= t1;\n        n1 = t1 * t1 * (grad4[gi1] * x1 + grad4[gi1 + 1] * y1 + grad4[gi1 + 2] * z1 + grad4[gi1 + 3] * w1);\n      }\n      var t2 = 0.6 - x2 * x2 - y2 * y2 - z2 * z2 - w2 * w2;\n      if (t2 < 0) n2 = 0.0;\n      else {\n        var gi2 = (perm[ii + i2 + perm[jj + j2 + perm[kk + k2 + perm[ll + l2]]]] % 32) * 4;\n        t2 *= t2;\n        n2 = t2 * t2 * (grad4[gi2] * x2 + grad4[gi2 + 1] * y2 + grad4[gi2 + 2] * z2 + grad4[gi2 + 3] * w2);\n      }\n      var t3 = 0.6 - x3 * x3 - y3 * y3 - z3 * z3 - w3 * w3;\n      if (t3 < 0) n3 = 0.0;\n      else {\n        var gi3 = (perm[ii + i3 + perm[jj + j3 + perm[kk + k3 + perm[ll + l3]]]] % 32) * 4;\n        t3 *= t3;\n        n3 = t3 * t3 * (grad4[gi3] * x3 + grad4[gi3 + 1] * y3 + grad4[gi3 + 2] * z3 + grad4[gi3 + 3] * w3);\n      }\n      var t4 = 0.6 - x4 * x4 - y4 * y4 - z4 * z4 - w4 * w4;\n      if (t4 < 0) n4 = 0.0;\n      else {\n        var gi4 = (perm[ii + 1 + perm[jj + 1 + perm[kk + 1 + perm[ll + 1]]]] % 32) * 4;\n        t4 *= t4;\n        n4 = t4 * t4 * (grad4[gi4] * x4 + grad4[gi4 + 1] * y4 + grad4[gi4 + 2] * z4 + grad4[gi4 + 3] * w4);\n      }\n      // Sum up and scale the result to cover the range [-1,1]\n      return 27.0 * (n0 + n1 + n2 + n3 + n4);\n    }\n  };\n\n  function buildPermutationTable(random) {\n    var i;\n    var p = new Uint8Array(256);\n    for (i = 0; i < 256; i++) {\n      p[i] = i;\n    }\n    for (i = 0; i < 255; i++) {\n      var r = i + ~~(random() * (256 - i));\n      var aux = p[i];\n      p[i] = p[r];\n      p[r] = aux;\n    }\n    return p;\n  }\n  SimplexNoise._buildPermutationTable = buildPermutationTable;\n\n  function alea() {\n    // Johannes Baage <baagoe@baagoe.com>, 2010\n    var s0 = 0;\n    var s1 = 0;\n    var s2 = 0;\n    var c = 1;\n\n    var mash = masher();\n    s0 = mash(' ');\n    s1 = mash(' ');\n    s2 = mash(' ');\n\n    for (var i = 0; i < arguments.length; i++) {\n      s0 -= mash(arguments[i]);\n      if (s0 < 0) {\n        s0 += 1;\n      }\n      s1 -= mash(arguments[i]);\n      if (s1 < 0) {\n        s1 += 1;\n      }\n      s2 -= mash(arguments[i]);\n      if (s2 < 0) {\n        s2 += 1;\n      }\n    }\n    mash = null;\n    return function() {\n      var t = 2091639 * s0 + c * 2.3283064365386963e-10; // 2^-32\n      s0 = s1;\n      s1 = s2;\n      return s2 = t - (c = t | 0);\n    };\n  }\n  function masher() {\n    var n = 0xefc8249d;\n    return function(data) {\n      data = data.toString();\n      for (var i = 0; i < data.length; i++) {\n        n += data.charCodeAt(i);\n        var h = 0.02519603282416938 * n;\n        n = h >>> 0;\n        h -= n;\n        h *= n;\n        n = h >>> 0;\n        h -= n;\n        n += h * 0x100000000; // 2^32\n      }\n      return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n    };\n  }\n\n  // amd\n  if (typeof define !== 'undefined' && define.amd) define(function() {return SimplexNoise;});\n  // common js\n  if (typeof exports !== 'undefined') exports.SimplexNoise = SimplexNoise;\n  // browser\n  else if (typeof window !== 'undefined') window.SimplexNoise = SimplexNoise;\n  // nodejs\n  if (typeof module !== 'undefined') {\n    module.exports = SimplexNoise;\n  }\n\n})();\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Number_1 = require(\"@pups/utility/build/Number\");\r\nconst Array_1 = require(\"@pups/utility/build/Array\");\r\nconst ColorParser_1 = require(\"./ColorParser\");\r\nconst ColorConversions_1 = require(\"./ColorConversions\");\r\n/**\r\n *\r\n *\r\n * @class ColorManager\r\n */\r\nclass ColorManager {\r\n    /**\r\n     * Creates an instance of ColorManager.\r\n     *\r\n     * @param {Types.Color.All} color\r\n     * @memberof ColorManager\r\n     */\r\n    constructor(color) {\r\n        const parsed = ColorParser_1.default.parse(color);\r\n        this.rgb = this.getRgbFromMath(parsed);\r\n        this.hsl = ColorConversions_1.default.rgbToHsl(this.rgb);\r\n        this.hsv = ColorConversions_1.default.rgbToHsv(this.rgb);\r\n        this.hex = ColorConversions_1.default.rgbToHex(this.rgb);\r\n        this.cmyk = ColorConversions_1.default.rgbToCmyk(this.rgb);\r\n        this.setAlpha(['rgba', 'hsla', 'hsva'].indexOf(parsed.type) >= 0 ? parsed.value.length >= 3 ? parsed.value[3] : 1 : 1);\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @param {number} [alpha]\r\n     * @memberof ColorManager\r\n     */\r\n    setAlpha(alpha) {\r\n        this.alpha = alpha;\r\n        this.alpha = this.alpha > 1 ? this.alpha / 255 : this.alpha;\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @returns {number}\r\n     * @memberof ColorManager\r\n     */\r\n    getAlpha() {\r\n        return this.alpha;\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @private\r\n     * @param {Types.Color.Parsing.Match} match\r\n     * @returns {Types.Color.RGB}\r\n     * @memberof ColorManager\r\n     */\r\n    getRgbFromMath(match) {\r\n        switch (match.type) {\r\n            case 'rgb':\r\n            case 'rgba':\r\n                const rgb = Array_1.toFloat(match.value);\r\n                return { r: rgb[0], g: rgb[1], b: rgb[2] };\r\n            case 'hsl':\r\n            case 'hsla':\r\n                const hsl = Array_1.toFloat(match.value);\r\n                return ColorConversions_1.default.hslToRgb({ h: hsl[0], s: hsl[1], l: hsl[2] });\r\n            case 'hsv':\r\n            case 'hsva':\r\n                const hsv = Array_1.toFloat(match.value);\r\n                return ColorConversions_1.default.hsvToRgb({ h: hsv[0], s: hsv[1], v: hsv[2] });\r\n            case 'cmyk':\r\n                const cmyk = Array_1.toFloat(match.value);\r\n                return ColorConversions_1.default.cmykToRgb({ c: cmyk[0], m: cmyk[1], y: cmyk[2], k: cmyk[3] });\r\n            case 'hex3':\r\n            case 'hex4':\r\n            case 'hex6':\r\n            case 'hex8':\r\n                return ColorConversions_1.default.hexToRgb(match.value);\r\n        }\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @returns {Types.Color.RGB}\r\n     * @memberof ColorManager\r\n     */\r\n    getRgb() {\r\n        return Object.assign({}, this.rgb);\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @returns {Types.Color.HSL}\r\n     * @memberof ColorManager\r\n     */\r\n    getHsl() {\r\n        return Object.assign({}, this.hsl);\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @returns {Types.Color.HSV}\r\n     * @memberof ColorManager\r\n     */\r\n    getHsv() {\r\n        return Object.assign({}, this.hsv);\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @returns {Types.Color.CMYK}\r\n     * @memberof ColorManager\r\n     */\r\n    getCmyk() {\r\n        return Object.assign({}, this.cmyk);\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @private\r\n     * @param {Types.Palette.Format} type\r\n     * @param {number} x\r\n     * @param {number} y\r\n     * @param {number} z\r\n     * @param {boolean} [alpha=false]\r\n     * @param {boolean} [isHslOrHsv=false]\r\n     * @returns\r\n     * @memberof ColorManager\r\n     */\r\n    toString(type, x, y, z, alpha = false, isHslOrHsv = false) {\r\n        const p = isHslOrHsv ? '%' : '';\r\n        return `${type + (alpha ? 'a' : '')}(${Math.round(x)}, ${Math.round(y) + p}, ${Math.round(z) + p}${alpha ? ', ' + this.alpha : ''})`;\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @param {boolean} [alpha=false]\r\n     * @returns {string}\r\n     * @memberof ColorManager\r\n     */\r\n    toRGB(alpha = false) {\r\n        return this.toString('rgb', this.rgb.r, this.rgb.g, this.rgb.b, alpha, false);\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @param {boolean} [alpha=false]\r\n     * @returns {string}\r\n     * @memberof ColorManager\r\n     */\r\n    toHSL(alpha = false) {\r\n        return this.toString.call(this, 'hsl', Number_1.relativeClamp(this.hsl.h, 0, 1, 0, 360), this.hsl.s * 100, this.hsl.l * 100, alpha, true);\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @param {boolean} [alpha=false]\r\n     * @returns {string}\r\n     * @memberof ColorManager\r\n     */\r\n    toHSV(alpha = false) {\r\n        return this.toString.call(this, 'hsv', Number_1.relativeClamp(this.hsv.h, 0, 1, 0, 360), this.hsv.s * 100, this.hsv.v * 100, alpha, true);\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @returns {string}\r\n     * @memberof ColorManager\r\n     */\r\n    toCMYK() {\r\n        return `cmyk(${Number_1.fix(this.cmyk.c * 100, 2)}%, ${Number_1.fix(this.cmyk.m * 100, 2)}%, ${Number_1.fix(this.cmyk.y * 100, 2)}%, ${Number_1.fix(this.cmyk.k * 100, 2)}%)`;\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @returns {string}\r\n     * @memberof ColorManager\r\n     */\r\n    toHEX() {\r\n        return this.hex;\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @returns {string}\r\n     * @memberof ColorManager\r\n     */\r\n    toRGBA() {\r\n        return this.toRGB(true);\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @returns {string}\r\n     * @memberof ColorManager\r\n     */\r\n    toHSLA() {\r\n        return this.toHSL(true);\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @returns {string}\r\n     * @memberof ColorManager\r\n     */\r\n    toHSVA() {\r\n        return this.toHSV(true);\r\n    }\r\n}\r\nexports.default = ColorManager;\r\n//# sourceMappingURL=ColorManager.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Object_1 = require(\"./Object\");\r\nconst Number_1 = require(\"./Number\");\r\n/**\r\n * Converte un array in un array di interi.\r\n *\r\n * @example\r\n * ```javascript\r\n *\r\n * const elements = [1, '2', '3.23', 4.2332, 'a']\r\n * const results = utility.array.intersect(elements)\r\n * console.log(results) // [1, 2, 3, 4, NaN]\r\n * ```\r\n *\r\n * @param {Array<any>} elements\r\n * @returns {Array<number>}\r\n */\r\nexports.toInt = (elements) => elements.map(e => parseInt(e));\r\n/**\r\n * Converte un array in un array di float.\r\n *\r\n * @example\r\n * ```javascript\r\n *\r\n * const elements = [1, '2', '3.23', 4.2332, 'a']\r\n * const results = utility.array.intersect(elements)\r\n * console.log(results) // [ 1, 2, 3.23, 4.2332, NaN ]\r\n * ```\r\n *\r\n * @param {Array<any>} elements\r\n * @returns {Array<number>}\r\n */\r\nexports.toFloat = (elements) => elements.map(e => parseFloat(e));\r\n/**\r\n * Controlla se il valore di una propriet esiste all'interno di un array di oggetti.\r\n *\r\n * @example\r\n * ```javascript\r\n *\r\n * const elements = [{ 'id': 1 } { 'id': 2 }]\r\n * const result = utility.array.hasObjectProperty(elements, 'id', 2)\r\n * console.log(results) // true\r\n * ```\r\n *\r\n * @param {Array<object>} elements\r\n * @param {string} key\r\n * @param {(((value: any, item: any) => boolean) | any)} value\r\n * @returns {boolean}\r\n */\r\nexports.hasObjectProperty = (elements, key, value) => exports.indexOfObjectProperty(elements, key, value) >= 0;\r\n/**\r\n * Ritorna l'indice dell'oggetto che possiede la proprit cercata. Ritorna -1 se l'elemento non viene trovato\r\n *\r\n * @example\r\n * ```javascript\r\n *\r\n * // Esempio di una propriet di primo livello\r\n * const elements = [\r\n *  { 'id': 1, 'token': 'xxx-yyy' }\r\n *  { 'id': 2, 'token': 'aaa-bbb' }\r\n * ]\r\n * const index = utility.array.indexOfObjectProperty(elements, 'token', 'aaa-bbb')\r\n * console.log(index) // 1\r\n * ```\r\n * @example\r\n * ```javascript\r\n *\r\n * // Esempio di una propriet di primo secondo livello e funzione di validazione (3 parametro)\r\n * const elements = [\r\n *  { 'id': 1, 'data': { 'active': true, 'token': 'xxx-yyy' }}\r\n *  { 'id': 2, 'data': { 'active': true, 'token': 'aaa-bbb' }}\r\n * ]\r\n * const index = utility.array.indexOfObjectProperty(\r\n *  elements,\r\n *  'data.token',\r\n *  (value, item) => item.data.active && value === 'aaa-bbb'\r\n * )\r\n * console.log(index) // 1\r\n * ```\r\n *\r\n * @param {Array<object>} elements\r\n * @param {string} key\r\n * @param {(((value: any, item: any) => boolean) | any)} value\r\n * @returns {number}\r\n */\r\nexports.indexOfObjectProperty = (elements, key, value) => {\r\n    for (let i = elements.length - 1; i >= 0; i--)\r\n        if (typeof value === 'function' ? value(Object_1.getProperty(elements[i], key, 'Nil'), elements[i]) : Object_1.getProperty(elements[i], key) === value)\r\n            return i;\r\n    return -1;\r\n};\r\n/**\r\n * Ritorna l'intersezione tra due array.\r\n *\r\n * @example\r\n * ```javascript\r\n *\r\n * const a = [1, 2, 3]\r\n * const b = [2, 3, 4]\r\n * console.log(utility.array.intersect(a, b)) // [ 2, 3 ]\r\n * ```\r\n *\r\n * @param {Array<any>} a\r\n * @param {Array<any>} b\r\n * @returns {Array<any>}\r\n */\r\nexports.intersect = (a, b) => {\r\n    var ai = 0, bi = 0;\r\n    const result = new Array();\r\n    while (ai < a.length && bi < b.length) {\r\n        if (a[ai] < b[bi])\r\n            ai++;\r\n        else if (a[ai] > b[bi])\r\n            bi++;\r\n        else {\r\n            result.push(a[ai]);\r\n            ai++;\r\n            bi++;\r\n        }\r\n    }\r\n    return result;\r\n};\r\n/**\r\n * Ritorna il prossimo elemento di un array.\r\n *\r\n * @example\r\n * ```javascript\r\n *\r\n * const a = [1, 2, 3]\r\n * console.log(utility.array.next(a, 2)) // 1\r\n * ```\r\n *\r\n * @param {Array<any>} a\r\n * @param {number} index\r\n * @returns {Aany}\r\n */\r\nexports.nextElement = (a, index) => a[Number_1.nextNumber(index, a.length)];\r\n/**\r\n * Ritorna l'elemento precedente di un array.\r\n *\r\n * @example\r\n * ```javascript\r\n *\r\n * const a = [1, 2, 3]\r\n * console.log(utility.array.next(a, 2)) // 2\r\n * ```\r\n *\r\n * @param {Array<any>} a\r\n * @param {number} index\r\n * @returns {Aany}\r\n */\r\nexports.prevElement = (a, index) => a[Number_1.prevNumber(index, a.length)];\r\n/**\r\n * Ritorna un elemento random di un array.\r\n *\r\n * @example\r\n * ```javascript\r\n *\r\n * const a = [1, 2, 3]\r\n * console.log(utility.array.next(a, 2)) // 2\r\n * ```\r\n *\r\n * @param {Array<any>} a\r\n * @param {number} index\r\n * @returns {Aany}\r\n */\r\nexports.randomElement = (a) => a[Number_1.randomInt(0, a.length - 1)];\r\n//# sourceMappingURL=Array.js.map","import ScenePropUtilities from \"../scene-utilities/ScenePropUtilities\";\r\nimport Simple from \"./Simple\";\r\nconst Animation = {\r\n    composeAnimation: (drawer, prop_name, animation) => {\r\n        switch (animation.type) {\r\n            case 'simple': {\r\n                const simpleAnimation = Object.assign({}, animation.value);\r\n                simpleAnimation.from = ScenePropUtilities.getTransformedValue(drawer, prop_name, simpleAnimation.from);\r\n                simpleAnimation.to = ScenePropUtilities.getTransformedValue(drawer, prop_name, simpleAnimation.to);\r\n                return Simple.compose(simpleAnimation);\r\n            }\r\n            case 'raw': {\r\n                const rawValue = animation.value;\r\n                return eval(rawValue.raw);\r\n            }\r\n        }\r\n    },\r\n};\r\nexport default Animation;\r\n//# sourceMappingURL=Animation.js.map","export { default as Scene } from \"./core/Scene\";\r\nexport { default as SceneChild } from \"./core/SceneChild\";\r\nexport { default as Group } from \"./core/Group\";\r\nexport { default as Line } from \"./core/shapes/primitives/Line\";\r\nexport { default as Triangle } from \"./core/shapes/primitives/Triangle\";\r\nexport { default as Rect } from \"./core/shapes/primitives/Rect\";\r\nexport { default as RegularPolygon } from \"./core/shapes/primitives/RegularPolygon\";\r\nexport { default as Circle } from \"./core/shapes/primitives/Circle\";\r\nexport { default as Rose } from \"./core/shapes/primitives/Rose\";\r\nexport { default as Spiral } from \"./core/shapes/primitives/Spiral\";\r\nexport { default as Lissajous } from \"./core/shapes/primitives/Lissajous\";\r\nexport { default as Shape } from \"./core/shapes/Shape\";\r\nexport { default as ShapePrimitive } from \"./core/shapes/ShapePrimitive\";\r\nexport { default as ShapeLoop } from \"./core/shapes/ShapeLoop\";\r\nexport { default as ShapeBuffer } from \"./core/shapes/ShapeBuffer\";\r\nexport { default as Vec2 } from \"./core/math/Vec2\";\r\nexport { toDegrees, toRadians, isDef, clamp, relativeClamp } from \"./core/Utilites\";\r\nexport { default as Context } from \"./core/Context\";\r\nexport { ShapePrimitiveAdaptMode } from \"./core/interfaces/shapes/Interfaces\";\r\nexport { default as DrawerCanvas } from \"./services/drawer-canvas/DrawerCanvas\";\r\nexport { default as Animation } from \"./services/animation/Simple\";\r\n//# sourceMappingURL=index-light.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Controlla se il valore  definito\r\n *\r\n * @param {*} value\r\n * @returns {boolean}\r\n */\r\nexports.isDef = (value) => {\r\n    return typeof value !== 'undefined';\r\n};\r\n/**\r\n * Controlla se il valore non  definito\r\n *\r\n * @param {*} value\r\n * @returns {boolean}\r\n */\r\nexports.isUndef = (value) => {\r\n    return !exports.isDef(value);\r\n};\r\n/**\r\n * Controlla se {a}  uguale a {b}.\r\n * Verranno controllate anche le propriet innestate.\r\n *\r\n * @param {*} a\r\n * @param {*} b\r\n * @returns {boolean}\r\n */\r\nexports.isEqual = (a, b) => {\r\n    if (typeof a !== 'object' || a === null || b === null) {\r\n        return a === b;\r\n    }\r\n    else {\r\n        const keys = Object.keys(a);\r\n        for (let i = 0, len = keys.length; i < len; i++)\r\n            if (typeof b[keys[i]] === 'undefined' || !exports.isEqual(a[keys[i]], b[keys[i]]))\r\n                return false;\r\n    }\r\n    return true;\r\n};\r\n/**\r\n * Mappa un oggetto\r\n *\r\n * @param {object} object\r\n * @param {(value: any, key: string, index: number) => any} callable\r\n * @returns {Object}\r\n */\r\nexports.map = (object, callable) => {\r\n    Object.keys(object).forEach((key, index) => {\r\n        object[key] = callable(object[key], key, index);\r\n    });\r\n    return object;\r\n};\r\n/**\r\n * Scorre un oggetto\r\n *\r\n * @param {object} object\r\n * @param {(value: any, key: string, index: number) => any} callable\r\n */\r\nexports.each = (object, callable) => {\r\n    Object.keys(object).forEach((key, index) => {\r\n        callable(object[key], key, index);\r\n    });\r\n};\r\n/**\r\n * Controlla se una propriet esiste nell'oggetto {object}\r\n *\r\n * @example\r\n * ```javascript\r\n *\r\n * const data = { key: 'mykey', items: [] }\r\n * console.log(object.hasProperty(data, 'items')) // true\r\n * ```\r\n *\r\n * @param {object} object\r\n * @param {string} property\r\n * @returns {boolean}\r\n */\r\nexports.hasProperty = (object, property) => {\r\n    return typeof this.getProperty(object, property, undefined) !== 'undefined';\r\n};\r\n/**\r\n * Ritorna la propriet di un oggetto\r\n *\r\n * @example\r\n * ```javascript\r\n *\r\n * const data = { key: 'mykey', items: [{ id: 1, name: 'Foo' }, { id: 2, name: 'Bar' }] }\r\n * console.log(utility.object.getProperty(data, 'items.1.name')) // Bar\r\n * ```\r\n *\r\n * @param {object} object\r\n * @param {string} property\r\n * @param {*} [defaultValue=null]\r\n * @returns\r\n */\r\nexports.getProperty = (object, property, defaultValue = null) => {\r\n    const properties = property.split('.');\r\n    const len = properties.length;\r\n    for (let i = 0; i < len; i++) {\r\n        const p = properties[i];\r\n        const pi = parseInt(p);\r\n        if (p == '*' && Array.isArray(object))\r\n            return object.map(o => this.getProperty(o, properties.slice(i + 1).join('.'), defaultValue));\r\n        if (!isNaN(pi) && Array.isArray(object))\r\n            return this.getProperty(object[i], properties.slice(i + 1).join('.'), defaultValue);\r\n        if (!object.hasOwnProperty(p))\r\n            return defaultValue;\r\n        object = object[p];\r\n        if (typeof object === 'undefined')\r\n            return defaultValue;\r\n    }\r\n    return object;\r\n};\r\n/**\r\n * Setta pi propriet in un oggetto\r\n *\r\n * @example\r\n * ```javascript\r\n *\r\n * const data = { }\r\n * utility.object.setProperties(data, ['a', 'b'], [1, [2, 3]])\r\n * console.log(data) // { a: 1, b: [ 2, 3 ] }\r\n * ```\r\n *\r\n * @param {object} object\r\n * @param {Array<string>} properties\r\n * @param {(Array<any> | Function | any)} values\r\n */\r\nexports.setProperties = (object, properties, values) => {\r\n    properties.forEach((property, index) => {\r\n        let temp = object;\r\n        const nestedProperties = property.split('.');\r\n        const setPropery = nestedProperties.pop();\r\n        nestedProperties.forEach(p => { temp = temp[p] || {}; });\r\n        temp[setPropery] = Array.isArray(values) ? values[index] : typeof values === 'function' ? values(temp[setPropery]) : values;\r\n    });\r\n};\r\n//# sourceMappingURL=Object.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst ColorExceptions_1 = require(\"./ColorExceptions\");\r\nconst Array_1 = require(\"@pups/utility/build/Array\");\r\nconst Number_1 = require(\"@pups/utility/build/Number\");\r\n/**\r\n * Classe statica.\r\n * Si utilizza il metodo 'parse' per convertire una string o un oggetto in un oggetto del tipo Types.Color.Parsing.Match\r\n *\r\n * @class ColorParser\r\n */\r\nclass ColorParser {\r\n    /**\r\n     *\r\n     *\r\n     * @static\r\n     * @param {Types.Color.All} color\r\n     * @returns {Types.Color.Parsing.Match}\r\n     * @memberof ColorParser\r\n     */\r\n    static parse(color) {\r\n        return typeof color === 'string' ? ColorParser.fromString(color) : ColorParser.fromObject(color);\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @private\r\n     * @static\r\n     * @param {string} color\r\n     * @returns {Types.Color.Parsing.Match}\r\n     * @memberof ColorParser\r\n     */\r\n    static fromString(color) {\r\n        let match, result = null;\r\n        for (let i = ColorParser.MATCHES.length - 1; i >= 0; i--)\r\n            if ((match = ColorParser.MATCHES[i].regexp.exec(color)))\r\n                result = { type: ColorParser.MATCHES[i].type, value: match.slice(1) };\r\n        if (!result)\r\n            throw new ColorExceptions_1.ColorNotValidException(color, ColorParser.MATCHES);\r\n        if (result.type.indexOf('hex') != -1)\r\n            return result;\r\n        else\r\n            result.value = Array_1.toFloat(result.value);\r\n        const matchResolver = typeof ColorParser.MATCH_VALUES[result.type] === 'string' ? ColorParser.MATCH_VALUES[ColorParser.MATCH_VALUES[result.type]] : ColorParser.MATCH_VALUES[result.type];\r\n        for (let i in matchResolver.possibilities) {\r\n            if (ColorParser.isFromZeroTo(result.value, matchResolver.possibilities[i])) {\r\n                if (matchResolver.possibilities[i] != matchResolver.want) {\r\n                    result.value = ColorParser.scaleToFromZeroTo(result.value, matchResolver.possibilities[i], matchResolver.want);\r\n                }\r\n                return result;\r\n            }\r\n        }\r\n        throw new ColorExceptions_1.ColorParsingException(color);\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @private\r\n     * @static\r\n     * @param {(Types.Color.RGB | Types.Color.HSV | Types.Color.HSL | Types.Color.CMYK)} color\r\n     * @returns {Types.Color.Parsing.Match}\r\n     * @memberof ColorParser\r\n     */\r\n    static fromObject(color) {\r\n        if ('r' in color)\r\n            return { type: 'rgba', value: [color.r, color.g, color.b, color.a] };\r\n        if ('l' in color)\r\n            return { type: 'hsla', value: [color.h, color.s, color.l, color.a] };\r\n        if ('v' in color)\r\n            return { type: 'hsva', value: [color.h, color.s, color.v, color.a] };\r\n        if ('c' in color)\r\n            return { type: 'cmyk', value: [color.c, color.m, color.y, color.k] };\r\n        throw new ColorExceptions_1.ColorParsingException(JSON.stringify(color));\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @static\r\n     * @param {(Array<string | number>)} values\r\n     * @returns {boolean}\r\n     * @memberof ColorParser\r\n     */\r\n    static isFromZeroToOne(values) {\r\n        for (let i in values)\r\n            if (values[i] > 1)\r\n                return false;\r\n        return true;\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @static\r\n     * @param {(Array<string | number>)} values\r\n     * @param {(Array<number> | number)} maxValues\r\n     * @returns {boolean}\r\n     * @memberof ColorParser\r\n     */\r\n    static isFromZeroTo(values, maxValues) {\r\n        if (((Array.isArray(maxValues) && maxValues != ColorParser.ZERO_TO_ONE) || (!Array.isArray(maxValues) && maxValues == 1)) && ColorParser.isFromZeroToOne(values))\r\n            return false;\r\n        for (let i in values)\r\n            if (values[i] > (Array.isArray(maxValues) ? maxValues[i] : maxValues))\r\n                return false;\r\n        return true;\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @static\r\n     * @param {Array<number>} values\r\n     * @param {(Array<number> | number)} maxValues\r\n     * @returns {Array<number>}\r\n     * @memberof ColorParser\r\n     */\r\n    static scaleToFromZeroToOne(values, maxValues) {\r\n        if (ColorParser.isFromZeroToOne(values))\r\n            return values;\r\n        const result = [];\r\n        for (let i in values)\r\n            result.push(Number_1.clamp01(values[i] / (Array.isArray(maxValues) ? maxValues[i] : maxValues)));\r\n        return result;\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @static\r\n     * @param {Array<number>} values\r\n     * @param {Array<number>} maxValues\r\n     * @param {Array<number>} wantValues\r\n     * @returns\r\n     * @memberof ColorParser\r\n     */\r\n    static scaleToFromZeroTo(values, maxValues, wantValues) {\r\n        const result = [];\r\n        for (let i in values)\r\n            result.push(Number_1.clamp(0, (Array.isArray(wantValues) ? wantValues[i] : wantValues), values[i] / (Array.isArray(maxValues) ? maxValues[i] : maxValues) * (Array.isArray(wantValues) ? wantValues[i] : wantValues)));\r\n        return result;\r\n    }\r\n}\r\n/**\r\n *\r\n *\r\n * @private\r\n * @static\r\n * @memberof ColorParser\r\n */\r\nColorParser.CSS_INTEGER = '[-\\\\+]?\\\\d+%?';\r\n/**\r\n *\r\n *\r\n * @private\r\n * @static\r\n * @memberof ColorParser\r\n */\r\nColorParser.CSS_NUMBER = '[-\\\\+]?\\\\d*\\\\.\\\\d+%?';\r\n/**\r\n *\r\n *\r\n * @private\r\n * @static\r\n * @memberof ColorParser\r\n */\r\nColorParser.CSS_UNIT = '(?:' + ColorParser.CSS_NUMBER + ')|(?:' + ColorParser.CSS_INTEGER + ')';\r\n/**\r\n *\r\n *\r\n * @private\r\n * @static\r\n * @memberof ColorParser\r\n */\r\nColorParser.PERMISSIVE_MATCH3 = '[\\\\s|\\\\(]+(' + ColorParser.CSS_UNIT + ')[,|\\\\s]+(' + ColorParser.CSS_UNIT + ')[,|\\\\s]+(' + ColorParser.CSS_UNIT + ')\\\\s*\\\\)?';\r\n/**\r\n *\r\n *\r\n * @private\r\n * @static\r\n * @memberof ColorParser\r\n */\r\nColorParser.PERMISSIVE_MATCH4 = '[\\\\s|\\\\(]+(' + ColorParser.CSS_UNIT + ')[,|\\\\s]+(' + ColorParser.CSS_UNIT + ')[,|\\\\s]+(' + ColorParser.CSS_UNIT + ')[,|\\\\s]+(' + ColorParser.CSS_UNIT + ')\\\\s*\\\\)?';\r\n/**\r\n *\r\n *\r\n * @private\r\n * @static\r\n * @type {Array<number>}\r\n * @memberof ColorParser\r\n */\r\nColorParser.ZERO_TO_ONE = [1, 1, 1, 1];\r\n/**\r\n *\r\n *\r\n * @private\r\n * @static\r\n * @type {Array<number>}\r\n * @memberof ColorParser\r\n */\r\nColorParser.ZERO_TO_255 = [255, 255, 255, 1];\r\n/**\r\n *\r\n *\r\n * @private\r\n * @static\r\n * @memberof ColorParser\r\n */\r\nColorParser.MATCH_VALUES = {\r\n    'rgb': {\r\n        possibilities: [ColorParser.ZERO_TO_ONE, ColorParser.ZERO_TO_255],\r\n        want: ColorParser.ZERO_TO_255\r\n    },\r\n    'rgba': 'rgb',\r\n    'cmyk': {\r\n        possibilities: [[100, 100, 100, 100], ColorParser.ZERO_TO_ONE],\r\n        want: ColorParser.ZERO_TO_ONE\r\n    },\r\n    'hsl': {\r\n        possibilities: [[360, 100, 100, 1], ColorParser.ZERO_TO_ONE],\r\n        want: ColorParser.ZERO_TO_ONE\r\n    },\r\n    'hsla': 'hsl', 'hsv': 'hsl', 'hsva': 'hsl'\r\n};\r\n/**\r\n *\r\n *\r\n * @private\r\n * @static\r\n * @type {Array<Types.Color.Parsing.Regex>}\r\n * @memberof ColorParser\r\n */\r\nColorParser.MATCHES = [\r\n    //{ type: 'CSS_UNIT', regexp: new RegExp(CSS_UNIT) },\r\n    { type: 'rgb', regexp: new RegExp('rgb' + ColorParser.PERMISSIVE_MATCH3) },\r\n    { type: 'rgba', regexp: new RegExp('rgba' + ColorParser.PERMISSIVE_MATCH4) },\r\n    { type: 'hsl', regexp: new RegExp('hsl' + ColorParser.PERMISSIVE_MATCH3) },\r\n    { type: 'hsla', regexp: new RegExp('hsla' + ColorParser.PERMISSIVE_MATCH4) },\r\n    { type: 'hsv', regexp: new RegExp('hsv' + ColorParser.PERMISSIVE_MATCH3) },\r\n    { type: 'hsva', regexp: new RegExp('hsva' + ColorParser.PERMISSIVE_MATCH4) },\r\n    { type: 'cmyk', regexp: new RegExp('cmyk' + ColorParser.PERMISSIVE_MATCH4) },\r\n    { type: 'hex3', regexp: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/ },\r\n    { type: 'hex6', regexp: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/ },\r\n    { type: 'hex4', regexp: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/ },\r\n    { type: 'hex8', regexp: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/ },\r\n];\r\nexports.default = ColorParser;\r\n//# sourceMappingURL=ColorParser.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass ColorNotValidException extends Error {\r\n    constructor(color, types) {\r\n        super(`Il colore '${color}' non  valido.\\nI formati supportati sono: ${types.map(e => e.type).join(', ')}`);\r\n    }\r\n}\r\nexports.ColorNotValidException = ColorNotValidException;\r\nclass ColorParsingException extends Error {\r\n    constructor(color) {\r\n        super(`Impossibile convertire il colore '${color}'`);\r\n    }\r\n}\r\nexports.ColorParsingException = ColorParsingException;\r\n//# sourceMappingURL=ColorExceptions.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass ColorConversions {\r\n    /**\r\n     *\r\n     * @static\r\n     * @param {RGB} rgb\r\n     * @returns {HEX}\r\n     * @memberof ColorConversions\r\n     */\r\n    static rgbToHex(rgb) {\r\n        return `#${ColorConversions.toHex(rgb.r)}${ColorConversions.toHex(rgb.g)}${ColorConversions.toHex(rgb.b)}`;\r\n    }\r\n    /**\r\n     *\r\n     * @private\r\n     * @static\r\n     * @param {number} value\r\n     * @returns\r\n     * @memberof ColorConversions\r\n     */\r\n    static toHex(value) {\r\n        const hex = value.toString(16);\r\n        return hex.length == 2 ? hex : '0' + hex;\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @static\r\n     * @param {(Types.Color.HEX | Array<string>)} hex\r\n     * @returns {Types.Color.RGB}\r\n     * @memberof ColorConversions\r\n     */\r\n    static hexToRgb(hex) {\r\n        hex = typeof hex === 'string' ? hex.match(/[a-zA-Z0-9]{2}/gi) : hex;\r\n        return {\r\n            r: ColorConversions.hexToDec(hex[0]),\r\n            g: ColorConversions.hexToDec(hex[1]),\r\n            b: ColorConversions.hexToDec(hex[2])\r\n        };\r\n    }\r\n    /**\r\n     * Converte un esadecimale in un decimale\r\n     *\r\n     * @static\r\n     * @param {string} str\r\n     * @returns {number}\r\n     * @memberof ColorConversions\r\n     */\r\n    static hexToDec(str) {\r\n        return parseInt(ColorConversions.fill2(str), 16);\r\n    }\r\n    /**\r\n     * Dublica il carattere se  singolo\r\n     *\r\n     * @static\r\n     * @param {string} str\r\n     * @returns {string}\r\n     * @memberof ColorConversions\r\n     */\r\n    static fill2(str) {\r\n        return str.length == 1 ? str + str : str;\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @static\r\n     * @param {Types.Color.RGB} rgb\r\n     * @returns {Types.Color.HSL}\r\n     * @memberof ColorConversions\r\n     */\r\n    static rgbToHsl(rgb) {\r\n        let r = rgb.r / 255, g = rgb.g / 255, b = rgb.b / 255;\r\n        const max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n        let h, s, l = (max + min) / 2;\r\n        if (max == min) {\r\n            h = s = 0; // achromatic\r\n        }\r\n        else {\r\n            const d = max - min;\r\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n            switch (max) {\r\n                case r:\r\n                    h = (g - b) / d + (g < b ? 6 : 0);\r\n                    break;\r\n                case g:\r\n                    h = (b - r) / d + 2;\r\n                    break;\r\n                case b:\r\n                    h = (r - g) / d + 4;\r\n                    break;\r\n            }\r\n            h /= 6;\r\n        }\r\n        return { h, s, l };\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @static\r\n     * @param {Types.Color.HSL} hsl\r\n     * @returns {Types.Color.RGB}\r\n     * @memberof ColorConversions\r\n     */\r\n    static hslToRgb(hsl) {\r\n        let h = hsl.h, s = hsl.s, l = hsl.l, r, g, b;\r\n        if (s == 0) {\r\n            r = g = b = l; // achromatic\r\n        }\r\n        else {\r\n            const hue2rgb = ((p, q, t) => {\r\n                t += t < 0 ? 1 : t > 1 ? -1 : 0;\r\n                if (t < 1 / 6)\r\n                    return p + (q - p) * 6 * t;\r\n                if (t < 1 / 2)\r\n                    return q;\r\n                if (t < 2 / 3)\r\n                    return p + (q - p) * (2 / 3 - t) * 6;\r\n                return p;\r\n            });\r\n            const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n            const p = 2 * l - q;\r\n            r = hue2rgb(p, q, h + 1 / 3);\r\n            g = hue2rgb(p, q, h);\r\n            b = hue2rgb(p, q, h - 1 / 3);\r\n        }\r\n        return { r: Math.round(r * 255), g: Math.round(g * 255), b: Math.round(b * 255) };\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @static\r\n     * @param {Types.Color.RGB} rgb\r\n     * @returns {Types.Color.HSV}\r\n     * @memberof ColorConversions\r\n     */\r\n    static rgbToHsv(rgb) {\r\n        let r = rgb.r / 255, g = rgb.g / 255, b = rgb.b / 255;\r\n        const max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n        let h, s, v = max;\r\n        const d = max - min;\r\n        s = max == 0 ? 0 : d / max;\r\n        if (max == min) {\r\n            h = 0; // achromatic\r\n        }\r\n        else {\r\n            switch (max) {\r\n                case r:\r\n                    h = (g - b) / d + (g < b ? 6 : 0);\r\n                    break;\r\n                case g:\r\n                    h = (b - r) / d + 2;\r\n                    break;\r\n                case b:\r\n                    h = (r - g) / d + 4;\r\n                    break;\r\n            }\r\n            h /= 6;\r\n        }\r\n        return { h, s, v };\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @static\r\n     * @param {Types.Color.HSV} hsv\r\n     * @returns {Types.Color.RGB}\r\n     * @memberof ColorConversions\r\n     */\r\n    static hsvToRgb(hsv) {\r\n        let h = hsv.h, s = hsv.s, v = hsv.v, r, g, b;\r\n        const i = Math.floor(h * 6);\r\n        const f = h * 6 - i;\r\n        const p = v * (1 - s);\r\n        const q = v * (1 - f * s);\r\n        const t = v * (1 - (1 - f) * s);\r\n        switch (i % 6) {\r\n            case 0:\r\n                r = v, g = t, b = p;\r\n                break;\r\n            case 1:\r\n                r = q, g = v, b = p;\r\n                break;\r\n            case 2:\r\n                r = p, g = v, b = t;\r\n                break;\r\n            case 3:\r\n                r = p, g = q, b = v;\r\n                break;\r\n            case 4:\r\n                r = t, g = p, b = v;\r\n                break;\r\n            case 5:\r\n                r = v, g = p, b = q;\r\n                break;\r\n        }\r\n        return { r: Math.round(r * 255), g: Math.round(g * 255), b: Math.round(b * 255) };\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @static\r\n     * @param {Types.Color.RGB} rgb\r\n     * @returns {Types.Color.CMYK}\r\n     * @memberof ColorConversions\r\n     */\r\n    static rgbToCmyk(rgb) {\r\n        let r = rgb.r / 255, g = rgb.g / 255, b = rgb.b / 255;\r\n        let cmyk = { k: null, c: null, m: null, y: null };\r\n        cmyk.k = +(1 - Math.max.call(null, r, g, b));\r\n        cmyk.c = +((1 - r - cmyk.k) / (1 - cmyk.k));\r\n        cmyk.m = +((1 - g - cmyk.k) / (1 - cmyk.k));\r\n        cmyk.y = +((1 - b - cmyk.k) / (1 - cmyk.k));\r\n        return cmyk;\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @static\r\n     * @param {Types.Color.CMYK} cmyk\r\n     * @returns {Types.Color.RGB}\r\n     * @memberof ColorConversions\r\n     */\r\n    static cmykToRgb(cmyk) {\r\n        return {\r\n            r: 255 * (1 - cmyk.c) * (1 - cmyk.k),\r\n            g: 255 * (1 - cmyk.m) * (1 - cmyk.k),\r\n            b: 255 * (1 - cmyk.y) * (1 - cmyk.k)\r\n        };\r\n    }\r\n}\r\nexports.default = ColorConversions;\r\n//# sourceMappingURL=ColorConversions.js.map","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import rng from './rng.js';\nimport stringify from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\n\nvar _clockseq; // Previous uuid creation time\n\n\nvar _lastMSecs = 0;\nvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || new Array(16);\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || stringify(b);\n}\n\nexport default v1;"],"sourceRoot":""}